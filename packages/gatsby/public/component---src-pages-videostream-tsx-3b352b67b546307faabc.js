(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+5ui":function(e,t,n){(function(t){e.exports=i,e.exports.decode=i,e.exports.encode=function(e){(e=Object.assign({},e)).infoHashBuffer&&(e.xt="urn:btih:".concat(e.infoHashBuffer.toString("hex")));e.infoHash&&(e.xt="urn:btih:".concat(e.infoHash));e.name&&(e.dn=e.name);e.keywords&&(e.kt=e.keywords);e.announce&&(e.tr=e.announce);e.urlList&&(e.ws=e.urlList,delete e.as);var t="magnet:?";return Object.keys(e).filter((function(e){return 2===e.length})).forEach((function(n,r){(Array.isArray(e[n])?e[n]:[e[n]]).forEach((function(e,i){!(r>0||i>0)||"kt"===n&&0!==i||(t+="&"),"dn"===n&&(e=encodeURIComponent(e).replace(/%20/g,"+")),"tr"!==n&&"xs"!==n&&"as"!==n&&"ws"!==n||(e=encodeURIComponent(e)),"kt"===n&&(e=encodeURIComponent(e)),t+="kt"===n&&i>0?"+".concat(e):"".concat(n,"=").concat(e)}))})),t};var r=n("Ye/2");function i(e){var n,i={},o=e.split("magnet:?")[1];((o&&o.length>=0?o.split("&"):[]).forEach((function(e){var t=e.split("=");if(2===t.length){var n=t[0],r=t[1];"dn"===n&&(r=decodeURIComponent(r).replace(/\+/g," ")),"tr"!==n&&"xs"!==n&&"as"!==n&&"ws"!==n||(r=decodeURIComponent(r)),"kt"===n&&(r=decodeURIComponent(r).split("+")),"ix"===n&&(r=Number(r)),i[n]?(Array.isArray(i[n])||(i[n]=[i[n]]),i[n].push(r)):i[n]=r}})),i.xt)&&(Array.isArray(i.xt)?i.xt:[i.xt]).forEach((function(e){if(n=e.match(/^urn:btih:(.{40})/))i.infoHash=n[1].toLowerCase();else if(n=e.match(/^urn:btih:(.{32})/)){var o=r.decode(n[1]);i.infoHash=t.from(o,"binary").toString("hex")}}));return i.infoHash&&(i.infoHashBuffer=t.from(i.infoHash,"hex")),i.dn&&(i.name=i.dn),i.kt&&(i.keywords=i.kt),"string"==typeof i.tr?i.announce=[i.tr]:Array.isArray(i.tr)?i.announce=i.tr:i.announce=[],i.urlList=[],("string"==typeof i.as||Array.isArray(i.as))&&(i.urlList=i.urlList.concat(i.as)),("string"==typeof i.ws||Array.isArray(i.ws))&&(i.urlList=i.urlList.concat(i.ws)),i.announce=Array.from(new Set(i.announce)),i.urlList=Array.from(new Set(i.urlList)),i}}).call(this,n("+ZX+").Buffer)},"/Awr":function(e,t,n){"use strict";var r=n("X05J"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=Object.create(n("a1wc"));o.inherits=n("qW1w");var s=n("XZRp"),a=n("lwyY");o.inherits(l,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var f=u[c];l.prototype[f]||(l.prototype[f]=a.prototype[f])}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},"/Qos":function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("gIIS"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("fRV1"))},"/kXe":function(e,t,n){e.exports=n("r2q8").EventEmitter},0:function(e,t){},"0sP2":function(e,t,n){"use strict";e.exports=o;var r=n("cMA9"),i=Object.create(n("a1wc"));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n("qW1w"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},"1BSu":function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=function(e){"use strict";o(s,e);var n=u(s);function s(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,s),t=n.call(this,i),"object"==typeof e&&(e=(i=e).size),t.size=e||512;var o=i,a=o.nopad,u=o.zeroPadding,c=void 0===u||u;return t._zeroPadding=!a&&!!c,t._buffered=[],t._bufferedBytes=0,t}return i(s,[{key:"_transform",value:function(e,n,r){for(this._bufferedBytes+=e.length,this._buffered.push(e);this._bufferedBytes>=this.size;){var i=t.concat(this._buffered);this._bufferedBytes-=this.size,this.push(i.slice(0,this.size)),this._buffered=[i.slice(this.size,i.length)]}r()}},{key:"_flush",value:function(){if(this._bufferedBytes&&this._zeroPadding){var e=t.alloc(this.size-this._bufferedBytes);this._buffered.push(e),this.push(t.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(t.concat(this._buffered)),this._buffered=null);this.push(null)}}]),s}(n("G+mE").Transform);e.exports=c}).call(this,n("+ZX+").Buffer)},"1Ied":function(e,t,n){(function(t,r,i){var o=n("tP4B"),s=n("qW1w"),a=n("KbTw"),u=n("Yuf/"),c=n("cMcO"),f=a.IncomingMessage,l=a.readyStates;var h=e.exports=function(e){var n,r=this;u.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}(n,i),r._fetchTimer=null,r.on("finish",(function(){r._onFinish()}))};s(h,u.Writable),h.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===d.indexOf(n)&&(this._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,s=e._headers,a=null;"GET"!==n.method&&"HEAD"!==n.method&&(a=o.arraybuffer?c(t.concat(e._body)):o.blobConstructor?new r.Blob(e._body.map((function(e){return c(e)})),{type:(s["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(s).forEach((function(e){var t=s[e].name,n=s[e].value;Array.isArray(n)?n.forEach((function(e){u.push([t,e])})):u.push([t,n])})),"fetch"===e._mode){var f=null;if(o.abortController){var h=new AbortController;f=h.signal,e._fetchAbortController=h,"requestTimeout"in n&&0!==n.requestTimeout&&(e._fetchTimer=r.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),n.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:f}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var d=e._xhr=new r.XMLHttpRequest;try{d.open(e._opts.method,e._opts.url,!0)}catch(p){return void i.nextTick((function(){e.emit("error",p)}))}"responseType"in d&&(d.responseType=e._mode.split(":")[0]),"withCredentials"in d&&(d.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(d.timeout=n.requestTimeout,d.ontimeout=function(){e.emit("requestTimeout")}),u.forEach((function(e){d.setRequestHeader(e[0],e[1])})),e._response=null,d.onreadystatechange=function(){switch(d.readyState){case l.LOADING:case l.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(d.onprogress=function(){e._onXHRProgress()}),d.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{d.send(a)}catch(p){return void i.nextTick((function(){e.emit("error",p)}))}}}},h.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(n){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new f(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},h.prototype._write=function(e,t,n){this._body.push(e),n()},h.prototype.abort=h.prototype.destroy=function(){this._destroyed=!0,r.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},h.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),u.Writable.prototype.end.call(this,e,t,n)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n("+ZX+").Buffer,n("fRV1"),n("F63i"))},"1Yjz":function(e,t,n){(function(t,r){var i=n("VrFO"),o=n("Y9Ll"),s=n("5Yy7"),a=n("N+ot"),u=n("AuHH");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var f=n("G+mE"),l=n("fncs");function h(){}var d=function(e){"use strict";s(a,e);var n=c(a);function a(e){var t;return i(this,a),(t=n.call(this,e)).destroyed=!1,t._finalized=!1,t._reading=!1,t._stream=null,t._drain=null,t._want=!1,t._onreadable=function(){t._want&&(t._want=!1,t._read())},t._onend=function(){t._stream=null},t}return o(a,[{key:"mdat",value:function(e,t){this.mediaData(e,t)}},{key:"mediaData",value:function(e,t){var n=new p(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:n},t),n}},{key:"box",value:function(e,n){if(n||(n=h),this.destroyed)return n(new Error("Encoder is destroyed"));var i;if(e.encodeBufferLen&&(i=t.alloc(e.encodeBufferLen)),e.stream)e.buffer=null,i=l.encode(e,i),this.push(i),this._stream=e.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",n),this._forward();else{if(i=l.encode(e,i),this.push(i))return r.nextTick(n);this._drain=n}}},{key:"destroy",value:function(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}}},{key:"finalize",value:function(){this._finalized=!0,this._stream||this._drain||this.push(null)}},{key:"_forward",value:function(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}}},{key:"_read",value:function(){if(!this._reading&&!this.destroyed){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1,this._finalized&&this.push(null)}}}]),a}(f.Readable),p=function(e){"use strict";s(n,e);var t=c(n);function n(e){var r;return i(this,n),(r=t.call(this))._parent=e,r.destroyed=!1,r}return o(n,[{key:"destroy",value:function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}]),n}(f.PassThrough);e.exports=d}).call(this,n("+ZX+").Buffer,n("F63i"))},2:function(e,t){},"2CR0":function(e,t,n){(function(t){e.exports=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return t.allocUnsafe?t.allocUnsafe(e):new t(e)}}).call(this,n("+ZX+").Buffer)},"2ylb":function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("n70c"),s=n("5Yy7"),a=n("N+ot"),u=n("AuHH");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var f=n("SVpy"),l=n("KQpv")("webtorrent:webconn"),h=n("jRAG"),d=n("wzj9"),p=n("93kM"),m=n("eRop").version,g=function(e){"use strict";s(a,e);var n=c(a);function a(e,t){var i;return r(this,a),(i=n.call(this)).url=e,i.webPeerId=d.sync(e),i._torrent=t,i._init(),i}return i(a,[{key:"_init",value:function(){var e=this;this.setKeepAlive(!0),this.once("handshake",(function(t,n){if(!e.destroyed){e.handshake(t,e.webPeerId);for(var r=e._torrent.pieces.length,i=new f(r),o=0;o<=r;o++)i.set(o,!0);e.bitfield(i)}})),this.once("interested",(function(){l("interested"),e.unchoke()})),this.on("uninterested",(function(){l("uninterested")})),this.on("choke",(function(){l("choke")})),this.on("unchoke",(function(){l("unchoke")})),this.on("bitfield",(function(){l("bitfield")})),this.on("request",(function(t,n,r,i){l("request pieceIndex=%d offset=%d length=%d",t,n,r),e.httpRequest(t,n,r,i)}))}},{key:"httpRequest",value:function(e,n,r,i){var o,s=this,a=e*this._torrent.pieceLength+n,u=a+r-1,c=this._torrent.files;if(c.length<=1)o=[{url:this.url,start:a,end:u}];else{var f=c.filter((function(e){return e.offset<=u&&e.offset+e.length>a}));if(f.length<1)return i(new Error("Could not find file corresponnding to web seed range request"));o=f.map((function(e){var t=e.offset+e.length-1;return{url:s.url+("/"===s.url[s.url.length-1]?"":"/")+e.path,fileOffsetInRange:Math.max(e.offset-a,0),start:Math.max(a-e.offset,0),end:Math.min(t,u-e.offset)}}))}var d,p=0,g=!1;o.length>1&&(d=t.alloc(r)),o.forEach((function(t){var s=t.url,a=t.start,u=t.end;l("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",s,e,n,r,a,u);var c={url:s,method:"GET",headers:{"user-agent":"WebTorrent/".concat(m," (https://webtorrent.io)"),range:"bytes=".concat(a,"-").concat(u)}};function f(e,n){if(e.statusCode<200||e.statusCode>=300)return g=!0,i(new Error("Unexpected HTTP status code ".concat(e.statusCode)));l("Got data of length %d",n.length),1===o.length?i(null,n):(n.copy(d,t.fileOffsetInRange),++p===o.length&&i(null,d))}h.concat(c,(function(e,t,n){if(!g)return e?"undefined"==typeof window||s.startsWith("".concat(window.location.origin,"/"))?(g=!0,i(e)):h.head(s,(function(t,n){if(!g){if(t)return g=!0,i(t);if(n.statusCode<200||n.statusCode>=300)return g=!0,i(new Error("Unexpected HTTP status code ".concat(n.statusCode)));if(n.url===s)return g=!0,i(e);c.url=n.url,h.concat(c,(function(e,t,n){if(!g)return e?(g=!0,i(e)):void f(t,n)}))}})):void f(t,n)}))}))}},{key:"destroy",value:function(){o(u(a.prototype),"destroy",this).call(this),this._torrent=null}}]),a}(p);e.exports=g}).call(this,n("+ZX+").Buffer)},3:function(e,t){},"3+V0":function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},"3zr3":function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("G+mE");function f(e){return h(e,{objectMode:!0,highWaterMark:16})}function l(e){return h(e)}function h(e,t){if(!e||"function"==typeof e||e._readableState)return e;var n=new c.Readable(t).wrap(e);return e.destroy&&(n.destroy=e.destroy.bind(e)),n}var d=function(e){"use strict";o(n,e);var t=u(n);function n(e,i){var o;return r(this,n),(o=t.call(this,i)).destroyed=!1,o._drained=!1,o._forwarding=!1,o._current=null,o._toStreams2=i&&i.objectMode?f:l,"function"==typeof e?o._queue=e:(o._queue=e.map(o._toStreams2),o._queue.forEach((function(e){"function"!=typeof e&&o._attachErrorListener(e)}))),o._next(),o}return i(n,[{key:"_read",value:function(){this._drained=!0,this._forward()}},{key:"_forward",value:function(){if(!this._forwarding&&this._drained&&this._current){var e;for(this._forwarding=!0;null!==(e=this._current.read())&&this._drained;)this._drained=this.push(e);this._forwarding=!1}}},{key:"destroy",value:function(e){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach((function(e){e.destroy&&e.destroy()})),e&&this.emit("error",e),this.emit("close"))}},{key:"_next",value:function(){var e=this;if(this._current=null,"function"==typeof this._queue)this._queue((function(t,n){if(t)return e.destroy(t);n=e._toStreams2(n),e._attachErrorListener(n),e._gotNextStream(n)}));else{var t=this._queue.shift();"function"==typeof t&&(t=this._toStreams2(t()),this._attachErrorListener(t)),this._gotNextStream(t)}}},{key:"_gotNextStream",value:function(e){var t=this;if(!e)return this.push(null),void this.destroy();this._current=e,this._forward();var n=function(){t._forward()},r=function(){e._readableState.ended||t.destroy()};e.on("readable",n),e.once("end",(function i(){t._current=null,e.removeListener("readable",n),e.removeListener("end",i),e.removeListener("close",r),t._next()})),e.once("close",r)}},{key:"_attachErrorListener",value:function(e){var t=this;if(e){e.once("error",(function n(r){e.removeListener("error",n),t.destroy(r)}))}}}]),n}(c.Readable);d.obj=function(e){return new d(e,{objectMode:!0,highWaterMark:16})},e.exports=d},4:function(e,t){},"4a/l":function(e,t,n){(function(t){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t||(t={}),this.chunkLength=Number(e),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(t.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}function r(e,n,r){t.nextTick((function(){e&&e(n,r)}))}e.exports=n,n.prototype.put=function(e,t,n){if(this.closed)return r(n,new Error("Storage is closed"));var i=e===this.lastChunkIndex;return i&&t.length!==this.lastChunkLength?r(n,new Error("Last chunk length must be "+this.lastChunkLength)):i||t.length===this.chunkLength?(this.chunks[e]=t,void r(n,null)):r(n,new Error("Chunk length must be "+this.chunkLength))},n.prototype.get=function(e,t,n){if("function"==typeof t)return this.get(e,null,t);if(this.closed)return r(n,new Error("Storage is closed"));var i=this.chunks[e];if(!i){var o=new Error("Chunk not found");return o.notFound=!0,r(n,o)}if(!t)return r(n,null,i);var s=t.offset||0,a=t.length||i.length-s;r(n,null,i.slice(s,a+s))},n.prototype.close=n.prototype.destroy=function(e){if(this.closed)return r(e,new Error("Storage is closed"));this.closed=!0,this.chunks=null,r(e,null)}}).call(this,n("F63i"))},"4j/0":function(e,t,n){"use strict";var r=n("KLyV").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=f,this.end=l,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},5:function(e,t){},"5Yy7":function(e,t,n){var r=n("695J");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},6:function(e,t){},7:function(e,t){},"7+jy":function(e,t){e.exports=function(e){return Math.max(16384,1<<Math.log2(e<1024?1:e/1024)+.5|0)}},"7CKa":function(e,t,n){"use strict";var r;var i=n("3+V0").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n("PTjJ")),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function f(e,t){return e.pipe(t)}function l(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=l(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(f)}},"7tW9":function(e,t,n){var r=n("VrFO"),i=n("Y9Ll");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=function(){"use strict";function e(t){var n=this;r(this,e),this._torrent=t,this._numPieces=t.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=function(e){n.recalculate(),n._initWire(e)},this._onWireHave=function(e){n._pieces[e]+=1},this._onWireBitfield=function(){n.recalculate()},this._torrent.wires.forEach((function(e){n._initWire(e)})),this._torrent.on("wire",this._onWire),this.recalculate()}return i(e,[{key:"getRarestPiece",value:function(e){for(var t=[],n=1/0,r=0;r<this._numPieces;++r)if(!e||e(r)){var i=this._pieces[r];i===n?t.push(r):i<n&&(t=[r],n=i)}return t.length?t[Math.random()*t.length|0]:-1}},{key:"destroy",value:function(){var e=this;this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach((function(t){e._cleanupWireEvents(t)})),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}},{key:"_initWire",value:function(e){var t=this;e._onClose=function(){t._cleanupWireEvents(e);for(var n=0;n<t._numPieces;++n)t._pieces[n]-=e.peerPieces.get(n)},e.on("have",this._onWireHave),e.on("bitfield",this._onWireBitfield),e.once("close",e._onClose)}},{key:"recalculate",value:function(){this._pieces.fill(0);var e,t=o(this._torrent.wires);try{for(t.s();!(e=t.n()).done;)for(var n=e.value,r=0;r<this._numPieces;++r)this._pieces[r]+=n.peerPieces.get(r)}catch(i){t.e(i)}finally{t.f()}}},{key:"_cleanupWireEvents",value:function(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}}]),e}();e.exports=a},8:function(e,t){},"87/0":function(e,t,n){"use strict";(function(e){var n=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];t.encode=function(t){e.isBuffer(t)||(t=new e(t));for(var n,r,i=0,o=0,s=0,a=0,u=new e(8*(n=t,r=Math.floor(n.length/5),n.length%5==0?r:r+1));i<t.length;){var c=t[i];s>3?(a=(a=c&255>>s)<<(s=(s+5)%8)|(i+1<t.length?t[i+1]:0)>>8-s,i++):(a=c>>8-(s+5)&31,0===(s=(s+5)%8)&&i++),u[o]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(a),o++}for(i=o;i<u.length;i++)u[i]=61;return u},t.decode=function(t){var r,i=0,o=0,s=0;e.isBuffer(t)||(t=new e(t));for(var a=new e(Math.ceil(5*t.length/8)),u=0;u<t.length&&61!==t[u];u++){var c=t[u]-48;if(!(c<n.length))throw new Error("Invalid input - it is not base32 encoded string");o=n[c],i<=3?0===(i=(i+5)%8)?(r|=o,a[s]=r,s++,r=0):r|=255&o<<8-i:(r|=255&o>>>(i=(i+5)%8),a[s]=r,s++,r=255&o<<8-i)}return a.slice(0,s)}}).call(this,n("+ZX+").Buffer)},9:function(e,t){},"93kM":function(e,t,n){(function(t){var r=n("Y9Ll"),i=n("n70c"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH"),u=n("VrFO");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var f=n("m4n2"),l=n("W92y"),h=n("SVpy"),d=n("KQpv")("bittorrent-protocol"),p=n("i+/A"),m=n("yjPI"),g=n("G+mE"),y=t.from("BitTorrent protocol"),v=t.from([0,0,0,0]),_=t.from([0,0,0,1,0]),b=t.from([0,0,0,1,1]),w=t.from([0,0,0,1,2]),k=t.from([0,0,0,1,3]),E=[0,0,0,0,0,0,0,0],S=[0,0,0,3,9,0,0],x=function e(t,n,r,i){"use strict";u(this,e),this.piece=t,this.offset=n,this.length=r,this.callback=i},R=function(e){"use strict";o(s,e);var n=c(s);function s(){var e;return u(this,s),(e=n.call(this))._debugId=p(4).toString("hex"),e._debug("new wire"),e.peerId=null,e.peerIdBuffer=null,e.type=null,e.amChoking=!0,e.amInterested=!1,e.peerChoking=!0,e.peerInterested=!1,e.peerPieces=new h(0,{grow:4e5}),e.peerExtensions={},e.requests=[],e.peerRequests=[],e.extendedMapping={},e.peerExtendedMapping={},e.extendedHandshake={},e.peerExtendedHandshake={},e._ext={},e._nextExt=1,e.uploaded=0,e.downloaded=0,e.uploadSpeed=m(),e.downloadSpeed=m(),e._keepAliveInterval=null,e._timeout=null,e._timeoutMs=0,e.destroyed=!1,e._finished=!1,e._parserSize=0,e._parser=null,e._buffer=[],e._bufferSize=0,e.once("finish",(function(){return e._onFinish()})),e._parseHandshake(),e}return r(s,[{key:"setKeepAlive",value:function(e){var t=this;this._debug("setKeepAlive %s",e),clearInterval(this._keepAliveInterval),!1!==e&&(this._keepAliveInterval=setInterval((function(){t.keepAlive()}),55e3))}},{key:"setTimeout",value:function(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()}},{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())}},{key:"end",value:function(){var e;this._debug("end"),this._onUninterested(),this._onChoke();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=i(a(s.prototype),"end",this)).call.apply(e,[this].concat(n))}},{key:"use",value:function(e){var t=e.prototype.name;if(!t)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",t);var n=this._nextExt,r=new e(this);function i(){}"function"!=typeof r.onHandshake&&(r.onHandshake=i),"function"!=typeof r.onExtendedHandshake&&(r.onExtendedHandshake=i),"function"!=typeof r.onMessage&&(r.onMessage=i),this.extendedMapping[n]=t,this._ext[t]=r,this[t]=r,this._nextExt+=1}},{key:"keepAlive",value:function(){this._debug("keep-alive"),this._push(v)}},{key:"handshake",value:function(e,n,r){var i,o;if("string"==typeof e?(e=e.toLowerCase(),i=t.from(e,"hex")):e=(i=e).toString("hex"),"string"==typeof n?o=t.from(n,"hex"):n=(o=n).toString("hex"),20!==i.length||20!==o.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",e,n,r);var s=t.from(E);s[5]|=16,r&&r.dht&&(s[7]|=1),this._push(t.concat([y,s,i,o])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}},{key:"_sendExtendedHandshake",value:function(){var e=Object.assign({},this.extendedHandshake);for(var t in e.m={},this.extendedMapping){var n=this.extendedMapping[t];e.m[n]=Number(t)}this.extended(0,l.encode(e)),this._extendedHandshakeSent=!0}},{key:"choke",value:function(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(_)}}},{key:"unchoke",value:function(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(b))}},{key:"interested",value:function(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(w))}},{key:"uninterested",value:function(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(k))}},{key:"have",value:function(e){this._debug("have %d",e),this._message(4,[e],null)}},{key:"bitfield",value:function(e){this._debug("bitfield"),t.isBuffer(e)||(e=e.buffer),this._message(5,[],e)}},{key:"request",value:function(e,t,n,r){return r||(r=function(){}),this._finished?r(new Error("wire is closed")):this.peerChoking?r(new Error("peer is choking")):(this._debug("request index=%d offset=%d length=%d",e,t,n),this.requests.push(new x(e,t,n,r)),this._updateTimeout(),void this._message(6,[e,t,n],null))}},{key:"piece",value:function(e,t,n){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=n.length,this.uploadSpeed(n.length),this.emit("upload",n.length),this._message(7,[e,t],n)}},{key:"cancel",value:function(e,t,n){this._debug("cancel index=%d offset=%d length=%d",e,t,n),this._callback(this._pull(this.requests,e,t,n),new Error("request was cancelled"),null),this._message(8,[e,t,n],null)}},{key:"port",value:function(e){this._debug("port %d",e);var n=t.from(S);n.writeUInt16BE(e,5),this._push(n)}},{key:"extended",value:function(e,n){if(this._debug("extended ext=%s",e),"string"==typeof e&&this.peerExtendedMapping[e]&&(e=this.peerExtendedMapping[e]),"number"!=typeof e)throw new Error("Unrecognized extension: ".concat(e));var r=t.from([e]),i=t.isBuffer(n)?n:l.encode(n);this._message(20,[],t.concat([r,i]))}},{key:"_read",value:function(){}},{key:"_message",value:function(e,n,r){var i=r?r.length:0,o=t.allocUnsafe(5+4*n.length);o.writeUInt32BE(o.length+i-4,0),o[4]=e;for(var s=0;s<n.length;s++)o.writeUInt32BE(n[s],5+4*s);this._push(o),r&&this._push(r)}},{key:"_push",value:function(e){if(!this._finished)return this.push(e)}},{key:"_onKeepAlive",value:function(){this._debug("got keep-alive"),this.emit("keep-alive")}},{key:"_onHandshake",value:function(e,t,n){var r,i=e.toString("hex"),o=t.toString("hex");for(r in this._debug("got handshake i=%s p=%s exts=%o",i,o,n),this.peerId=o,this.peerIdBuffer=t,this.peerExtensions=n,this.emit("handshake",i,o,n),this._ext)this._ext[r].onHandshake(i,o,n);n.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}},{key:"_onChoke",value:function(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}},{key:"_onUnchoke",value:function(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}},{key:"_onInterested",value:function(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}},{key:"_onUninterested",value:function(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}},{key:"_onHave",value:function(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))}},{key:"_onBitField",value:function(e){this.peerPieces=new h(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}},{key:"_onRequest",value:function(e,t,n){var r=this;if(!this.amChoking){this._debug("got request index=%d offset=%d length=%d",e,t,n);var i=function(i,s){if(o===r._pull(r.peerRequests,e,t,n))return i?r._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,n,i.message):void r.piece(e,t,s)},o=new x(e,t,n,i);this.peerRequests.push(o),this.emit("request",e,t,n,i)}}},{key:"_onPiece",value:function(e,t,n){this._debug("got piece index=%d offset=%d",e,t),this._callback(this._pull(this.requests,e,t,n.length),null,n),this.downloaded+=n.length,this.downloadSpeed(n.length),this.emit("download",n.length),this.emit("piece",e,t,n)}},{key:"_onCancel",value:function(e,t,n){this._debug("got cancel index=%d offset=%d length=%d",e,t,n),this._pull(this.peerRequests,e,t,n),this.emit("cancel",e,t,n)}},{key:"_onPort",value:function(e){this._debug("got port %d",e),this.emit("port",e)}},{key:"_onExtended",value:function(e,t){if(0===e){var n,r;try{n=l.decode(t)}catch(i){this._debug("ignoring invalid extended handshake: %s",i.message||i)}if(!n)return;if(this.peerExtendedHandshake=n,"object"==typeof n.m)for(r in n.m)this.peerExtendedMapping[r]=Number(n.m[r].toString());for(r in this._ext)this.peerExtendedMapping[r]&&this._ext[r].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)}},{key:"_onTimeout",value:function(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}},{key:"_write",value:function(e,n,r){for(this._bufferSize+=e.length,this._buffer.push(e);this._bufferSize>=this._parserSize;){var i=1===this._buffer.length?this._buffer[0]:t.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[i.slice(this._parserSize)]:[],this._parser(i.slice(0,this._parserSize))}r(null)}},{key:"_callback",value:function(e,t,n){e&&(this._clearTimeout(),this.peerChoking||this._finished||this._updateTimeout(),e.callback(t,n))}},{key:"_clearTimeout",value:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}},{key:"_updateTimeout",value:function(){var e=this;this._timeoutMs&&this.requests.length&&!this._timeout&&(this._timeout=setTimeout((function(){return e._onTimeout()}),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref())}},{key:"_parse",value:function(e,t){this._parserSize=e,this._parser=t}},{key:"_onMessageLength",value:function(e){var t=e.readUInt32BE(0);t>0?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}},{key:"_onMessage",value:function(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e)}}},{key:"_parseHandshake",value:function(){var e=this;this._parse(1,(function(t){var n=t.readUInt8(0);e._parse(n+48,(function(t){var r=t.slice(0,n);if("BitTorrent protocol"!==r.toString())return e._debug("Error: wire not speaking BitTorrent protocol (%s)",r.toString()),void e.end();t=t.slice(n),e._onHandshake(t.slice(8,28),t.slice(28,48),{dht:!!(1&t[7]),extended:!!(16&t[5])}),e._parse(4,e._onMessageLength)}))}))}},{key:"_onFinish",value:function(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,(function(){}));this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}},{key:"_debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0]="[".concat(this._debugId,"] ").concat(t[0]),d.apply(void 0,t)}},{key:"_pull",value:function(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i];if(o.piece===t&&o.offset===n&&o.length===r)return f(e,i),o}return null}}]),s}(g.Duplex);e.exports=R}).call(this,n("+ZX+").Buffer)},"A/ts":function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("KQpv")("webtorrent:file-stream"),f=function(e){"use strict";o(n,e);var t=u(n);function n(e,i){var o;r(this,n),(o=t.call(this,i)).destroyed=!1,o._torrent=e._torrent;var s=i&&i.start||0,a=i&&i.end&&i.end<e.length?i.end:e.length-1,u=e._torrent.pieceLength;return o._startPiece=(s+e.offset)/u|0,o._endPiece=(a+e.offset)/u|0,o._piece=o._startPiece,o._offset=s+e.offset-o._startPiece*u,o._missing=a-s+1,o._reading=!1,o._notifying=!1,o._criticalLength=Math.min(1048576/u|0,2),o}return i(n,[{key:"_read",value:function(){this._reading||(this._reading=!0,this._notify())}},{key:"_notify",value:function(){var e=this;if(this._reading&&0!==this._missing){if(!this._torrent.bitfield.get(this._piece))return this._torrent.critical(this._piece,this._piece+this._criticalLength);if(!this._notifying){if(this._notifying=!0,this._torrent.destroyed)return this._destroy(new Error("Torrent removed"));var t=this._piece;this._torrent.store.get(t,(function(n,r){if(e._notifying=!1,!e.destroyed){if(c("read %s (length %s) (err %s)",t,r.length,n&&n.message),n)return e._destroy(n);e._offset&&(r=r.slice(e._offset),e._offset=0),e._missing<r.length&&(r=r.slice(0,e._missing)),e._missing-=r.length,c("pushing buffer of length %s",r.length),e._reading=!1,e.push(r),0===e._missing&&e.push(null)}})),this._piece+=1}}}},{key:"destroy",value:function(e){this._destroy(null,e)}},{key:"_destroy",value:function(e,t){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())}}]),n}(n("G+mE").Readable);e.exports=f},AVWm:function(e){e.exports=JSON.parse('{".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/x-m4a",".m4b":"audio/mp4",".m4p":"audio/mp4",".m4v":"video/x-m4v",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"}')},Aa7t:function(e,t,n){"use strict";e.exports=f;var r=n("3+V0").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n("wYax");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function f(e){if(!(this instanceof f))return new f(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n("qW1w")(f,u),f.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},f.prototype._transform=function(e,t,n){n(new i("_transform()"))},f.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},f.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},f.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},AuHH:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},"B3+A":function(e,t){e.exports=function(e){var t=0;return function(){if(t===e.length)return null;var n=e.length-t,r=Math.random()*n|0,i=e[t+r],o=e[t];return e[t]=i,e[t+r]=o,t++,i}}},BV5H:function(e,t,n){"use strict";var r=n("atfL").Buffer,i=n(8);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=o,i=a,t.copy(n,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},Buw0:function(e,t,n){(function(e){var r=n("fncs"),i=n("dnwU"),o=n("WEDT");t.fullBoxes={};function s(e,t,n){for(var r=t;r<n;r++)e[r]=0}function a(e,t,n){t.writeUInt32BE(Math.floor((e.getTime()+20828448e5)/1e3),n)}function u(e,t,n){t.writeUIntBE(Math.floor((e.getTime()+20828448e5)/1e3),n,6)}function c(e,t,n){t.writeUInt16BE(Math.floor(e)%65536,n),t.writeUInt16BE(Math.floor(256*e*256)%65536,n+2)}function f(e,t,n){e||(e=[0,0,0,0,0,0,0,0,0]);for(var r=0;r<e.length;r++)c(e[r],t,n+4*r)}function l(e){for(var t=new Array(e.length/4),n=0;n<t.length;n++)t[n]=p(e,4*n);return t}function h(e,t){return new Date(1e3*e.readUIntBE(t,6)-20828448e5)}function d(e,t){return new Date(1e3*e.readUInt32BE(t)-20828448e5)}function p(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}function m(e,t){return e[t]+e[t+1]/256}function g(e,t,n){var r;for(r=0;r<n&&0!==e[t+r];r++);return e.toString("utf8",t,t+r)}["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","co64","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"].forEach((function(e){t.fullBoxes[e]=!0})),t.ftyp={},t.ftyp.encode=function(n,r,i){r=r?r.slice(i):e.alloc(t.ftyp.encodingLength(n));var o=n.compatibleBrands||[];r.write(n.brand,0,4,"ascii"),r.writeUInt32BE(n.brandVersion,4);for(var s=0;s<o.length;s++)r.write(o[s],8+4*s,4,"ascii");return t.ftyp.encode.bytes=8+4*o.length,r},t.ftyp.decode=function(e,t){for(var n=(e=e.slice(t)).toString("ascii",0,4),r=e.readUInt32BE(4),i=[],o=8;o<e.length;o+=4)i.push(e.toString("ascii",o,o+4));return{brand:n,brandVersion:r,compatibleBrands:i}},t.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},t.mvhd={},t.mvhd.encode=function(n,r,i){return r=r?r.slice(i):e.alloc(96),a(n.ctime||new Date,r,0),a(n.mtime||new Date,r,4),r.writeUInt32BE(n.timeScale||0,8),r.writeUInt32BE(n.duration||0,12),c(n.preferredRate||0,r,16),function(e,t,n){t[n]=Math.floor(e)%256,t[n+1]=Math.floor(256*e)%256}(n.preferredVolume||0,r,20),s(r,22,32),f(n.matrix,r,32),r.writeUInt32BE(n.previewTime||0,68),r.writeUInt32BE(n.previewDuration||0,72),r.writeUInt32BE(n.posterTime||0,76),r.writeUInt32BE(n.selectionTime||0,80),r.writeUInt32BE(n.selectionDuration||0,84),r.writeUInt32BE(n.currentTime||0,88),r.writeUInt32BE(n.nextTrackId||0,92),t.mvhd.encode.bytes=96,r},t.mvhd.decode=function(e,t){return{ctime:d(e=e.slice(t),0),mtime:d(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:p(e,16),preferredVolume:m(e,20),matrix:l(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},t.mvhd.encodingLength=function(e){return 96},t.tkhd={},t.tkhd.encode=function(n,r,i){return r=r?r.slice(i):e.alloc(80),a(n.ctime||new Date,r,0),a(n.mtime||new Date,r,4),r.writeUInt32BE(n.trackId||0,8),s(r,12,16),r.writeUInt32BE(n.duration||0,16),s(r,20,28),r.writeUInt16BE(n.layer||0,28),r.writeUInt16BE(n.alternateGroup||0,30),r.writeUInt16BE(n.volume||0,32),f(n.matrix,r,36),r.writeUInt32BE(n.trackWidth||0,72),r.writeUInt32BE(n.trackHeight||0,76),t.tkhd.encode.bytes=80,r},t.tkhd.decode=function(e,t){return{ctime:d(e=e.slice(t),0),mtime:d(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:l(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},t.tkhd.encodingLength=function(e){return 80},t.mdhd={},t.mdhd.encode=function(n,r,i){return 1===n.version?(r=r?r.slice(i):e.alloc(32),u(n.ctime||new Date,r,0),u(n.mtime||new Date,r,8),r.writeUInt32BE(n.timeScale||0,16),r.writeUIntBE(n.duration||0,20,6),r.writeUInt16BE(n.language||0,28),r.writeUInt16BE(n.quality||0,30),t.mdhd.encode.bytes=32,r):(r=r?r.slice(i):e.alloc(20),a(n.ctime||new Date,r,0),a(n.mtime||new Date,r,4),r.writeUInt32BE(n.timeScale||0,8),r.writeUInt32BE(n.duration||0,12),r.writeUInt16BE(n.language||0,16),r.writeUInt16BE(n.quality||0,18),t.mdhd.encode.bytes=20,r)},t.mdhd.decode=function(e,t,n){return e=e.slice(t),n-t!=20?{ctime:h(e,0),mtime:h(e,8),timeScale:e.readUInt32BE(16),duration:e.readUIntBE(20,6),language:e.readUInt16BE(28),quality:e.readUInt16BE(30)}:{ctime:d(e,0),mtime:d(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},t.mdhd.encodingLength=function(e){return 1===e.version?32:20},t.vmhd={},t.vmhd.encode=function(n,r,i){(r=r?r.slice(i):e.alloc(8)).writeUInt16BE(n.graphicsMode||0,0);var o=n.opcolor||[0,0,0];return r.writeUInt16BE(o[0],2),r.writeUInt16BE(o[1],4),r.writeUInt16BE(o[2],6),t.vmhd.encode.bytes=8,r},t.vmhd.decode=function(e,t){return{graphicsMode:(e=e.slice(t)).readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},t.vmhd.encodingLength=function(e){return 8},t.smhd={},t.smhd.encode=function(n,r,i){return(r=r?r.slice(i):e.alloc(4)).writeUInt16BE(n.balance||0,0),s(r,2,4),t.smhd.encode.bytes=4,r},t.smhd.decode=function(e,t){return{balance:(e=e.slice(t)).readUInt16BE(0)}},t.smhd.encodingLength=function(e){return 4},t.stsd={},t.stsd.encode=function(n,i,o){i=i?i.slice(o):e.alloc(t.stsd.encodingLength(n));var s=n.entries||[];i.writeUInt32BE(s.length,0);for(var a=4,u=0;u<s.length;u++){var c=s[u];r.encode(c,i,a),a+=r.encode.bytes}return t.stsd.encode.bytes=a,i},t.stsd.decode=function(e,t,n){for(var i=(e=e.slice(t)).readUInt32BE(0),o=new Array(i),s=4,a=0;a<i;a++){var u=r.decode(e,s,n);o[a]=u,s+=u.length}return{entries:o}},t.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++)t+=r.encodingLength(e.entries[n]);return t},t.avc1=t.VisualSampleEntry={},t.VisualSampleEntry.encode=function(n,i,o){s(i=i?i.slice(o):e.alloc(t.VisualSampleEntry.encodingLength(n)),0,6),i.writeUInt16BE(n.dataReferenceIndex||0,6),s(i,8,24),i.writeUInt16BE(n.width||0,24),i.writeUInt16BE(n.height||0,26),i.writeUInt32BE(n.hResolution||4718592,28),i.writeUInt32BE(n.vResolution||4718592,32),s(i,36,40),i.writeUInt16BE(n.frameCount||1,40);var a=n.compressorName||"",u=Math.min(a.length,31);i.writeUInt8(u,42),i.write(a,43,u,"utf8"),i.writeUInt16BE(n.depth||24,74),i.writeInt16BE(-1,76);var c=78;(n.children||[]).forEach((function(e){r.encode(e,i,c),c+=r.encode.bytes})),t.VisualSampleEntry.encode.bytes=c},t.VisualSampleEntry.decode=function(e,t,n){e=e.slice(t);for(var i=n-t,o=Math.min(e.readUInt8(42),31),s={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+o),depth:e.readUInt16BE(74),children:[]},a=78;i-a>=8;){var u=r.decode(e,a,i);s.children.push(u),s[u.type]=u,a+=u.length}return s},t.VisualSampleEntry.encodingLength=function(e){var t=78;return(e.children||[]).forEach((function(e){t+=r.encodingLength(e)})),t},t.avcC={},t.avcC.encode=function(n,r,i){r=r?r.slice(i):e.alloc(n.buffer.length),n.buffer.copy(r),t.avcC.encode.bytes=n.buffer.length},t.avcC.decode=function(t,n,r){return{mimeCodec:(t=t.slice(n,r)).toString("hex",1,4),buffer:e.from(t)}},t.avcC.encodingLength=function(e){return e.buffer.length},t.mp4a=t.AudioSampleEntry={},t.AudioSampleEntry.encode=function(n,i,o){s(i=i?i.slice(o):e.alloc(t.AudioSampleEntry.encodingLength(n)),0,6),i.writeUInt16BE(n.dataReferenceIndex||0,6),s(i,8,16),i.writeUInt16BE(n.channelCount||2,16),i.writeUInt16BE(n.sampleSize||16,18),s(i,20,24),i.writeUInt32BE(n.sampleRate||0,24);var a=28;(n.children||[]).forEach((function(e){r.encode(e,i,a),a+=r.encode.bytes})),t.AudioSampleEntry.encode.bytes=a},t.AudioSampleEntry.decode=function(e,t,n){for(var i=n-t,o={dataReferenceIndex:(e=e.slice(t,n)).readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},s=28;i-s>=8;){var a=r.decode(e,s,i);o.children.push(a),o[a.type]=a,s+=a.length}return o},t.AudioSampleEntry.encodingLength=function(e){var t=28;return(e.children||[]).forEach((function(e){t+=r.encodingLength(e)})),t},t.esds={},t.esds.encode=function(n,r,i){r=r?r.slice(i):e.alloc(n.buffer.length),n.buffer.copy(r,0),t.esds.encode.bytes=n.buffer.length},t.esds.decode=function(t,n,r){t=t.slice(n,r);var o=i.Descriptor.decode(t,0,t.length),s=("ESDescriptor"===o.tagName?o:{}).DecoderConfigDescriptor||{},a=s.oti||0,u=s.DecoderSpecificInfo,c=u?(248&u.buffer.readUInt8(0))>>3:0,f=null;return a&&(f=a.toString(16),c&&(f+="."+c)),{mimeCodec:f,buffer:e.from(t.slice(0))}},t.esds.encodingLength=function(e){return e.buffer.length},t.stsz={},t.stsz.encode=function(n,r,i){var o=n.entries||[];(r=r?r.slice(i):e.alloc(t.stsz.encodingLength(n))).writeUInt32BE(0,0),r.writeUInt32BE(o.length,4);for(var s=0;s<o.length;s++)r.writeUInt32BE(o[s],4*s+8);return t.stsz.encode.bytes=8+4*o.length,r},t.stsz.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=e.readUInt32BE(4),i=new Array(r),o=0;o<r;o++)i[o]=0===n?e.readUInt32BE(4*o+8):n;return{entries:i}},t.stsz.encodingLength=function(e){return 8+4*e.entries.length},t.stss=t.stco={},t.stco.encode=function(n,r,i){var o=n.entries||[];(r=r?r.slice(i):e.alloc(t.stco.encodingLength(n))).writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++)r.writeUInt32BE(o[s],4*s+4);return t.stco.encode.bytes=4+4*o.length,r},t.stco.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=0;i<n;i++)r[i]=e.readUInt32BE(4*i+4);return{entries:r}},t.stco.encodingLength=function(e){return 4+4*e.entries.length},t.co64={},t.co64.encode=function(n,r,i){var s=n.entries||[];(r=r?r.slice(i):e.alloc(t.co64.encodingLength(n))).writeUInt32BE(s.length,0);for(var a=0;a<s.length;a++)o.encode(s[a],r,8*a+4);return t.co64.encode.bytes=4+8*s.length,r},t.co64.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=0;i<n;i++)r[i]=o.decode(e,8*i+4);return{entries:r}},t.co64.encodingLength=function(e){return 4+8*e.entries.length},t.stts={},t.stts.encode=function(n,r,i){var o=n.entries||[];(r=r?r.slice(i):e.alloc(t.stts.encodingLength(n))).writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=8*s+4;r.writeUInt32BE(o[s].count||0,a),r.writeUInt32BE(o[s].duration||0,a+4)}return t.stts.encode.bytes=4+8*n.entries.length,r},t.stts.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=0;i<n;i++){var o=8*i+4;r[i]={count:e.readUInt32BE(o),duration:e.readUInt32BE(o+4)}}return{entries:r}},t.stts.encodingLength=function(e){return 4+8*e.entries.length},t.ctts={},t.ctts.encode=function(n,r,i){var o=n.entries||[];(r=r?r.slice(i):e.alloc(t.ctts.encodingLength(n))).writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=8*s+4;r.writeUInt32BE(o[s].count||0,a),r.writeUInt32BE(o[s].compositionOffset||0,a+4)}return t.ctts.encode.bytes=4+8*o.length,r},t.ctts.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=0;i<n;i++){var o=8*i+4;r[i]={count:e.readUInt32BE(o),compositionOffset:e.readInt32BE(o+4)}}return{entries:r}},t.ctts.encodingLength=function(e){return 4+8*e.entries.length},t.stsc={},t.stsc.encode=function(n,r,i){var o=n.entries||[];(r=r?r.slice(i):e.alloc(t.stsc.encodingLength(n))).writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=12*s+4;r.writeUInt32BE(o[s].firstChunk||0,a),r.writeUInt32BE(o[s].samplesPerChunk||0,a+4),r.writeUInt32BE(o[s].sampleDescriptionId||0,a+8)}return t.stsc.encode.bytes=4+12*o.length,r},t.stsc.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=0;i<n;i++){var o=12*i+4;r[i]={firstChunk:e.readUInt32BE(o),samplesPerChunk:e.readUInt32BE(o+4),sampleDescriptionId:e.readUInt32BE(o+8)}}return{entries:r}},t.stsc.encodingLength=function(e){return 4+12*e.entries.length},t.dref={},t.dref.encode=function(n,r,i){r=r?r.slice(i):e.alloc(t.dref.encodingLength(n));var o=n.entries||[];r.writeUInt32BE(o.length,0);for(var s=4,a=0;a<o.length;a++){var u=o[a],c=(u.buf?u.buf.length:0)+4+4;r.writeUInt32BE(c,s),s+=4,r.write(u.type,s,4,"ascii"),s+=4,u.buf&&(u.buf.copy(r,s),s+=u.buf.length)}return t.dref.encode.bytes=s,r},t.dref.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=4,o=0;o<n;o++){var s=e.readUInt32BE(i),a=e.toString("ascii",i+4,i+8),u=e.slice(i+8,i+s);i+=s,r[o]={type:a,buf:u}}return{entries:r}},t.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++){var r=e.entries[n].buf;t+=(r?r.length:0)+4+4}return t},t.elst={},t.elst.encode=function(n,r,i){var o=n.entries||[];(r=r?r.slice(i):e.alloc(t.elst.encodingLength(n))).writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=12*s+4;r.writeUInt32BE(o[s].trackDuration||0,a),r.writeUInt32BE(o[s].mediaTime||0,a+4),c(o[s].mediaRate||0,r,a+8)}return t.elst.encode.bytes=4+12*o.length,r},t.elst.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),i=0;i<n;i++){var o=12*i+4;r[i]={trackDuration:e.readUInt32BE(o),mediaTime:e.readInt32BE(o+4),mediaRate:p(e,o+8)}}return{entries:r}},t.elst.encodingLength=function(e){return 4+12*e.entries.length},t.hdlr={},t.hdlr.encode=function(n,r,i){r=r?r.slice(i):e.alloc(t.hdlr.encodingLength(n));var o=21+(n.name||"").length;return r.fill(0,0,o),r.write(n.handlerType||"",4,4,"ascii"),function(t,n,r){var i=e.from(t,"utf8");i.copy(n,r),n[r+i.length]=0}(n.name||"",r,20),t.hdlr.encode.bytes=o,r},t.hdlr.decode=function(e,t,n){return{handlerType:(e=e.slice(t)).toString("ascii",4,8),name:g(e,20,n)}},t.hdlr.encodingLength=function(e){return 21+(e.name||"").length},t.mehd={},t.mehd.encode=function(n,r,i){return(r=r?r.slice(i):e.alloc(4)).writeUInt32BE(n.fragmentDuration||0,0),t.mehd.encode.bytes=4,r},t.mehd.decode=function(e,t){return{fragmentDuration:(e=e.slice(t)).readUInt32BE(0)}},t.mehd.encodingLength=function(e){return 4},t.trex={},t.trex.encode=function(n,r,i){return(r=r?r.slice(i):e.alloc(20)).writeUInt32BE(n.trackId||0,0),r.writeUInt32BE(n.defaultSampleDescriptionIndex||0,4),r.writeUInt32BE(n.defaultSampleDuration||0,8),r.writeUInt32BE(n.defaultSampleSize||0,12),r.writeUInt32BE(n.defaultSampleFlags||0,16),t.trex.encode.bytes=20,r},t.trex.decode=function(e,t){return{trackId:(e=e.slice(t)).readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},t.trex.encodingLength=function(e){return 20},t.mfhd={},t.mfhd.encode=function(n,r,i){return(r=r?r.slice(i):e.alloc(4)).writeUInt32BE(n.sequenceNumber||0,0),t.mfhd.encode.bytes=4,r},t.mfhd.decode=function(e,t){return{sequenceNumber:e.readUInt32BE(0)}},t.mfhd.encodingLength=function(e){return 4},t.tfhd={},t.tfhd.encode=function(n,r,i){return(r=r?r.slice(i):e.alloc(4)).writeUInt32BE(n.trackId,0),t.tfhd.encode.bytes=4,r},t.tfhd.decode=function(e,t){},t.tfhd.encodingLength=function(e){return 4},t.tfdt={},t.tfdt.encode=function(n,r,i){return(r=r?r.slice(i):e.alloc(4)).writeUInt32BE(n.baseMediaDecodeTime||0,0),t.tfdt.encode.bytes=4,r},t.tfdt.decode=function(e,t){},t.tfdt.encodingLength=function(e){return 4},t.trun={},t.trun.encode=function(n,r,i){(r=r?r.slice(i):e.alloc(8+16*n.entries.length)).writeUInt32BE(n.entries.length,0),r.writeInt32BE(n.dataOffset,4);for(var o=8,s=0;s<n.entries.length;s++){var a=n.entries[s];r.writeUInt32BE(a.sampleDuration,o),o+=4,r.writeUInt32BE(a.sampleSize,o),o+=4,r.writeUInt32BE(a.sampleFlags,o),o+=4,0===(n.version||0)?r.writeUInt32BE(a.sampleCompositionTimeOffset,o):r.writeInt32BE(a.sampleCompositionTimeOffset,o),o+=4}t.trun.encode.bytes=o},t.trun.decode=function(e,t){},t.trun.encodingLength=function(e){return 8+16*e.entries.length},t.mdat={},t.mdat.encode=function(e,n,r){e.buffer?(e.buffer.copy(n,r),t.mdat.encode.bytes=e.buffer.length):t.mdat.encode.bytes=t.mdat.encodingLength(e)},t.mdat.decode=function(t,n,r){return{buffer:e.from(t.slice(n,r))}},t.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength}}).call(this,n("+ZX+").Buffer)},DT8W:function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("1BSu"),f=function(e){"use strict";o(n,e);var t=u(n);function n(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(this,n),o=t.call(this,s),!e||!e.put||!e.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(!(i=Number(i)))throw new Error("Second argument must be a chunk length");o._blockstream=new c(i,{zeroPadding:!1}),o._outstandingPuts=0;var a=0,u=function(t){o.destroyed||(o._outstandingPuts+=1,e.put(a,t,(function(){o._outstandingPuts-=1,0===o._outstandingPuts&&"function"==typeof o._finalCb&&(o._finalCb(null),o._finalCb=null)})),a+=1)};return o._blockstream.on("data",u).on("error",(function(e){o.destroy(e)})),o}return i(n,[{key:"_write",value:function(e,t,n){this._blockstream.write(e,t,n)}},{key:"_final",value:function(e){var t=this;this._blockstream.end(),this._blockstream.once("end",(function(){0===t._outstandingPuts?e(null):t._finalCb=e}))}},{key:"destroy",value:function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}}]),n}(n("G+mE").Writable);e.exports=f},EI9H:function(e,t,n){e.exports=a;var r=n("qW1w"),i=n("G+mE"),o=n("cMcO"),s="undefined"!=typeof window&&window.MediaSource;function a(e,t){var n=this;if(!(n instanceof a))return new a(e,t);if(!s)throw new Error("web browser lacks MediaSource support");t||(t={}),n._debug=t.debug,n._bufferDuration=t.bufferDuration||60,n._elem=e,n._mediaSource=new s,n._streams=[],n.detailedError=null,n._errorHandler=function(){n._elem.removeEventListener("error",n._errorHandler),n._streams.slice().forEach((function(e){e.destroy(n._elem.error)}))},n._elem.addEventListener("error",n._errorHandler),n._elem.src=window.URL.createObjectURL(n._mediaSource)}function u(e,t){var n=this;if(i.Writable.call(n),n._wrapper=e,n._elem=e._elem,n._mediaSource=e._mediaSource,n._allStreams=e._streams,n._allStreams.push(n),n._bufferDuration=e._bufferDuration,n._sourceBuffer=null,n._debugBuffers=[],n._openHandler=function(){n._onSourceOpen()},n._flowHandler=function(){n._flow()},n._errorHandler=function(e){n.destroyed||n.emit("error",e)},"string"==typeof t)n._type=t,"open"===n._mediaSource.readyState?n._createSourceBuffer():n._mediaSource.addEventListener("sourceopen",n._openHandler);else if(null===t._sourceBuffer)t.destroy(),n._type=t._type,n._mediaSource.addEventListener("sourceopen",n._openHandler);else{if(!t._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");t.destroy(),n._type=t._type,n._sourceBuffer=t._sourceBuffer,n._debugBuffers=t._debugBuffers,n._sourceBuffer.addEventListener("updateend",n._flowHandler),n._sourceBuffer.addEventListener("error",n._errorHandler)}n._elem.addEventListener("timeupdate",n._flowHandler),n.on("error",(function(e){n._wrapper.error(e)})),n.on("finish",(function(){if(!n.destroyed&&(n._finished=!0,n._allStreams.every((function(e){return e._finished})))){n._wrapper._dumpDebugData();try{n._mediaSource.endOfStream()}catch(e){}}}))}a.prototype.createWriteStream=function(e){return new u(this,e)},a.prototype.error=function(e){this.detailedError||(this.detailedError=e),this._dumpDebugData();try{this._mediaSource.endOfStream("decode")}catch(e){}try{window.URL.revokeObjectURL(this._elem.src)}catch(e){}},a.prototype._dumpDebugData=function(){this._debug&&(this._debug=!1,this._streams.forEach((function(e,t){var n,r,i;n=e._debugBuffers,r="mediasource-stream-"+t,(i=document.createElement("a")).href=window.URL.createObjectURL(new window.Blob(n)),i.download=r,i.click()})))},r(u,i.Writable),u.prototype._onSourceOpen=function(){this.destroyed||(this._mediaSource.removeEventListener("sourceopen",this._openHandler),this._createSourceBuffer())},u.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._allStreams.splice(this._allStreams.indexOf(this),1),this._mediaSource.removeEventListener("sourceopen",this._openHandler),this._elem.removeEventListener("timeupdate",this._flowHandler),this._sourceBuffer&&(this._sourceBuffer.removeEventListener("updateend",this._flowHandler),this._sourceBuffer.removeEventListener("error",this._errorHandler),"open"===this._mediaSource.readyState&&this._sourceBuffer.abort()),e&&this.emit("error",e),this.emit("close"))},u.prototype._createSourceBuffer=function(){if(!this.destroyed)if(s.isTypeSupported(this._type)){if(this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.addEventListener("updateend",this._flowHandler),this._sourceBuffer.addEventListener("error",this._errorHandler),this._cb){var e=this._cb;this._cb=null,e()}}else this.destroy(new Error("The provided type is not supported"))},u.prototype._write=function(e,t,n){var r=this;if(!r.destroyed)if(r._sourceBuffer){if(r._sourceBuffer.updating)return n(new Error("Cannot append buffer while source buffer updating"));var i=o(e);r._wrapper._debug&&r._debugBuffers.push(i);try{r._sourceBuffer.appendBuffer(i)}catch(s){return void r.destroy(s)}r._cb=n}else r._cb=function(i){if(i)return n(i);r._write(e,t,n)}},u.prototype._flow=function(){if(!this.destroyed&&this._sourceBuffer&&!this._sourceBuffer.updating&&!("open"===this._mediaSource.readyState&&this._getBufferDuration()>this._bufferDuration)&&this._cb){var e=this._cb;this._cb=null,e()}};u.prototype._getBufferDuration=function(){for(var e=this._sourceBuffer.buffered,t=this._elem.currentTime,n=-1,r=0;r<e.length;r++){var i=e.start(r),o=e.end(r)+0;if(i>t)break;(n>=0||t<=o)&&(n=o)}var s=n-t;return s<0&&(s=0),s}},EfWO:function(e,t,n){"use strict";var r=n("q3/s"),i=n("s+nu");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=_,t.resolve=function(e,t){return _(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=_(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(c),l=["%","/","?",";","#"].concat(f),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n("prCu");function _(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var _=e=c.join(a);if(_=_.trim(),!n&&1===e.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=s.exec(_);if(w){var k=(w=w[0]).toLowerCase();this.protocol=k,_=_.substr(w.length)}if(n||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||w&&g[w]||(_=_.substr(2),this.slashes=!0)}if(!g[w]&&(E||w&&!y[w])){for(var S,x,R=-1,C=0;C<h.length;C++){-1!==(T=_.indexOf(h[C]))&&(-1===R||T<R)&&(R=T)}-1!==(x=-1===R?_.lastIndexOf("@"):_.lastIndexOf("@",R))&&(S=_.slice(0,x),_=_.slice(x+1),this.auth=decodeURIComponent(S)),R=-1;for(C=0;C<l.length;C++){var T;-1!==(T=_.indexOf(l[C]))&&(-1===R||T<R)&&(R=T)}-1===R&&(R=_.length),this.host=_.slice(0,R),_=_.slice(R),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),L=(C=0,I.length);C<L;C++){var O=I[C];if(O&&!O.match(d)){for(var B="",M=0,U=O.length;M<U;M++)O.charCodeAt(M)>127?B+="x":B+=O[M];if(!B.match(d)){var P=I.slice(0,C),j=I.slice(C+1),D=O.match(p);D&&(P.push(D[1]),j.unshift(D[2])),j.length&&(_="/"+j.join(".")+_),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var N=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+N,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[k])for(C=0,L=f.length;C<L;C++){var F=f[C];if(-1!==_.indexOf(F)){var q=encodeURIComponent(F);q===F&&(q=escape(F)),_=_.split(F).join(q)}}var W=_.indexOf("#");-1!==W&&(this.hash=_.substr(W),_=_.slice(0,W));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),t&&(this.query=v.parse(this.query)),_=_.slice(0,z)):t&&(this.search="",this.query={}),_&&(this.pathname=_),y[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var V=this.search||"";this.path=N+V}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var f=u[c];"protocol"!==f&&(n[f]=e[f])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var d=l[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||_||n.host&&e.pathname,k=w,E=n.pathname&&n.pathname.split("/")||[],S=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=E.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=E.slice(-1)[0],R=(n.host||e.host||E.length>1)&&("."===x||".."===x)||""===x,C=0,T=E.length;T>=0;T--)"."===(x=E[T])?E.splice(T,1):".."===x?(E.splice(T,1),C++):C&&(E.splice(T,1),C--);if(!w&&!k)for(;C--;C)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),R&&"/"!==E.join("/").substr(-1)&&E.push("");var A,I=""===E[0]||E[0]&&"/"===E[0].charAt(0);S&&(n.hostname=n.host=I?"":E.length?E.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(w=w||n.host&&E.length)&&!I&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},"G+mE":function(e,t,n){(t=e.exports=n("qw6+")).Stream=t,t.Readable=t,t.Writable=n("w30G"),t.Duplex=n("wYax"),t.Transform=n("Aa7t"),t.PassThrough=n("vF8l"),t.finished=n("PTjJ"),t.pipeline=n("7CKa")},GKv7:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},Gfxy:function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("r2q8").EventEmitter,f=n("W92y"),l=n("SVpy"),h=n("KQpv")("ut_metadata"),d=n("wzj9");e.exports=function(e){var n=function(n){"use strict";o(a,n);var s=u(a);function a(n){var i;return r(this,a),(i=s.call(this))._wire=n,i._fetching=!1,i._metadataComplete=!1,i._metadataSize=null,i._remainingRejects=null,i._bitfield=new l(0,{grow:1e3}),t.isBuffer(e)&&i.setMetadata(e),i}return i(a,[{key:"onHandshake",value:function(e,t,n){this._infoHash=e}},{key:"onExtendedHandshake",value:function(e){return e.m&&e.m.ut_metadata?e.metadata_size?"number"!=typeof e.metadata_size||1e7<e.metadata_size||e.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=e.metadata_size,this._numPieces=Math.ceil(this._metadataSize/16384),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}},{key:"onMessage",value:function(e){var t,n;try{var r=e.toString(),i=r.indexOf("ee")+2;t=f.decode(r.substring(0,i)),n=e.slice(i)}catch(o){return}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,n,t.total_size);break;case 2:this._onReject(t.piece)}}},{key:"fetch",value:function(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}},{key:"cancel",value:function(){this._fetching=!1}},{key:"setMetadata",value:function(e){if(this._metadataComplete)return!0;h("set metadata");try{var t=f.decode(e).info;t&&(e=f.encode(t))}catch(n){}return(!this._infoHash||this._infoHash===d.sync(e))&&(this.cancel(),this.metadata=e,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",f.encode({info:f.decode(this.metadata)})),!0)}},{key:"_send",value:function(e,n){var r=f.encode(e);t.isBuffer(n)&&(r=t.concat([r,n])),this._wire.extended("ut_metadata",r)}},{key:"_request",value:function(e){this._send({msg_type:0,piece:e})}},{key:"_data",value:function(e,t,n){var r={msg_type:1,piece:e};"number"==typeof n&&(r.total_size=n),this._send(r,t)}},{key:"_reject",value:function(e){this._send({msg_type:2,piece:e})}},{key:"_onRequest",value:function(e){if(this._metadataComplete){var t=16384*e,n=t+16384;n>this._metadataSize&&(n=this._metadataSize);var r=this.metadata.slice(t,n);this._data(e,r,this._metadataSize)}else this._reject(e)}},{key:"_onData",value:function(e,t,n){t.length>16384||!this._fetching||(t.copy(this.metadata,16384*e),this._bitfield.set(e),this._checkDone())}},{key:"_onReject",value:function(e){this._remainingRejects>0&&this._fetching?(this._request(e),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}},{key:"_requestPieces",value:function(){if(this._fetching){this.metadata=t.alloc(this._metadataSize);for(var e=0;e<this._numPieces;e++)this._request(e)}}},{key:"_checkDone",value:function(){for(var e=!0,t=0;t<this._numPieces;t++)if(!this._bitfield.get(t)){e=!1;break}e&&(this.setMetadata(this.metadata)||this._failedMetadata())}},{key:"_failedMetadata",value:function(){this._bitfield=new l(0,{grow:1e3}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}]),a}(c);return n.prototype.name="ut_metadata",n}}).call(this,n("+ZX+").Buffer)},HsbT:function(e,t,n){(function(t){var r=n("MS7o"),i=n("a8Xd"),o=n(2),s=function(){},a=/^v?\.0/.test(t.version),u=function(e){return"function"==typeof e},c=function(e,t,n,c){c=r(c);var f=!1;e.on("close",(function(){f=!0})),i(e,{readable:t,writable:n},(function(e){if(e)return c(e);f=!0,c()}));var l=!1;return function(t){if(!f&&!l)return l=!0,function(e){return!!a&&(!!o&&((e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&u(e.close)))}(e)?e.close(s):function(e){return e.setHeader&&u(e.abort)}(e)?e.abort():u(e.destroy)?e.destroy():void c(t||new Error("stream was destroyed"))}},f=function(e){e()},l=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=u(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r=t.map((function(i,o){var s=o<t.length-1;return c(i,s,o>0,(function(t){e||(e=t),t&&r.forEach(f),s||(r.forEach(f),n(e))}))}));return t.reduce(l)}}).call(this,n("F63i"))},IADa:function(e,t,n){var r,i,o,s=n("VsfX");e.exports=function(e,t){r||(r=s.createWorker(),i=1,o={},r.onmessage=function(e){var t=e.data.id,n=o[t];delete o[t],null!=e.data.error?n(new Error("Rusha worker error: "+e.data.error)):n(null,e.data.hash)}),o[i]=t,r.postMessage({id:i,data:e}),i+=1}},IGWm:function(e,t,n){(function(t){e.exports=function(e,n,r){if("number"!=typeof n)throw new Error("second argument must be a Number");var i,o,s,a,u,c=!0;Array.isArray(e)?(i=[],s=o=e.length):(a=Object.keys(e),i={},s=o=a.length);function f(e){function n(){r&&r(e,i),r=null}c?t.nextTick(n):n()}function l(t,n,r){if(i[t]=r,n&&(u=!0),0==--s||n)f(n);else if(!u&&h<o){var c;a?(c=a[h],h+=1,e[c]((function(e,t){l(c,e,t)}))):(c=h,h+=1,e[c]((function(e,t){l(c,e,t)})))}}var h=n;s?a?a.some((function(t,r){if(e[t]((function(e,n){l(t,e,n)})),r===n-1)return!0})):e.some((function(e,t){if(e((function(e,n){l(t,e,n)})),t===n-1)return!0})):f(null);c=!1}}).call(this,n("F63i"))},KLyV:function(e,t,n){var r=n("+ZX+"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},KQpv:function(e,t,n){(function(r){t.log=function(){var e;return"object"==typeof console&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(n){}!e&&void 0!==r&&"env"in r&&(e={}.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n("SC2c")(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n("F63i"))},KRjI:function(e,t,n){(function(t,r){var i=n("RhWx"),o=n("VrFO"),s=n("Y9Ll"),a=n("5Yy7"),u=n("N+ot"),c=n("AuHH");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var l,h=n("k2ha"),d=n("SVpy"),p=n("DT8W"),m=n("KQpv")("webtorrent:torrent"),g=n("SMOc"),y=n("r2q8").EventEmitter,v=n("uQzU"),_=n("4a/l"),b=n("jRAG"),w=n("T+98"),k=n("3zr3"),E=n(15),S=n(16),x=n("LK6K"),R=n("IGWm"),C=n("UUos"),T=n("oNVP"),A=n("PSp0"),I=n("HsbT"),L=n("B3+A"),O=n("wzj9"),B=n("yjPI"),M=n("Gfxy"),U=n(17),P=n("jwST"),j=n("nI7q"),D=n("qvhp"),N=n("7tW9"),H=n(18),F=3*A.BLOCK_LENGTH,q=t.browser?1/0:2,W=[1e3,5e3,15e3],z=n("eRop").version,V="WebTorrent/".concat(z," (https://webtorrent.io)");try{l=T.join(v.statSync("/tmp")&&"/tmp","webtorrent")}catch(K){l=T.join("function"==typeof S.tmpdir?S.tmpdir():"/","webtorrent")}var Y=function(e){"use strict";a(u,e);var n=f(u);function u(e,t,r){var i;return o(this,u),(i=n.call(this))._debugId="unknown infohash",i.client=t,i.announce=r.announce,i.urlList=r.urlList,i.path=r.path,i.skipVerify=!!r.skipVerify,i._store=r.store||_,i._getAnnounceOpts=r.getAnnounceOpts,"boolean"==typeof r.private&&(i.private=r.private),i.strategy=r.strategy||"sequential",i.maxWebConns=r.maxWebConns||4,i._rechokeNumSlots=!1===r.uploads||0===r.uploads?0:+r.uploads||10,i._rechokeOptimisticWire=null,i._rechokeOptimisticTime=0,i._rechokeIntervalId=null,i.ready=!1,i.destroyed=!1,i.paused=!1,i.done=!1,i.metadata=null,i.store=null,i.files=[],i.pieces=[],i._amInterested=!1,i._selections=[],i._critical=[],i.wires=[],i._queue=[],i._peers={},i._peersLength=0,i.received=0,i.uploaded=0,i._downloadSpeed=B(),i._uploadSpeed=B(),i._servers=[],i._xsRequests=[],i._fileModtimes=r.fileModtimes,null!==e&&i._onTorrentId(e),i._debug("new torrent"),i}return s(u,[{key:"_onTorrentId",value:function(e){var n=this;if(!this.destroyed){var r;try{r=C(e)}catch(K){}r?(this.infoHash=r.infoHash,this._debugId=r.infoHash.toString("hex").substring(0,7),t.nextTick((function(){n.destroyed||n._onParsedTorrent(r)}))):C.remote(e,(function(e,t){if(!n.destroyed)return e?n._destroy(e):void n._onParsedTorrent(t)}))}}},{key:"_onParsedTorrent",value:function(e){var t=this;if(!this.destroyed){if(this._processParsedTorrent(e),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this.path||(this.path=T.join(l,this.infoHash)),this._rechokeIntervalId=setInterval((function(){t._rechoke()}),1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),this.destroyed||(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",(function(){t._onListening()}))))}}},{key:"_processParsedTorrent",value:function(e){this._debugId=e.infoHash.toString("hex").substring(0,7),void 0!==this.private&&(e.private=this.private),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&r.WEBTORRENT_ANNOUNCE&&!e.private&&(e.announce=e.announce.concat(r.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),e.announce=Array.from(new Set(e.announce)),e.urlList=Array.from(new Set(e.urlList)),Object.assign(this,e),this.magnetURI=C.toMagnetURI(e),this.torrentFile=C.toTorrentFile(e)}},{key:"_onListening",value:function(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}},{key:"_startDiscovery",value:function(){var e=this;if(!this.discovery&&!this.destroyed){var t=this.client.tracker;t&&(t=Object.assign({},this.client.tracker,{getAnnounceOpts:function(){var t={uploaded:e.uploaded,downloaded:e.downloaded,left:Math.max(e.length-e.downloaded,0)};return e.client.tracker.getAnnounceOpts&&Object.assign(t,e.client.tracker.getAnnounceOpts()),e._getAnnounceOpts&&Object.assign(t,e._getAnnounceOpts()),t}})),this.discovery=new g({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:t,port:this.client.torrentPort,userAgent:V}),this.discovery.on("error",(function(t){e._destroy(t)})),this.discovery.on("peer",(function(t){"string"==typeof t&&e.done||e.addPeer(t)})),this.discovery.on("trackerAnnounce",(function(){e.emit("trackerAnnounce"),0===e.numPeers&&e.emit("noPeers","tracker")})),this.discovery.on("dhtAnnounce",(function(){e.emit("dhtAnnounce"),0===e.numPeers&&e.emit("noPeers","dht")})),this.discovery.on("warning",(function(t){e.emit("warning",t)}))}}},{key:"_getMetadataFromServer",value:function(){var e=this,t=(Array.isArray(this.xs)?this.xs:[this.xs]).map((function(t){return function(n){!function(t,n){if(0!==t.indexOf("http://")&&0!==t.indexOf("https://"))return e.emit("warning",new Error("skipping non-http xs param: ".concat(t))),n(null);var r,i={url:t,method:"GET",headers:{"user-agent":V}};try{r=b.concat(i,(function(r,i,o){if(e.destroyed)return n(null);if(e.metadata)return n(null);if(r)return e.emit("warning",new Error("http error from xs param: ".concat(t))),n(null);if(200!==i.statusCode)return e.emit("warning",new Error("non-200 status code ".concat(i.statusCode," from xs param: ").concat(t))),n(null);var s;try{s=C(o)}catch(r){}if(!s)return e.emit("warning",new Error("got invalid torrent file from xs param: ".concat(t))),n(null);if(s.infoHash!==e.infoHash)return e.emit("warning",new Error("got torrent file with incorrect info hash from xs param: ".concat(t))),n(null);e._onMetadata(s),n(null)}))}catch(K){return e.emit("warning",new Error("skipping invalid url xs param: ".concat(t))),n(null)}e._xsRequests.push(r)}(t,n)}}));x(t)}},{key:"_onMetadata",value:function(e){var t=this;if(!this.metadata&&!this.destroyed){var n;if(this._debug("got metadata"),this._xsRequests.forEach((function(e){e.abort()})),this._xsRequests=[],e&&e.infoHash)n=e;else try{n=C(e)}catch(K){return this._destroy(K)}if(this._processParsedTorrent(n),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach((function(e){t.addWebSeed(e)})),this._rarityMap=new N(this),this.store=new w(new this._store(this.pieceLength,{torrent:{infoHash:this.infoHash},files:this.files.map((function(e){return{path:T.join(t.path,e.path),length:e.length,offset:e.offset}})),length:this.length,name:this.infoHash})),this.files=this.files.map((function(e){return new j(t,e)})),this.so){var r=P(this.so);this.files.forEach((function(e,n){r.includes(n)&&t.files[n].select(!0)}))}else 0!==this.pieces.length&&this.select(0,this.pieces.length-1,!1);if(this._hashes=this.pieces,this.pieces=this.pieces.map((function(e,n){var r=n===t.pieces.length-1?t.lastPieceLength:t.pieceLength;return new A(r)})),this._reservations=this.pieces.map((function(){return[]})),this.bitfield=new d(this.pieces.length),this.wires.forEach((function(e){e.ut_metadata&&e.ut_metadata.setMetadata(t.metadata),t._onWireWithMetadata(e)})),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{var i=function(e){if(e)return t._destroy(e);t._debug("done verifying"),t._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===_?this.getFileModtimes((function(e,n){if(e)return t._destroy(e);t.files.map((function(e,r){return n[r]===t._fileModtimes[r]})).every((function(e){return e}))?(t._markAllVerified(),t._onStore()):t._verifyPieces(i)})):this._verifyPieces(i)}}}},{key:"getFileModtimes",value:function(e){var t=this,n=[];R(this.files.map((function(e,r){return function(i){v.stat(T.join(t.path,e.path),(function(e,t){if(e&&"ENOENT"!==e.code)return i(e);n[r]=t&&t.mtime.getTime(),i(null)}))}})),q,(function(r){t._debug("done getting file modtimes"),e(r,n)}))}},{key:"_verifyPieces",value:function(e){var n=this;R(this.pieces.map((function(e,r){return function(e){if(n.destroyed)return e(new Error("torrent is destroyed"));n.store.get(r,(function(i,o){return n.destroyed?e(new Error("torrent is destroyed")):i?t.nextTick(e,null):void O(o,(function(t){if(n.destroyed)return e(new Error("torrent is destroyed"));if(t===n._hashes[r]){if(!n.pieces[r])return e(null);n._debug("piece verified %s",r),n._markVerified(r)}else n._debug("piece invalid %s",r);e(null)}))}))}})),q,e)}},{key:"rescanFiles",value:function(e){var t=this;if(this.destroyed)throw new Error("torrent is destroyed");e||(e=X),this._verifyPieces((function(n){if(n)return t._destroy(n),e(n);t._checkDone(),e(null)}))}},{key:"_markAllVerified",value:function(){for(var e=0;e<this.pieces.length;e++)this._markVerified(e)}},{key:"_markVerified",value:function(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)}},{key:"_onStore",value:function(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections())}},{key:"destroy",value:function(e){this._destroy(null,e)}},{key:"_destroy",value:function(e,t){var n=this;if(!this.destroyed){for(var r in this.destroyed=!0,this._debug("destroy"),this.client._remove(this),clearInterval(this._rechokeIntervalId),this._xsRequests.forEach((function(e){e.abort()})),this._rarityMap&&this._rarityMap.destroy(),this._peers)this.removePeer(r);this.files.forEach((function(e){e instanceof j&&e._destroy()}));var i=this._servers.map((function(e){return function(t){e.destroy(t)}}));this.discovery&&i.push((function(e){n.discovery.destroy(e)})),this.store&&i.push((function(e){n.store.close(e)})),x(i,t),e&&(0===this.listenerCount("error")?this.client.emit("error",e):this.emit("error",e)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}}},{key:"addPeer",value:function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(this.client.blocked){var t;if("string"==typeof e){var n;try{n=h(e)}catch(i){return this._debug("ignoring peer: invalid %s",e),this.emit("invalidPeer",e),!1}t=n[0]}else"string"==typeof e.remoteAddress&&(t=e.remoteAddress);if(t&&this.client.blocked.contains(t))return this._debug("ignoring peer: blocked %s",e),"string"!=typeof e&&e.destroy(),this.emit("blockedPeer",e),!1}var r=!!this._addPeer(e);return r?this.emit("peer",e):this.emit("invalidPeer",e),r}},{key:"_addPeer",value:function(e){if(this.destroyed)return"string"!=typeof e&&e.destroy(),null;if("string"==typeof e&&!this._validAddr(e))return this._debug("ignoring peer: invalid %s",e),null;var t,n=e&&e.id||e;return this._peers[n]?(this._debug("ignoring peer: duplicate (%s)",n),"string"!=typeof e&&e.destroy(),null):this.paused?(this._debug("ignoring peer: torrent is paused"),"string"!=typeof e&&e.destroy(),null):(this._debug("add peer %s",n),t="string"==typeof e?D.createTCPOutgoingPeer(e,this):D.createWebRTCPeer(e,this),this._peers[t.id]=t,this._peersLength+=1,"string"==typeof e&&(this._queue.push(t),this._drain()),t)}},{key:"addWebSeed",value:function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error("ignoring invalid web seed: ".concat(e))),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error("ignoring duplicate web seed: ".concat(e))),void this.emit("invalidPeer",e);this._debug("add web seed %s",e);var t=D.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)}},{key:"_addIncomingPeer",value:function(e){return this.destroyed?e.destroy(new Error("torrent is destroyed")):this.paused?e.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",e.id),this._peers[e.id]=e,void(this._peersLength+=1))}},{key:"removePeer",value:function(e){var t=e&&e.id||e;(e=this._peers[t])&&(this._debug("removePeer %s",t),delete this._peers[t],this._peersLength-=1,e.destroy(),this._drain())}},{key:"select",value:function(e,t,n,r){if(this.destroyed)throw new Error("torrent is destroyed");if(e<0||t<e||this.pieces.length<=t)throw new Error("invalid selection ".concat(e," : ").concat(t));n=Number(n)||0,this._debug("select %s-%s (priority %s)",e,t,n),this._selections.push({from:e,to:t,offset:0,priority:n,notify:r||X}),this._selections.sort((function(e,t){return t.priority-e.priority})),this._updateSelections()}},{key:"deselect",value:function(e,t,n){if(this.destroyed)throw new Error("torrent is destroyed");n=Number(n)||0,this._debug("deselect %s-%s (priority %s)",e,t,n);for(var r=0;r<this._selections.length;++r){var i=this._selections[r];if(i.from===e&&i.to===t&&i.priority===n){this._selections.splice(r,1);break}}this._updateSelections()}},{key:"critical",value:function(e,t){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",e,t);for(var n=e;n<=t;++n)this._critical[n]=!0;this._updateSelections()}},{key:"_onWire",value:function(e,n){var r=this;if(this._debug("got wire %s (%s)",e._debugId,n||"Unknown"),e.on("download",(function(e){r.destroyed||(r.received+=e,r._downloadSpeed(e),r.client._downloadSpeed(e),r.emit("download",e),r.client.emit("download",e))})),e.on("upload",(function(e){r.destroyed||(r.uploaded+=e,r._uploadSpeed(e),r.client._uploadSpeed(e),r.emit("upload",e),r.client.emit("upload",e))})),this.wires.push(e),n){var i=h(n);e.remoteAddress=i[0],e.remotePort=i[1]}this.client.dht&&this.client.dht.listening&&e.on("port",(function(t){if(!r.destroyed&&!r.client.dht.destroyed){if(!e.remoteAddress)return r._debug("ignoring PORT from peer with no address");if(0===t||t>65536)return r._debug("ignoring invalid PORT from peer");r._debug("port: %s (from %s)",t,n),r.client.dht.addNode({host:e.remoteAddress,port:t})}})),e.on("timeout",(function(){r._debug("wire timeout (%s)",n),e.destroy()})),e.setTimeout(3e4,!0),e.setKeepAlive(!0),e.use(M(this.metadata)),e.ut_metadata.on("warning",(function(e){r._debug("ut_metadata warning: %s",e.message)})),this.metadata||(e.ut_metadata.on("metadata",(function(e){r._debug("got metadata via ut_metadata"),r._onMetadata(e)})),e.ut_metadata.fetch()),"function"!=typeof U||this.private||(e.use(U()),e.ut_pex.on("peer",(function(e){r.done||(r._debug("ut_pex: got peer: %s (from %s)",e,n),r.addPeer(e))})),e.ut_pex.on("dropped",(function(e){var t=r._peers[e];t&&!t.connected&&(r._debug("ut_pex: dropped peer: %s (from %s)",e,n),r.removePeer(e))})),e.once("close",(function(){e.ut_pex.reset()}))),this.emit("wire",e,n),this.metadata&&t.nextTick((function(){r._onWireWithMetadata(e)}))}},{key:"_onWireWithMetadata",value:function(e){var t,n=this,r=null,i=function t(){n.destroyed||e.destroyed||(n._numQueued>2*(n._numConns-n.numPeers)&&e.amInterested?e.destroy():(r=setTimeout(t,5e3)).unref&&r.unref())},o=function(){if(e.peerPieces.buffer.length===n.bitfield.buffer.length){for(t=0;t<n.pieces.length;++t)if(!e.peerPieces.get(t))return;e.isSeeder=!0,e.choke()}};e.on("bitfield",(function(){o(),n._update()})),e.on("have",(function(){o(),n._update()})),e.once("interested",(function(){e.unchoke()})),e.once("close",(function(){clearTimeout(r)})),e.on("choke",(function(){clearTimeout(r),(r=setTimeout(i,5e3)).unref&&r.unref()})),e.on("unchoke",(function(){clearTimeout(r),n._update()})),e.on("request",(function(t,r,i,o){if(i>131072)return e.destroy();n.pieces[t]||n.store.get(t,{offset:r,length:i},o)})),e.bitfield(this.bitfield),e.uninterested(),e.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&e.port(this.client.dht.address().port),"webSeed"!==e.type&&(r=setTimeout(i,5e3)).unref&&r.unref(),e.isSeeder=!1,o()}},{key:"_updateSelections",value:function(){var e=this;this.ready&&!this.destroyed&&(t.nextTick((function(){e._gcSelections()})),this._updateInterest(),this._update())}},{key:"_gcSelections",value:function(){for(var e=0;e<this._selections.length;++e){for(var t=this._selections[e],n=t.offset;this.bitfield.get(t.from+t.offset)&&t.from+t.offset<t.to;)t.offset+=1;n!==t.offset&&t.notify(),t.to===t.from+t.offset&&(this.bitfield.get(t.from+t.offset)&&(this._selections.splice(e,1),e-=1,t.notify(),this._updateInterest()))}this._selections.length||this.emit("idle")}},{key:"_updateInterest",value:function(){var e=this,t=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach((function(t){for(var n=!1,r=0;r<e.pieces.length;++r)if(e.pieces[r]&&t.peerPieces.get(r)){n=!0;break}n?t.interested():t.uninterested()})),t!==this._amInterested&&(this._amInterested?this.emit("interested"):this.emit("uninterested"))}},{key:"_update",value:function(){if(!this.destroyed)for(var e,t=L(this.wires);e=t();)this._updateWireWrapper(e)}},{key:"_updateWireWrapper",value:function(e){var t=this;"undefined"!=typeof window&&"function"==typeof window.requestIdleCallback?window.requestIdleCallback((function(){t._updateWire(e)}),{timeout:250}):t._updateWire(e)}},{key:"_updateWire",value:function(e){var t=this;if(!e.peerChoking){if(!e.downloaded)return function(){if(e.requests.length)return;var n=t._selections.length;for(;n--;){var r=t._selections[n],o=void 0;if("rarest"===t.strategy)for(var s=r.from+r.offset,a=r.to,u=a-s+1,c={},f=0,l=i(s,a,c);f<u&&!((o=t._rarityMap.getRarestPiece(l))<0);){if(t._request(e,o,!1))return;c[o]=!0,f+=1}else for(o=r.to;o>=r.from+r.offset;--o)if(e.peerPieces.get(o)&&t._request(e,o,!1))return}}();var n=G(e,.5);if(!(e.requests.length>=n)){var r=G(e,1);s(!1)||s(!0)}}function i(t,n,r,i){return function(o){return o>=t&&o<=n&&!(o in r)&&e.peerPieces.get(o)&&(!i||i(o))}}function o(e){for(var n=e,r=e;r<t._selections.length&&t._selections[r].priority;r++)n=r;var i=t._selections[e];t._selections[e]=t._selections[n],t._selections[n]=i}function s(n){if(e.requests.length>=r)return!0;for(var s=function(){var n=e.downloadSpeed()||1;if(n>F)return function(){return!0};var r=Math.max(1,e.requests.length)*A.BLOCK_LENGTH/n,i=10,o=0;return function(e){if(!i||t.bitfield.get(e))return!0;for(var s=t.pieces[e].missing;o<t.wires.length;o++){var a=t.wires[o],u=a.downloadSpeed();if(!(u<F)&&(!(u<=n)&&a.peerPieces.get(e)&&!((s-=u*r)>0)))return i--,!1}return!0}}(),a=0;a<t._selections.length;a++){var u=t._selections[a],c=void 0;if("rarest"===t.strategy)for(var f=u.from+u.offset,l=u.to,h=l-f+1,d={},p=0,m=i(f,l,d,s);p<h&&!((c=t._rarityMap.getRarestPiece(m))<0);){for(;t._request(e,c,t._critical[c]||n););if(!(e.requests.length<r))return u.priority&&o(a),!0;d[c]=!0,p++}else for(c=u.from+u.offset;c<=u.to;c++)if(e.peerPieces.get(c)&&s(c)){for(;t._request(e,c,t._critical[c]||n););if(!(e.requests.length<r))return u.priority&&o(a),!0}}return!1}}},{key:"_rechoke",value:function(){var e=this;if(this.ready){this._rechokeOptimisticTime>0?this._rechokeOptimisticTime-=1:this._rechokeOptimisticWire=null;var t=[];this.wires.forEach((function(n){n.isSeeder||n===e._rechokeOptimisticWire||t.push({wire:n,downloadSpeed:n.downloadSpeed(),uploadSpeed:n.uploadSpeed(),salt:Math.random(),isChoked:!0})})),t.sort((function(e,t){if(e.downloadSpeed!==t.downloadSpeed)return t.downloadSpeed-e.downloadSpeed;if(e.uploadSpeed!==t.uploadSpeed)return t.uploadSpeed-e.uploadSpeed;if(e.wire.amChoking!==t.wire.amChoking)return e.wire.amChoking?1:-1;return e.salt-t.salt}));for(var n,r=0,i=0;i<t.length&&r<this._rechokeNumSlots;++i)t[i].isChoked=!1,t[i].wire.peerInterested&&(r+=1);if(!this._rechokeOptimisticWire&&i<t.length&&this._rechokeNumSlots){var o=t.slice(i).filter((function(e){return e.wire.peerInterested})),s=o[(n=o.length,Math.random()*n|0)];s&&(s.isChoked=!1,this._rechokeOptimisticWire=s.wire,this._rechokeOptimisticTime=2)}t.forEach((function(e){e.wire.amChoking!==e.isChoked&&(e.isChoked?e.wire.choke():e.wire.unchoke())}))}}},{key:"_hotswap",value:function(e,t){var n=e.downloadSpeed();if(n<A.BLOCK_LENGTH)return!1;if(!this._reservations[t])return!1;var r=this._reservations[t];if(!r)return!1;var i,o,s=1/0;for(o=0;o<r.length;o++){var a=r[o];if(a&&a!==e){var u=a.downloadSpeed();u>=F||2*u>n||u>s||(i=a,s=u)}}if(!i)return!1;for(o=0;o<r.length;o++)r[o]===i&&(r[o]=null);for(o=0;o<i.requests.length;o++){var c=i.requests[o];c.piece===t&&this.pieces[t].cancel(c.offset/A.BLOCK_LENGTH|0)}return this.emit("hotswap",i,e,t),!0}},{key:"_request",value:function(e,n,r){var i=this,o=e.requests.length,s="webSeed"===e.type;if(i.bitfield.get(n))return!1;if(o>=(s?Math.min(function(e,t,n){return 1+Math.ceil(t*e.downloadSpeed()/n)}(e,1,i.pieceLength),i.maxWebConns):G(e,1)))return!1;var a=i.pieces[n],u=s?a.reserveRemaining():a.reserve();if(-1===u&&r&&i._hotswap(e,n)&&(u=s?a.reserveRemaining():a.reserve()),-1===u)return!1;var c=i._reservations[n];c||(c=i._reservations[n]=[]);var f=c.indexOf(null);-1===f&&(f=c.length),c[f]=e;var l=a.chunkOffset(u),h=s?a.chunkLengthRemaining(u):a.chunkLength(u);function d(){t.nextTick((function(){i._update()}))}return e.request(n,l,h,(function t(r,o){if(!i.destroyed){if(!i.ready)return i.once("ready",(function(){t(r,o)}));if(c[f]===e&&(c[f]=null),a!==i.pieces[n])return d();if(r)return i._debug("error getting piece %s (offset: %s length: %s) from %s: %s",n,l,h,"".concat(e.remoteAddress,":").concat(e.remotePort),r.message),s?a.cancelRemaining(u):a.cancel(u),void d();if(i._debug("got piece %s (offset: %s length: %s) from %s",n,l,h,"".concat(e.remoteAddress,":").concat(e.remotePort)),!a.set(u,o,e))return d();var p=a.flush();O(p,(function(e){if(!i.destroyed){if(e===i._hashes[n]){if(!i.pieces[n])return;i._debug("piece verified %s",n),i.pieces[n]=null,i._reservations[n]=null,i.bitfield.set(n,!0),i.store.put(n,p),i.wires.forEach((function(e){e.have(n)})),i._checkDone()&&!i.destroyed&&i.discovery.complete()}else i.pieces[n]=new A(a.length),i.emit("warning",new Error("Piece ".concat(n," failed verification")));d()}}))}})),!0}},{key:"_checkDone",value:function(){var e=this;if(!this.destroyed){this.files.forEach((function(t){if(!t.done){for(var n=t._startPiece;n<=t._endPiece;++n)if(!e.bitfield.get(n))return;t.done=!0,t.emit("done"),e._debug("file done: ".concat(t.name))}}));for(var t=!0,n=0;n<this._selections.length;n++){for(var r=this._selections[n],i=r.from;i<=r.to;i++)if(!this.bitfield.get(i)){t=!1;break}if(!t)break}return!this.done&&t&&(this.done=!0,this._debug("torrent done: ".concat(this.infoHash)),this.emit("done")),this._gcSelections(),t}}},{key:"load",value:function(e,t){var n=this;if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",(function(){n.load(e,t)}));Array.isArray(e)||(e=[e]),t||(t=X);var r=new k(e),i=new p(this.store,this.pieceLength);I(r,i,(function(e){if(e)return t(e);n._markAllVerified(),n._checkDone(),t(null)}))}},{key:"createServer",value:function(e){if("function"!=typeof H)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");var t=new H(this,e);return this._servers.push(t),t}},{key:"pause",value:function(){this.destroyed||(this._debug("pause"),this.paused=!0)}},{key:"resume",value:function(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="[".concat(this.client?this.client._debugId:"No Client","] [").concat(this._debugId,"] ").concat(e[0]),m.apply(void 0,i(e))}},{key:"_drain",value:function(){var e=this;if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),!("function"!=typeof E.connect||this.destroyed||this.paused||this._numConns>=this.client.maxConns)){this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);var t=this._queue.shift();if(t){this._debug("tcp connect attempt to %s",t.addr);var n=h(t.addr),r={host:n[0],port:n[1]},i=t.conn=E.connect(r);i.once("connect",(function(){t.onConnect()})),i.once("error",(function(e){t.destroy(e)})),t.startConnectTimeout(),i.on("close",(function(){if(!e.destroyed)if(t.retries>=W.length)e._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,W.length);else{var n=W[t.retries];e._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,n,t.retries+1);var r=setTimeout((function(){var n=e._addPeer(t.addr);n&&(n.retries=t.retries+1)}),n);r.unref&&r.unref()}}))}}}},{key:"_validAddr",value:function(e){var t;try{t=h(e)}catch(i){return!1}var n=t[0],r=t[1];return r>0&&r<65535&&!("127.0.0.1"===n&&r===this.client.torrentPort)}},{key:"timeRemaining",get:function(){return this.done?0:0===this.downloadSpeed?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}},{key:"downloaded",get:function(){if(!this.bitfield)return 0;for(var e=0,t=0,n=this.pieces.length;t<n;++t)if(this.bitfield.get(t))e+=t===n-1?this.lastPieceLength:this.pieceLength;else{var r=this.pieces[t];e+=r.length-r.missing}return e}},{key:"downloadSpeed",get:function(){return this._downloadSpeed()}},{key:"uploadSpeed",get:function(){return this._uploadSpeed()}},{key:"progress",get:function(){return this.length?this.downloaded/this.length:0}},{key:"ratio",get:function(){return this.uploaded/(this.received||this.length)}},{key:"numPeers",get:function(){return this.wires.length}},{key:"torrentFileBlobURL",get:function(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}},{key:"_numQueued",get:function(){return this._queue.length+(this._peersLength-this._numConns)}},{key:"_numConns",get:function(){var e=0;for(var t in this._peers)this._peers[t].connected&&(e+=1);return e}},{key:"swarm",get:function(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}}]),u}(y);function G(e,t){return 2+Math.ceil(t*e.downloadSpeed()/A.BLOCK_LENGTH)}function X(){}e.exports=Y}).call(this,n("F63i"),n("fRV1"))},KbTw:function(e,t,n){(function(e,r,i){var o=n("tP4B"),s=n("qW1w"),a=n("Yuf/"),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,n,s,u){var c=this;if(a.Readable.call(c),c._mode=s,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){e.nextTick((function(){c.emit("close")}))})),"fetch"===s){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach((function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)})),o.writableStream){var f=new WritableStream({write:function(e){return new Promise((function(t,n){c._destroyed?n():c.push(new r(e))?t():c._resumeFetch=t}))},close:function(){i.clearTimeout(u),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void n.body.pipeTo(f).catch((function(e){i.clearTimeout(u),c._destroyed||c.emit("error",e)}))}catch(p){}}var l=n.body.getReader();!function e(){l.read().then((function(t){if(!c._destroyed){if(t.done)return i.clearTimeout(u),void c.push(null);c.push(new r(t.value)),e()}})).catch((function(e){i.clearTimeout(u),c._destroyed||c.emit("error",e)}))}()}else{if(c._xhr=t,c._pos=0,c.url=t.responseURL,c.statusCode=t.status,c.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(t[2])):void 0!==c.headers[n]?c.headers[n]+=", "+t[2]:c.headers[n]=t[2],c.rawHeaders.push(t[1],t[2])}})),c._charset="x-user-defined",!o.overrideMimeType){var h=c.rawHeaders["mime-type"];if(h){var d=h.match(/;\s*charset=([^;])(;|$)/);d&&(c._charset=d[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};s(c,a.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new i.VBArray(t.responseBody).toArray()}catch(f){}if(null!==n){e.push(new r(n));break}case"text":try{n=t.responseText}catch(f){e._mode="text:vbarray";break}if(n.length>e._pos){var o=n.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new r(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);e.push(s)}else e.push(o,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,n("F63i"),n("+ZX+").Buffer,n("fRV1"))},L2Ey:function(e,t,n){var r=n("o1V0"),i=n("EfWO"),o=e.exports;for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);function a(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=a(e),r.request.call(this,e,t)},o.get=function(e,t){return e=a(e),r.get.call(this,e,t)}},LK6K:function(e,t,n){(function(t){e.exports=function(e,n){var r,i,o,s=!0;Array.isArray(e)?(r=[],i=e.length):(o=Object.keys(e),r={},i=o.length);function a(e){function i(){n&&n(e,r),n=null}s?t.nextTick(i):i()}function u(e,t,n){r[e]=n,(0==--i||t)&&a(t)}i?o?o.forEach((function(t){e[t]((function(e,n){u(t,e,n)}))})):e.forEach((function(e,t){e((function(e,n){u(t,e,n)}))})):a(null);s=!1}}).call(this,n("F63i"))},"M+FG":function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}}},MS7o:function(e,t,n){var r=n("M+FG");function i(e){var t=function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function t(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},"N+ot":function(e,t,n){var r=n("T0aG"),i=n("1Pcy");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},NhVp:function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n("F63i"))},P2aG:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n("fRV1"))},PSp0:function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=function(){"use strict";function e(t){r(this,e),this.length=t,this.missing=t,this.sources=null,this._chunks=Math.ceil(t/16384),this._remainder=t%16384||16384,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}return i(e,[{key:"chunkLength",value:function(e){return e===this._chunks-1?this._remainder:16384}},{key:"chunkLengthRemaining",value:function(e){return this.length-16384*e}},{key:"chunkOffset",value:function(e){return 16384*e}},{key:"reserve",value:function(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}},{key:"reserveRemaining",value:function(){if(!this.init())return-1;if(this._reservations<this._chunks){var e=this._reservations;return this._reservations=this._chunks,e}return-1}},{key:"cancel",value:function(e){this.init()&&this._cancellations.push(e)}},{key:"cancelRemaining",value:function(e){this.init()&&(this._reservations=e)}},{key:"get",value:function(e){return this.init()?this._buffer[e]:null}},{key:"set",value:function(e,t,n){if(!this.init())return!1;for(var r=t.length,i=Math.ceil(r/16384),o=0;o<i;o++)if(!this._buffer[e+o]){var s=16384*o,a=t.slice(s,s+16384);this._buffered++,this._buffer[e+o]=a,this.missing-=a.length,this.sources.includes(n)||this.sources.push(n)}return this._buffered===this._chunks}},{key:"flush",value:function(){if(!this._buffer||this._chunks!==this._buffered)return null;var e=t.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,e}},{key:"init",value:function(){return!this._flushed&&(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)}}]),e}();Object.defineProperty(o,"BLOCK_LENGTH",{value:16384}),e.exports=o}).call(this,n("+ZX+").Buffer)},PTjJ:function(e,t,n){"use strict";var r=n("3+V0").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||f()},c=t._writableState&&t._writableState.finished,f=function(){a=!1,c=!0,s||o.call(t)},l=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,l=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!l?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",f)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",f),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",f),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",f),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",f),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",f),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},Ptj5:function(e,t,n){(function(t){var r=n("yiYz"),i=n("2CR0");e.exports=function(e,n,o){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');if(t.alloc)return t.alloc(e,n,o);var s=i(e);return 0===e?s:void 0===n?r(s,0):("string"!=typeof o&&(o=void 0),r(s,n,o))}}).call(this,n("+ZX+").Buffer)},PxXD:function(e,t,n){var r=n("AuHH");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},Rbtb:function(e,t,n){(function(t,r,i){var o=n("RhWx"),s=n("VrFO"),a=n("Y9Ll"),u=n("1Pcy"),c=n("5Yy7"),f=n("N+ot"),l=n("AuHH");function h(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var m=n("r2q8").EventEmitter,g=n("Uzjk"),y=n("T/3J"),v=n("KQpv")("webtorrent"),_=n(4),b=n(5),w=n("LK6K"),k=n("UUos"),E=n("oNVP"),S=n("xbjG"),x=n("i+/A"),R=n("yjPI"),C=n(9),T=n("KRjI"),A=n("eRop").version,I=A.replace(/\d*./g,(function(e){return"0".concat(e%100).slice(-2)})).slice(0,4),L="-WW".concat(I,"-"),O=function(e){"use strict";c(f,e);var n=p(f);function f(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,f),e=n.call(this),"string"==typeof o.peerId?e.peerId=o.peerId:t.isBuffer(o.peerId)?e.peerId=o.peerId.toString("hex"):e.peerId=t.from(L+x(9).toString("base64")).toString("hex"),e.peerIdBuffer=t.from(e.peerId,"hex"),"string"==typeof o.nodeId?e.nodeId=o.nodeId:t.isBuffer(o.nodeId)?e.nodeId=o.nodeId.toString("hex"):e.nodeId=x(20).toString("hex"),e.nodeIdBuffer=t.from(e.nodeId,"hex"),e._debugId=e.peerId.toString("hex").substring(0,7),e.destroyed=!1,e.listening=!1,e.torrentPort=o.torrentPort||0,e.dhtPort=o.dhtPort||0,e.tracker=void 0!==o.tracker?o.tracker:{},e.torrents=[],e.maxConns=Number(o.maxConns)||55,e._debug("new webtorrent (peerId %s, nodeId %s, port %s)",e.peerId,e.nodeId,e.torrentPort),e.tracker&&("object"!=typeof e.tracker&&(e.tracker={}),o.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),e.tracker.rtcConfig=o.rtcConfig),o.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),e.tracker.wrtc=o.wrtc),r.WRTC&&!e.tracker.wrtc&&(e.tracker.wrtc=r.WRTC)),"function"==typeof C?e._tcpPool=new C(u(e)):i.nextTick((function(){e._onListening()})),e._downloadSpeed=R(),e._uploadSpeed=R(),!1!==o.dht&&"function"==typeof _?(e.dht=new _(Object.assign({},{nodeId:e.nodeId},o.dht)),e.dht.once("error",(function(t){e._destroy(t)})),e.dht.once("listening",(function(){var t=e.dht.address();t&&(e.dhtPort=t.port)})),e.dht.setMaxListeners(0),e.dht.listen(e.dhtPort)):e.dht=!1,e.enableWebSeeds=!1!==o.webSeeds;var a=function(){e.destroyed||(e.ready=!0,e.emit("ready"))};return"function"==typeof b&&null!=o.blocklist?b(o.blocklist,{headers:{"user-agent":"WebTorrent/".concat(A," (https://webtorrent.io)")}},(function(t,n){if(t)return e.error("Failed to load blocklist: ".concat(t.message));e.blocked=n,a()})):i.nextTick(a),e}return a(f,[{key:"get",value:function(e){if(e instanceof T){if(this.torrents.includes(e))return e}else{var t;try{t=k(e)}catch(o){}if(!t)return null;if(!t.infoHash)throw new Error("Invalid torrent identifier");var n,r=h(this.torrents);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.infoHash===t.infoHash)return i}}catch(o){r.e(o)}finally{r.f()}}return null}},{key:"download",value:function(e,t,n){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,n)}},{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(this.destroyed)throw new Error("client is destroyed");if("function"==typeof n){var i=[{},n];n=i[0],r=i[1]}var o=function(){if(!t.destroyed){var e,n=h(t.torrents);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.infoHash===u.infoHash&&r!==u)return void u._destroy(new Error("Cannot add duplicate torrent ".concat(u.infoHash)))}}catch(i){n.e(i)}finally{n.f()}}},s=function(){t.destroyed||("function"==typeof r&&r(u),t.emit("torrent",u))};function a(){u.removeListener("_infoHash",o),u.removeListener("ready",s),u.removeListener("close",a)}this._debug("add"),n=n?Object.assign({},n):{};var u=new T(e,this,n);return this.torrents.push(u),u.once("_infoHash",o),u.once("ready",s),u.once("close",a),u}},{key:"seed",value:function(e,t,n){var r=this;if(this.destroyed)throw new Error("client is destroyed");if("function"==typeof t){var i=[{},t];t=i[0],n=i[1]}this._debug("seed"),(t=t?Object.assign({},t):{}).skipVerify=!0;var o="string"==typeof e;o&&(t.path=E.dirname(e)),t.createdBy||(t.createdBy="WebTorrent/".concat(I));var s,a,u=function(e){r._debug("on seed"),"function"==typeof n&&n(e),e.emit("seed"),r.emit("seed",e)},c=this.add(null,t,(function(e){var t=[function(t){if(o)return t();e.load(s,t)}];r.dht&&t.push((function(t){e.once("dhtAnnounce",t)})),w(t,(function(t){if(!r.destroyed)return t?e._destroy(t):void u(e)}))}));return a=e,"undefined"!=typeof FileList&&a instanceof FileList?e=Array.from(e):Array.isArray(e)||(e=[e]),w(e.map((function(e){return function(t){!function(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}(e)?t(null,e):g(e,t)}})),(function(e,n){if(!r.destroyed)return e?c._destroy(e):void y.parseInput(n,t,(function(e,i){if(!r.destroyed){if(e)return c._destroy(e);s=i.map((function(e){return e.getStream})),y(n,t,(function(e,t){if(!r.destroyed){if(e)return c._destroy(e);var n=r.get(t);n?c._destroy(new Error("Cannot add duplicate torrent ".concat(n.infoHash))):c._onTorrentId(t)}}))}}))})),c}},{key:"remove",value:function(e,t){if(this._debug("remove"),!this.get(e))throw new Error("No torrent with id ".concat(e));this._remove(e,t)}},{key:"_remove",value:function(e,t){var n=this.get(e);n&&(this.torrents.splice(this.torrents.indexOf(n),1),n.destroy(t))}},{key:"address",value:function(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}},{key:"destroy",value:function(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)}},{key:"_destroy",value:function(e,t){var n=this;this._debug("client destroy"),this.destroyed=!0;var r=this.torrents.map((function(e){return function(t){e.destroy(t)}}));this._tcpPool&&r.push((function(e){n._tcpPool.destroy(e)})),this.dht&&r.push((function(e){n.dht.destroy(e)})),w(r,t),e&&this.emit("error",e),this.torrents=[],this._tcpPool=null,this.dht=null}},{key:"_onListening",value:function(){if(this._debug("listening"),this.listening=!0,this._tcpPool){var e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="[".concat(this._debugId,"] ").concat(e[0]),v.apply(void 0,o(e))}},{key:"downloadSpeed",get:function(){return this._downloadSpeed()}},{key:"uploadSpeed",get:function(){return this._uploadSpeed()}},{key:"progress",get:function(){var e=this.torrents.filter((function(e){return 1!==e.progress}));return e.reduce((function(e,t){return e+t.downloaded}),0)/(e.reduce((function(e,t){return e+(t.length||0)}),0)||1)}},{key:"ratio",get:function(){return this.torrents.reduce((function(e,t){return e+t.uploaded}),0)/(this.torrents.reduce((function(e,t){return e+t.received}),0)||1)}}]),f}(m);O.WEBRTC_SUPPORT=S.WEBRTC_SUPPORT,O.VERSION=A,e.exports=O}).call(this,n("+ZX+").Buffer,n("fRV1"),n("F63i"))},SC2c:function(e,t,n){var r=n("RhWx");e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return i.colors[Math.abs(t)%i.colors.length]}function i(e){var n;function r(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(r.enabled){var s=r,a=Number(new Date),u=a-(n||a);s.diff=u,s.prev=n,s.curr=a,n=a,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;c++;var r=i.formatters[n];if("function"==typeof r){var o=t[c];e=r.call(s,o),t.splice(c,1),c--}return e})),i.formatArgs.call(s,t);var f=s.log||i.log;f.apply(s,t)}}return r.namespace=e,r.enabled=i.enabled(e),r.useColors=i.useColors(),r.color=t(e),r.destroy=o,r.extend=s,"function"==typeof i.init&&i.init(r),i.instances.push(r),r}function o(){var e=i.instances.indexOf(this);return-1!==e&&(i.instances.splice(e,1),!0)}function s(e,t){var n=i(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},i.disable=function(){var e=[].concat(r(i.names.map(a)),r(i.skips.map(a).map((function(e){return"-"+e})))).join(",");return i.enable(""),e},i.enable=function(e){var t;i.save(e),i.names=[],i.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")));for(t=0;t<i.instances.length;t++){var o=i.instances[t];o.enabled=i.enabled(o.namespace)}},i.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=n("n1Tc"),Object.keys(e).forEach((function(t){i[t]=e[t]})),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=t,i.enable(i.load()),i}},SMOc:function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("KQpv")("torrent-discovery"),f=n(10),l=n("r2q8").EventEmitter,h=n("LK6K"),d=n("zxH9"),p=function(e){"use strict";o(s,e);var n=u(s);function s(e){var i;if(r(this,s),i=n.call(this),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!t.browser&&!e.port)throw new Error("Option `port` is required");i.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),i.infoHash="string"==typeof e.infoHash?e.infoHash.toLowerCase():e.infoHash.toString("hex"),i._port=e.port,i._userAgent=e.userAgent,i.destroyed=!1,i._announce=e.announce||[],i._intervalMs=e.intervalMs||9e5,i._trackerOpts=null,i._dhtAnnouncing=!1,i._dhtTimeout=!1,i._internalDHT=!1,i._onWarning=function(e){i.emit("warning",e)},i._onError=function(e){i.emit("error",e)},i._onDHTPeer=function(e,t){t.toString("hex")===i.infoHash&&i.emit("peer","".concat(e.host,":").concat(e.port),"dht")},i._onTrackerPeer=function(e){i.emit("peer",e,"tracker")},i._onTrackerAnnounce=function(){i.emit("trackerAnnounce")};var o=function(e,t){var n=new f(t);return n.on("warning",i._onWarning),n.on("error",i._onError),n.listen(e),i._internalDHT=!0,n};return!1===e.tracker?i.tracker=null:e.tracker&&"object"==typeof e.tracker?(i._trackerOpts=Object.assign({},e.tracker),i.tracker=i._createTracker()):i.tracker=i._createTracker(),!1===e.dht||"function"!=typeof f?i.dht=null:e.dht&&"function"==typeof e.dht.addNode?i.dht=e.dht:e.dht&&"object"==typeof e.dht?i.dht=o(e.dhtPort,e.dht):i.dht=o(e.dhtPort),i.dht&&(i.dht.on("peer",i._onDHTPeer),i._dhtAnnounce()),i}return i(s,[{key:"updatePort",value:function(e){var t=this;e!==this._port&&(this._port=e,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy((function(){t.tracker=t._createTracker()}))))}},{key:"complete",value:function(e){this.tracker&&this.tracker.complete(e)}},{key:"destroy",value:function(e){var t=this;if(!this.destroyed){this.destroyed=!0,clearTimeout(this._dhtTimeout);var n=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),n.push((function(e){t.tracker.destroy(e)}))),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),n.push((function(e){t.dht.destroy(e)}))),h(n,e),this.dht=null,this.tracker=null,this._announce=null}}},{key:"_createTracker",value:function(){var e=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),t=new d(e);return t.on("warning",this._onWarning),t.on("error",this._onError),t.on("peer",this._onTrackerPeer),t.on("update",this._onTrackerAnnounce),t.setInterval(this._intervalMs),t.start(),t}},{key:"_dhtAnnounce",value:function(){var e=this;this._dhtAnnouncing||(c("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,(function(t){e._dhtAnnouncing=!1,c("dht announce complete"),t&&e.emit("warning",t),e.emit("dhtAnnounce"),e.destroyed||(e._dhtTimeout=setTimeout((function(){e._dhtAnnounce()}),e._intervalMs+Math.floor(Math.random()*e._intervalMs/5)),e._dhtTimeout.unref&&e._dhtTimeout.unref())})))}}]),s}(l);e.exports=p}).call(this,n("F63i"))},SMyr:function(e,t,n){e.exports=n("r2q8").EventEmitter},SVpy:function(e,t,n){var r=n("VrFO"),i=n("Y9Ll");function o(e){var t=e>>3;return e%8!=0&&t++,t}var s=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;r(this,e);var i=null!=n&&n.grow;this.grow=i&&isFinite(i)&&o(i)||i||0,this.buffer="number"==typeof t?new Uint8Array(o(t)):t}return i(e,[{key:"get",value:function(e){var t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8)}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e>>3;if(t){if(this.buffer.length<n+1){var r=Math.max(n+1,Math.min(2*this.buffer.length,this.grow));if(r<=this.grow){var i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}this.buffer[n]|=128>>e%8}else n<this.buffer.length&&(this.buffer[n]&=~(128>>e%8))}}]),e}();e.exports=s},"T+98":function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("yQO9"),s=function(){"use strict";function e(t){if(r(this,e),this.store=t,this.chunkLength=t.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}return i(e,[{key:"put",value:function(e,t,n){var r=this;this.mem[e]=t,this.store.put(e,t,(function(t){r.mem[e]=null,n&&n(t)}))}},{key:"get",value:function(e,t,n){if("function"==typeof t)return this.get(e,null,t);var r=this.mem[e];if(!r)return this.store.get(e,t,n);if(t){var i=t.offset||0,s=t.length?i+t.length:r.length;r=r.slice(i,s)}o((function(){n&&n(null,r)}))}},{key:"close",value:function(e){this.store.close(e)}},{key:"destroy",value:function(e){this.store.destroy(e)}}]),e}();e.exports=s},"T/3J":function(e,t,n){(function(t,r,i){var o=n("W92y"),s=n("1BSu"),a=n("7+jy"),u=n("oNVP"),c=n("ZfsX"),f=n("YR6z"),l=n("XvRE"),h=n("3zr3"),d=n("MS7o"),p=n("LK6K"),m=n("wzj9"),g=n("G+mE"),y=n(3);function v(e,n,i){var o;if(o=e,"undefined"!=typeof FileList&&o instanceof FileList&&(e=Array.from(e)),Array.isArray(e)||(e=[e]),0===e.length)throw new Error("invalid input type");e.forEach((function(e){if(null==e)throw new Error("invalid input type: ".concat(e))})),1!==(e=e.map((function(e){return b(e)&&"string"==typeof e.path&&"function"==typeof y?e.path:e}))).length||"string"==typeof e[0]||e[0].name||(e[0].name=n.name);var s=null;e.forEach((function(t,n){if("string"!=typeof t){var r=t.fullPath||t.name;r||(r="Unknown File ".concat(n+1),t.unknownName=!0),t.path=r.split("/"),t.path[0]||t.path.shift(),t.path.length<2?s=null:0===n&&e.length>1?s=t.path[0]:t.path[0]!==s&&(s=null)}})),e=e.filter((function(e){if("string"==typeof e)return!0;var t=e.path[e.path.length-1];return"."!==t[0]&&l.not(t)})),s&&e.forEach((function(e){var n=(t.isBuffer(e)||w(e))&&!e.path;"string"==typeof e||n||e.path.shift()})),!n.name&&s&&(n.name=s),n.name||e.some((function(e){return"string"==typeof e?(n.name=u.basename(e),!0):e.unknownName?void 0:(n.name=e.path[e.path.length-1],!0)})),n.name||(n.name="Unnamed Torrent ".concat(Date.now()));var a=e.reduce((function(e,t){return e+Number("string"==typeof t)}),0),h=1===e.length;if(1===e.length&&"string"==typeof e[0]){if("function"!=typeof y)throw new Error("filesystem paths do not work in the browser");f(e[0],(function(e,t){if(e)return i(e);h=t,d()}))}else r.nextTick((function(){d()}));function d(){p(e.map((function(e){return function(n){var r,i={};if(b(e))i.getStream=function(e){return function(){return new c(e)}}(e),i.length=e.size;else if(t.isBuffer(e))i.getStream=(r=e,function(){var e=new g.PassThrough;return e.end(r),e}),i.length=e.length;else{if(!w(e)){if("string"==typeof e){if("function"!=typeof y)throw new Error("filesystem paths do not work in the browser");return void y(e,a>1||h,n)}throw new Error("invalid input type")}i.getStream=function(e,t){return function(){var n=new g.Transform;return n._transform=function(e,n,r){t.length+=e.length,this.push(e),r()},e.pipe(n),n}}(e,i),i.length=0}i.path=e.path,n(null,i)}})),(function(e,t){if(e)return i(e);t=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?t.concat(e(n)):t.concat(n)}),[])}(t),i(null,t,h)}))}}function _(e,t){return e+t.length}function b(e){return"undefined"!=typeof Blob&&e instanceof Blob}function w(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}e.exports=function(n,r,u){if("function"==typeof r){var c=[u,r];r=c[0],u=c[1]}v(n,r=r?Object.assign({},r):{},(function(n,c,f){if(n)return u(n);r.singleFileTorrent=f,function(n,r,u){var c=r.announceList;c||("string"==typeof r.announce?c=[[r.announce]]:Array.isArray(r.announce)&&(c=r.announce.map((function(e){return[e]}))));c||(c=[]);i.WEBTORRENT_ANNOUNCE&&("string"==typeof i.WEBTORRENT_ANNOUNCE?c.push([[i.WEBTORRENT_ANNOUNCE]]):Array.isArray(i.WEBTORRENT_ANNOUNCE)&&(c=c.concat(i.WEBTORRENT_ANNOUNCE.map((function(e){return[e]})))));void 0===r.announce&&void 0===r.announceList&&(c=c.concat(e.exports.announceList));"string"==typeof r.urlList&&(r.urlList=[r.urlList]);var f={info:{name:r.name},"creation date":Math.ceil((Number(r.creationDate)||Date.now())/1e3),encoding:"UTF-8"};0!==c.length&&(f.announce=c[0][0],f["announce-list"]=c);void 0!==r.comment&&(f.comment=r.comment);void 0!==r.createdBy&&(f["created by"]=r.createdBy);void 0!==r.private&&(f.info.private=Number(r.private));void 0!==r.info&&Object.assign(f.info,r.info);void 0!==r.sslCert&&(f.info["ssl-cert"]=r.sslCert);void 0!==r.urlList&&(f["url-list"]=r.urlList);var l=r.pieceLength||a(n.reduce(_,0));f.info["piece length"]=l,function(e,n,r){r=d(r);var i=[],o=0,a=e.map((function(e){return e.getStream})),u=0,c=0,f=!1,l=new h(a),p=new s(n,{zeroPadding:!1});function g(e){o+=e.length;var t=c;m(e,(function(e){i[t]=e,u-=1,b()})),u+=1,c+=1}function y(){f=!0,b()}function v(e){_(),r(e)}function _(){l.removeListener("error",v),p.removeListener("data",g),p.removeListener("end",y),p.removeListener("error",v)}function b(){f&&0===u&&(_(),r(null,t.from(i.join(""),"hex"),o))}l.on("error",v),l.pipe(p).on("data",g).on("end",y).on("error",v)}(n,l,(function(e,t,i){if(e)return u(e);f.info.pieces=t,n.forEach((function(e){delete e.getStream})),r.singleFileTorrent?f.info.length=i:f.info.files=n,u(null,o.encode(f))}))}(c,r,u)}))},e.exports.parseInput=function(e,t,n){if("function"==typeof t){var r=[n,t];t=r[0],n=r[1]}v(e,t=t?Object.assign({},t):{},n)},e.exports.announceList=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"]]}).call(this,n("+ZX+").Buffer,n("F63i"),n("fRV1"))},UUos:function(e,t,n){(function(t,r){var i=n("W92y"),o=n("dlxM"),s=n("uQzU"),a=n("jRAG"),u=n("+5ui"),c=n("oNVP"),f=n("wzj9");function l(e){if("string"==typeof e&&/^(stream-)?magnet:/.test(e)){var n=u(e);if(!n.infoHash)throw new Error("Invalid torrent identifier");return n}if("string"==typeof e&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return u("magnet:?xt=urn:btih:".concat(e));if(t.isBuffer(e)&&20===e.length)return u("magnet:?xt=urn:btih:".concat(e.toString("hex")));if(t.isBuffer(e))return function(e){t.isBuffer(e)&&(e=i.decode(e));d(e.info,"info"),d(e.info["name.utf-8"]||e.info.name,"info.name"),d(e.info["piece length"],"info['piece length']"),d(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach((function(e){d("number"==typeof e.length,"info.files[0].length"),d(e["path.utf-8"]||e.path,"info.files[0].path")})):d("number"==typeof e.info.length,"info.length");var n={info:e.info,infoBuffer:i.encode(e.info),name:(e.info["name.utf-8"]||e.info.name).toString(),announce:[]};n.infoHash=f.sync(n.infoBuffer),n.infoHashBuffer=t.from(n.infoHash,"hex"),void 0!==e.info.private&&(n.private=!!e.info.private);e["creation date"]&&(n.created=new Date(1e3*e["creation date"]));e["created by"]&&(n.createdBy=e["created by"].toString());t.isBuffer(e.comment)&&(n.comment=e.comment.toString());Array.isArray(e["announce-list"])&&e["announce-list"].length>0?e["announce-list"].forEach((function(e){e.forEach((function(e){n.announce.push(e.toString())}))})):e.announce&&n.announce.push(e.announce.toString());t.isBuffer(e["url-list"])&&(e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[]);n.urlList=(e["url-list"]||[]).map((function(e){return e.toString()})),n.announce=Array.from(new Set(n.announce)),n.urlList=Array.from(new Set(n.urlList));var r=e.info.files||[e.info];n.files=r.map((function(e,t){var i=[].concat(n.name,e["path.utf-8"]||e.path||[]).map((function(e){return e.toString()}));return{path:c.join.apply(null,[c.sep].concat(i)).slice(1),name:i[i.length-1],length:e.length,offset:r.slice(0,t).reduce(h,0)}})),n.length=r.reduce(h,0);var o=n.files[n.files.length-1];return n.pieceLength=e.info["piece length"],n.lastPieceLength=(o.offset+o.length)%n.pieceLength||n.pieceLength,n.pieces=function(e){for(var t=[],n=0;n<e.length;n+=20)t.push(e.slice(n,n+20).toString("hex"));return t}(e.info.pieces),n}(e);if(e&&e.infoHash)return e.infoHash=e.infoHash.toLowerCase(),e.announce||(e.announce=[]),"string"==typeof e.announce&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}function h(e,t){return e+t.length}function d(e,t){if(!e)throw new Error("Torrent is missing required field: ".concat(t))}e.exports=l,e.exports.remote=function(e,t){var n;if("function"!=typeof t)throw new Error("second argument must be a Function");try{n=l(e)}catch(c){}n&&n.infoHash?r.nextTick((function(){t(null,n)})):(i=e,"undefined"!=typeof Blob&&i instanceof Blob?o(e,(function(e,n){if(e)return t(new Error("Error converting Blob: ".concat(e.message)));u(n)})):"function"==typeof a&&/^https?:/.test(e)?a.concat({url:e,timeout:3e4,headers:{"user-agent":"WebTorrent (https://webtorrent.io)"}},(function(e,n,r){if(e)return t(new Error("Error downloading torrent: ".concat(e.message)));u(r)})):"function"==typeof s.readFile&&"string"==typeof e?s.readFile(e,(function(e,n){if(e)return t(new Error("Invalid torrent identifier"));u(n)})):r.nextTick((function(){t(new Error("Invalid torrent identifier"))})));var i;function u(e){try{n=l(e)}catch(c){return t(c)}n&&n.infoHash?t(null,n):t(new Error("Invalid torrent identifier"))}},e.exports.toMagnetURI=u.encode,e.exports.toTorrentFile=function(e){var n={info:e.info};n["announce-list"]=(e.announce||[]).map((function(e){return n.announce||(n.announce=e),[e=t.from(e,"utf8")]})),n["url-list"]=e.urlList||[],void 0!==e.private&&(n.private=Number(e.private));e.created&&(n["creation date"]=e.created.getTime()/1e3|0);e.createdBy&&(n["created by"]=e.createdBy);e.comment&&(n.comment=e.comment);return i.encode(n)},t.alloc(0)}).call(this,n("+ZX+").Buffer,n("F63i"))},UYdw:function(e,t){e.exports=function(e,t){if(null!=t&&"string"!=typeof t)throw new Error("Invalid mimetype, expected string.");return new Promise((function(n,r){var i=[];e.on("data",(function(e){return i.push(e)})).once("end",(function(){var e=null!=t?new Blob(i,{type:t}):new Blob(i);n(e)})).once("error",r)}))}},Ua7V:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},UlFi:function(e,t,n){(function(t){var r=n("MS7o");e.exports=function(e,n,i){i=r(i);var o=t.alloc(n),s=0;e.on("data",(function(e){e.copy(o,s),s+=e.length})).on("end",(function(){i(null,o)})).on("error",i)}}).call(this,n("+ZX+").Buffer)},Uzjk:function(e,t,n){(function(t){e.exports=function(e,n){var r=[];e.on("data",(function(e){r.push(e)})),e.once("end",(function(){n&&n(null,t.concat(r)),n=null})),e.once("error",(function(e){n&&n(e),n=null}))}}).call(this,n("+ZX+").Buffer)},VrFO:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},VsfX:function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){var r=n(5),i=n(1),o=i.toHex,s=i.ceilHeapSize,a=n(6),u=function(e){for(e+=9;e%64>0;e+=1);return e},c=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},f=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=t||65536)%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=t,this._padMaxChunkLen=u(t),this._heap=new ArrayBuffer(s(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new r({Int32Array:Int32Array},{},this._heap)}return e.prototype._initState=function(e,t){this._offset=0;var n=new Int32Array(e,t+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},e.prototype._padChunk=function(e,t){var n=u(e),r=new Int32Array(this._heap,0,n>>2);return function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0}(r,e),function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3}(r,e,t),n},e.prototype._write=function(e,t,n,r){a(e,this._h8,this._h32,t,n,r||0)},e.prototype._coreCall=function(e,t,n,r,i){var o=n;this._write(e,t,n),i&&(o=this._padChunk(n,r)),this._core.hash(o,this._padMaxChunkLen)},e.prototype.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;this._initState(this._heap,this._padMaxChunkLen);var n=0,r=this._maxChunkLen;for(n=0;t>n+r;n+=r)this._coreCall(e,n,r,t,!1);return this._coreCall(e,n,t-n,t,!0),c(this._heap,this._padMaxChunkLen)},e.prototype.digest=function(e){return o(this.rawDigest(e).buffer)},e.prototype.digestFromString=function(e){return this.digest(e)},e.prototype.digestFromBuffer=function(e){return this.digest(e)},e.prototype.digestFromArrayBuffer=function(e){return this.digest(e)},e.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},e.prototype.append=function(e){var t=0,n=e.byteLength||e.length||e.size||0,r=this._offset%this._maxChunkLen,i=void 0;for(this._offset+=n;t<n;)i=Math.min(n-t,this._maxChunkLen-r),this._write(e,t,i,r),t+=i,(r+=i)===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),r=0);return this},e.prototype.getState=function(){var e=void 0;if(this._offset%this._maxChunkLen)e=this._heap.slice(0);else{var t=new Int32Array(this._heap,this._padMaxChunkLen+320,5);e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}return{offset:this._offset,heap:e}},e.prototype.setState=function(e){return this._offset=e.offset,20===e.heap.byteLength?new Int32Array(this._heap,this._padMaxChunkLen+320,5).set(new Int32Array(e.heap)):this._h32.set(new Int32Array(e.heap)),this},e.prototype.rawEnd=function(){var e=this._offset,t=e%this._maxChunkLen,n=this._padChunk(t,e);this._core.hash(n,this._padMaxChunkLen);var r=c(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),r},e.prototype.end=function(){return o(this.rawEnd().buffer)},e}();e.exports=f,e.exports._core=r},function(e,t){for(var n=new Array(256),r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);e.exports.toHex=function(e){for(var t=new Uint8Array(e),r=new Array(e.byteLength),i=0;i<r.length;i++)r[i]=n[t[i]];return r.join("")},e.exports.ceilHeapSize=function(e){var t=0;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t},e.exports.isDedicatedWorkerScope=function(e){var t="WorkerGlobalScope"in e&&e instanceof e.WorkerGlobalScope,n="SharedWorkerGlobalScope"in e&&e instanceof e.SharedWorkerGlobalScope,r="ServiceWorkerGlobalScope"in e&&e instanceof e.ServiceWorkerGlobalScope;return t&&!n&&!r}},function(e,t,n){e.exports=function(){var e=n(0),t=!0;return self.onmessage=function(n){if(t){var r=n.data.data,i=n.data.file,o=n.data.id;if(void 0!==o&&(i||r)){var s=n.data.blockSize||4194304,a=new e(s);a.resetState();var u=function(e,t){e?self.postMessage({id:o,error:e.name}):self.postMessage({id:o,hash:t})};r&&function(e,t,n){try{n(null,e.digest(t))}catch(r){return n(r)}}(a,r,u),i&&function e(t,n,r,i,o){var s=new self.FileReader;s.onloadend=function(){if(s.error)return o(s.error);var a=s.result;n+=s.result.byteLength;try{t.append(a)}catch(u){return void o(u)}n<i.size?e(t,n,r,i,o):o(null,t.end())},s.readAsArrayBuffer(i.slice(n,n+r))}(a,0,s,i,u)}}},function(){t=!1}}},function(e,t,n){var r=n(4),i=n(0),o=n(7),s=n(2),a=n(1).isDedicatedWorkerScope,u="undefined"!=typeof self&&a(self);i.disableWorkerBehaviour=u?s():function(){},i.createWorker=function(){var e=r(2),t=e.terminate;return e.terminate=function(){URL.revokeObjectURL(e.objectURL),t.call(e)},e},i.createHash=o,e.exports=i},function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var s=t.toString(),a=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!a)return o;for(var u,c=a[1],f=new RegExp("(\\\\n|\\W)"+i(c)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=f.exec(s);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(f=new RegExp("\\("+i(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=f.exec(s);)e[u[2]]||(o[r].push(u[1]),e[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);return o}function s(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},a=t.all?{main:Object.keys(i)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};s(n);)for(var a=Object.keys(n),u=0;u<a.length;u++){var c=a[u],f=n[c].pop();if(i[c]=i[c]||{},!i[c][f]&&e[c][f]){i[c][f]=!0,r[c]=r[c]||[],r[c].push(f);for(var l=o(e,e[c][f],c),h=Object.keys(l),d=0;d<h.length;d++)n[h[d]]=n[h[d]]||[],n[h[d]]=n[h[d]].concat(l[h[d]])}}return r}(i,e),u="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),u=u+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"})(self);";var c=new window.Blob([u],{type:"text/javascript"});if(t.bare)return c;var f=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),l=new window.Worker(f);return l.objectURL=f,l}},function(e,t){e.exports=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,s=0,a=0,u=0,c=0,f=0,l=0,h=0,d=0,p=0,m=0,g=0;o=r[t+320>>2]|0;a=r[t+324>>2]|0;c=r[t+328>>2]|0;l=r[t+332>>2]|0;d=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){s=o;u=a;f=c;h=l;p=d;for(i=0;(i|0)<64;i=i+4|0){g=r[n+i>>2]|0;m=((o<<5|o>>>27)+(a&c|~a&l)|0)+((g+d|0)+1518500249|0)|0;d=l;l=c;c=a<<30|a>>>2;a=o;o=m;r[e+i>>2]=g}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){g=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;m=((o<<5|o>>>27)+(a&c|~a&l)|0)+((g+d|0)+1518500249|0)|0;d=l;l=c;c=a<<30|a>>>2;a=o;o=m;r[i>>2]=g}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){g=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;m=((o<<5|o>>>27)+(a^c^l)|0)+((g+d|0)+1859775393|0)|0;d=l;l=c;c=a<<30|a>>>2;a=o;o=m;r[i>>2]=g}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){g=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;m=((o<<5|o>>>27)+(a&c|a&l|c&l)|0)+((g+d|0)-1894007588|0)|0;d=l;l=c;c=a<<30|a>>>2;a=o;o=m;r[i>>2]=g}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){g=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;m=((o<<5|o>>>27)+(a^c^l)|0)+((g+d|0)-899497514|0)|0;d=l;l=c;c=a<<30|a>>>2;a=o;o=m;r[i>>2]=g}o=o+s|0;a=a+u|0;c=c+f|0;l=l+h|0;d=d+p|0}r[t+320>>2]=o;r[t+324>>2]=a;r[t+328>>2]=c;r[t+332>>2]=l;r[t+336>>2]=d}return{hash:i}}},function(e,t){var n=this,r=void 0;"undefined"!=typeof self&&void 0!==self.FileReaderSync&&(r=new self.FileReaderSync);var i=function(e,t,n,r,i,o){var s=void 0,a=o%4,u=(i+a)%4,c=i-u;switch(a){case 0:t[o]=e[r+3];case 1:t[o+1-(a<<1)|0]=e[r+2];case 2:t[o+2-(a<<1)|0]=e[r+1];case 3:t[o+3-(a<<1)|0]=e[r]}if(!(i<u+(4-a))){for(s=4-a;s<c;s=s+4|0)n[o+s>>2|0]=e[r+s]<<24|e[r+s+1]<<16|e[r+s+2]<<8|e[r+s+3];switch(u){case 3:t[o+c+1|0]=e[r+c+2];case 2:t[o+c+2|0]=e[r+c+1];case 1:t[o+c+3|0]=e[r+c]}}};e.exports=function(e,t,o,s,a,u){if("string"==typeof e)return function(e,t,n,r,i,o){var s=void 0,a=o%4,u=(i+a)%4,c=i-u;switch(a){case 0:t[o]=e.charCodeAt(r+3);case 1:t[o+1-(a<<1)|0]=e.charCodeAt(r+2);case 2:t[o+2-(a<<1)|0]=e.charCodeAt(r+1);case 3:t[o+3-(a<<1)|0]=e.charCodeAt(r)}if(!(i<u+(4-a))){for(s=4-a;s<c;s=s+4|0)n[o+s>>2]=e.charCodeAt(r+s)<<24|e.charCodeAt(r+s+1)<<16|e.charCodeAt(r+s+2)<<8|e.charCodeAt(r+s+3);switch(u){case 3:t[o+c+1|0]=e.charCodeAt(r+c+2);case 2:t[o+c+2|0]=e.charCodeAt(r+c+1);case 1:t[o+c+3|0]=e.charCodeAt(r+c)}}}(e,t,o,s,a,u);if(e instanceof Array)return i(e,t,o,s,a,u);if(n&&n.Buffer&&n.Buffer.isBuffer(e))return i(e,t,o,s,a,u);if(e instanceof ArrayBuffer)return i(new Uint8Array(e),t,o,s,a,u);if(e.buffer instanceof ArrayBuffer)return i(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t,o,s,a,u);if(e instanceof Blob)return function(e,t,n,i,o,s){var a=void 0,u=s%4,c=(o+u)%4,f=o-c,l=new Uint8Array(r.readAsArrayBuffer(e.slice(i,i+o)));switch(u){case 0:t[s]=l[3];case 1:t[s+1-(u<<1)|0]=l[2];case 2:t[s+2-(u<<1)|0]=l[1];case 3:t[s+3-(u<<1)|0]=l[0]}if(!(o<c+(4-u))){for(a=4-u;a<f;a=a+4|0)n[s+a>>2|0]=l[a]<<24|l[a+1]<<16|l[a+2]<<8|l[a+3];switch(c){case 3:t[s+f+1|0]=l[f+2];case 2:t[s+f+2|0]=l[f+1];case 1:t[s+f+3|0]=l[f]}}}(e,t,o,s,a,u);throw new Error("Unsupported data type.")}},function(e,t,n){var r=n(0),i=n(1).toHex,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rusha=new r,this._rusha.resetState()}return e.prototype.update=function(e){return this._rusha.append(e),this},e.prototype.digest=function(e){var t=this._rusha.rawEnd().buffer;if(!e)return t;if("hex"===e)return i(t);throw new Error("unsupported digest encoding")},e}();e.exports=function(){return new o}}])},e.exports=r()},W92y:function(e,t,n){var r=e.exports;r.encode=n("lYoV"),r.decode=n("tzh3"),r.byteLength=r.encodingLength=function(e){return r.encode(e).length}},WEDT:function(e,t,n){var r=n("Ptj5"),i=Math.pow(2,32);t.encodingLength=function(){return 8},t.encode=function(e,t,n){t||(t=r(8)),n||(n=0);var o=Math.floor(e/i),s=e-o*i;return t.writeUInt32BE(o,n),t.writeUInt32BE(s,n+4),t},t.decode=function(e,t){t||(t=0);var n=e.readUInt32BE(t),r=e.readUInt32BE(t+4);return n*i+r},t.encode.bytes=8,t.decode.bytes=8},X05J:function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n("F63i"))},X2w5:function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("PTjJ"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),f=Symbol("lastPromise"),l=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[f]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function m(e){t.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(d(void 0,!0))}))}));var r,i=this[f];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(void 0,!0)):t[l](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[l])}return this[f]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,l,{value:function(e,t){var r=n[h].read();r?(n[f]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[f]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[f]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[f]=null,n[s]=null,n[a]=null,r(d(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this,n("F63i"))},XZRp:function(e,t,n){"use strict";(function(t,r){var i=n("X05J");e.exports=_;var o,s=n("Rl48");_.ReadableState=v;n("r2q8").EventEmitter;var a=function(e,t){return e.listeners(t).length},u=n("SMyr"),c=n("atfL").Buffer,f=t.Uint8Array||function(){};var l=Object.create(n("a1wc"));l.inherits=n("qW1w");var h=n(7),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m=n("BV5H"),g=n("zTkl");l.inherits(_,u);var y=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(o=o||n("/Awr"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n("4j/0").StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function _(e){if(o=o||n("/Awr"),!(this instanceof _))return new _(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function b(e,t,n,r,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}(e,s)):(i||(o=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof f||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):x(e,s)):w(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),x(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return p||(p=n("4j/0").StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(S,e):S(e))}function S(e){d("emit readable"),e.emit("readable"),A(e)}function x(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(R,e,t))}function R(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){d("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function L(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):E(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?f:_;function c(t,r){d("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",c),n.removeListener("end",f),n.removeListener("end",_),n.removeListener("data",m),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function f(){d("onend"),e.end()}o.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",c);var l=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,A(e))}}(n);e.on("drain",l);var h=!1;var p=!1;function m(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(t){d("onerror",t),_(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),_()}function v(){d("onfinish"),e.removeListener("close",y),_()}function _(){d("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(C,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(T,e,t))}(this,e)),this},_.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(d("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<y.length;o++)e.on(y[o],this.emit.bind(this,y[o]));return this._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=I}).call(this,n("fRV1"),n("F63i"))},XZhR:function(e,t,n){(function(e){t.DEFAULT_ANNOUNCE_PEERS=50,t.MAX_ANNOUNCE_PEERS=82,t.binaryToHex=function(t){return"string"!=typeof t&&(t=String(t)),e.from(t,"binary").toString("hex")},t.hexToBinary=function(t){return"string"!=typeof t&&(t=String(t)),e.from(t,"hex").toString("binary")};var r=n(11);Object.assign(t,r)}).call(this,n("+ZX+").Buffer)},XvRE:function(e,t,n){"use strict";t.re=function(){throw new Error("`junk.re` was renamed to `junk.regex`")},t.regex=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^Desktop\\.ini$","@eaDir$"].join("|")),t.is=function(e){return t.regex.test(e)},t.not=function(e){return!t.is(e)},t.default=e.exports},Y9Ll:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},YR6z:function(e,t,n){"use strict";var r=n("uQzU");function i(e){return r.existsSync(e)&&r.statSync(e).isFile()}e.exports=function(e,t){if(!t)return i(e);r.stat(e,(function(e,n){return e?t(e):t(null,n.isFile())}))},e.exports.sync=i},"Ye/2":function(e,t,n){var r=n("87/0");t.encode=r.encode,t.decode=r.decode},Ykgk:function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("G+mE"),f=c.Writable,l=c.PassThrough,h=function(e){"use strict";o(n,e);var t=u(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),(i=t.call(this,o)).destroyed=!1,i._queue=[],i._position=e||0,i._cb=null,i._buffer=null,i._out=null,i}return i(n,[{key:"_write",value:function(e,t,n){for(var r=!0;;){if(this.destroyed)return;if(0===this._queue.length)return this._buffer=e,void(this._cb=n);this._buffer=null;var i=this._queue[0],o=Math.max(i.start-this._position,0),s=i.end-this._position;if(o>=e.length)return this._position+=e.length,n(null);var a=void 0;if(s>e.length){this._position+=e.length,a=0===o?e:e.slice(o),r=i.stream.write(a)&&r;break}this._position+=s,a=0===o&&s===e.length?e:e.slice(o,s),r=i.stream.write(a)&&r,i.last&&i.stream.end(),e=e.slice(s),this._queue.shift()}r?n(null):i.stream.once("drain",n.bind(null,null))}},{key:"slice",value:function(e){var t=this;if(this.destroyed)return null;Array.isArray(e)||(e=[e]);var n=new l;return e.forEach((function(r,i){t._queue.push({start:r.start,end:r.end,stream:n,last:i===e.length-1})})),this._buffer&&this._write(this._buffer,null,this._cb),n}},{key:"destroy",value:function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e))}}]),n}(f);e.exports=h},"Yuf/":function(e,t,n){(t=e.exports=n("XZRp")).Stream=t,t.Readable=t,t.Writable=n("lwyY"),t.Duplex=n("/Awr"),t.Transform=n("cMA9"),t.PassThrough=n("0sP2")},ZfsX:function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("G+mE").Readable,f=n("l3H4"),l=function(e){"use strict";o(n,e);var t=u(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,n),(i=t.call(this,o))._offset=0,i._ready=!1,i._file=e,i._size=e.size,i._chunkSize=o.chunkSize||Math.max(i._size/1e3,204800);var s=new FileReader;return s.onload=function(){i.push(f(s.result))},s.onerror=function(){i.emit("error",s.error)},i.reader=s,i._generateHeaderBlocks(e,o,(function(e,t){if(e)return i.emit("error",e);Array.isArray(t)&&t.forEach((function(e){return i.push(e)})),i._ready=!0,i.emit("_ready")})),i}return i(n,[{key:"_generateHeaderBlocks",value:function(e,t,n){n(null,[])}},{key:"_read",value:function(){if(this._ready){var e=this._offset,t=this._offset+this._chunkSize;if(t>this._size&&(t=this._size),e===this._size)return this.destroy(),void this.push(null);this.reader.readAsArrayBuffer(this._file.slice(e,t)),this._offset=t}else this.once("_ready",this._read.bind(this))}},{key:"destroy",value:function(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(e){}}this.reader=null}}]),n}(c);e.exports=l},a1wc:function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n("+ZX+").Buffer)},a8Xd:function(e,t,n){(function(t){var r=n("MS7o"),i=function(){};e.exports=function e(n,o,s){if("function"==typeof o)return e(n,null,o);o||(o={}),s=r(s||i);var a=n._writableState,u=n._readableState,c=o.readable||!1!==o.readable&&n.readable,f=o.writable||!1!==o.writable&&n.writable,l=!1,h=function(){n.writable||d()},d=function(){f=!1,c||s.call(n)},p=function(){c=!1,f||s.call(n)},m=function(e){s.call(n,e?new Error("exited with error code: "+e):null)},g=function(e){s.call(n,e)},y=function(){t.nextTick(v)},v=function(){if(!l)return(!c||u&&u.ended&&!u.destroyed)&&(!f||a&&a.ended&&!a.destroyed)?void 0:s.call(n,new Error("premature close"))},_=function(){n.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(n)?f&&!a&&(n.on("end",h),n.on("close",h)):(n.on("complete",d),n.on("abort",y),n.req?_():n.on("request",_)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(n)&&n.on("exit",m),n.on("end",p),n.on("finish",d),!1!==o.error&&n.on("error",g),n.on("close",y),function(){l=!0,n.removeListener("complete",d),n.removeListener("abort",y),n.removeListener("request",_),n.req&&n.req.removeListener("finish",d),n.removeListener("end",h),n.removeListener("close",h),n.removeListener("finish",d),n.removeListener("exit",m),n.removeListener("end",p),n.removeListener("error",g),n.removeListener("close",y)}}}).call(this,n("F63i"))},ah8D:function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},atfL:function(e,t,n){var r=n("+ZX+"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},bNFa:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n("+ZX+").Buffer,a=n(1).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),c&&o(t,c),e}()},bUPw:function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("nHyW"),f=n("r2q8"),l=n("e5jJ"),h=n("fncs"),d=n("Ykgk"),p=function(e){"use strict";o(s,e);var n=u(s);function s(e){var t;return r(this,s),(t=n.call(this))._tracks=[],t._file=e,t._decoder=null,t._findMoov(0),t}return i(s,[{key:"_findMoov",value:function(e){var t=this;this._decoder&&this._decoder.destroy();var n=0;this._decoder=l.decode();var r=this._file.createReadStream({start:e});r.pipe(this._decoder);this._decoder.on("box",(function i(o){"moov"===o.type?(t._decoder.removeListener("box",i),t._decoder.decode((function(e){r.destroy();try{t._processMoov(e)}catch(n){n.message="Cannot parse mp4 file: ".concat(n.message),t.emit("error",n)}}))):o.length<4096?(n+=o.length,t._decoder.ignore()):(t._decoder.removeListener("box",i),n+=o.length,r.destroy(),t._decoder.destroy(),t._findMoov(e+n))}))}},{key:"_processMoov",value:function(e){var n=e.traks;this._tracks=[],this._hasVideo=!1,this._hasAudio=!1;for(var r=0;r<n.length;r++){var i=n[r],o=i.mdia.minf.stbl,s=o.stsd.entries[0],a=i.mdia.hdlr.handlerType,u=void 0,c=void 0;if("vide"===a&&"avc1"===s.type){if(this._hasVideo)continue;this._hasVideo=!0,u="avc1",s.avcC&&(u+=".".concat(s.avcC.mimeCodec)),c='video/mp4; codecs="'.concat(u,'"')}else{if("soun"!==a||"mp4a"!==s.type)continue;if(this._hasAudio)continue;this._hasAudio=!0,u="mp4a",s.esds&&s.esds.mimeCodec&&(u+=".".concat(s.esds.mimeCodec)),c='audio/mp4; codecs="'.concat(u,'"')}var f=[],l=0,d=0,p=0,g=0,y=0,v=0,_=new m(o.stts.entries),b=null;o.ctts&&(b=new m(o.ctts.entries));for(var w=0;;){var k=o.stsc.entries[y],E=o.stsz.entries[l],S=_.value.duration,x=b?b.value.compositionOffset:0,R=!0;o.stss&&(R=o.stss.entries[w]===l+1);var C=o.stco||o.co64;if(f.push({size:E,duration:S,dts:v,presentationOffset:x,sync:R,offset:g+C.entries[p]}),++l>=o.stsz.entries.length)break;if(g+=E,++d>=k.samplesPerChunk){d=0,g=0,p++;var T=o.stsc.entries[y+1];T&&p+1>=T.firstChunk&&y++}v+=S,_.inc(),b&&b.inc(),R&&w++}i.mdia.mdhd.duration=0,i.tkhd.duration=0;var A=k.sampleDescriptionId,I={type:"moov",mvhd:e.mvhd,traks:[{tkhd:i.tkhd,mdia:{mdhd:i.mdia.mdhd,hdlr:i.mdia.hdlr,elng:i.mdia.elng,minf:{vmhd:i.mdia.minf.vmhd,smhd:i.mdia.minf.smhd,dinf:i.mdia.minf.dinf,stbl:{stsd:o.stsd,stts:{version:0,flags:0,entries:[]},ctts:{version:0,flags:0,entries:[]},stsc:{version:0,flags:0,entries:[]},stsz:{version:0,flags:0,entries:[]},stco:{version:0,flags:0,entries:[]},stss:{version:0,flags:0,entries:[]}}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:i.tkhd.trackId,defaultSampleDescriptionIndex:A,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};this._tracks.push({fragmentSequence:1,trackId:i.tkhd.trackId,timeScale:i.mdia.mdhd.timeScale,samples:f,currSample:null,currTime:null,moov:I,mime:c})}if(0!==this._tracks.length){e.mvhd.duration=0,this._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};var L=h.encode(this._ftyp),O=this._tracks.map((function(e){var n=h.encode(e.moov);return{mime:e.mime,init:t.concat([L,n])}}));this.emit("ready",O)}else this.emit("error",new Error("no playable tracks"))}},{key:"seek",value:function(e){var t=this;if(!this._tracks)throw new Error("Not ready yet; wait for 'ready' event");this._fileStream&&(this._fileStream.destroy(),this._fileStream=null);var n=-1;if(this._tracks.map((function(r,i){r.outStream&&r.outStream.destroy(),r.inStream&&(r.inStream.destroy(),r.inStream=null);var o=r.outStream=l.encode(),s=t._generateFragment(i,e);if(!s)return o.finalize();(-1===n||s.ranges[0].start<n)&&(n=s.ranges[0].start);!function e(n){o.destroyed||o.box(n.moof,(function(s){if(s)return t.emit("error",s);o.destroyed||r.inStream.slice(n.ranges).pipe(o.mediaData(n.length,(function(n){if(n)return t.emit("error",n);if(!o.destroyed){var r=t._generateFragment(i);if(!r)return o.finalize();e(r)}})))}))}(s)})),n>=0){var r=this._fileStream=this._file.createReadStream({start:n});this._tracks.forEach((function(e){e.inStream=new d(n,{highWaterMark:1e7}),r.pipe(e.inStream)}))}return this._tracks.map((function(e){return e.outStream}))}},{key:"_findSampleBefore",value:function(e,t){var n=this._tracks[e],r=Math.floor(n.timeScale*t),i=c(n.samples,r,(function(e,t){return e.dts+e.presentationOffset-t}));for(-1===i?i=0:i<0&&(i=-i-2);!n.samples[i].sync;)i--;return i}},{key:"_generateFragment",value:function(e,t){var n,r=this._tracks[e];if((n=void 0!==t?this._findSampleBefore(e,t):r.currSample)>=r.samples.length)return null;for(var i=r.samples[n].dts,o=0,s=[],a=n;a<r.samples.length;a++){var u=r.samples[a];if(u.sync&&u.dts-i>=r.timeScale*g)break;o+=u.size;var c=s.length-1;c<0||s[c].end!==u.offset?s.push({start:u.offset,end:u.offset+u.size}):s[c].end+=u.size}return r.currSample=a,{moof:this._generateMoof(e,n,a),ranges:s,length:o}}},{key:"_generateMoof",value:function(e,t,n){for(var r=this._tracks[e],i=[],o=0,s=t;s<n;s++){var a=r.samples[s];a.presentationOffset<0&&(o=1),i.push({sampleDuration:a.duration,sampleSize:a.size,sampleFlags:a.sync?33554432:16842752,sampleCompositionTimeOffset:a.presentationOffset})}var u={type:"moof",mfhd:{sequenceNumber:r.fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:r.trackId},tfdt:{baseMediaDecodeTime:r.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:i,version:o}}]};return u.trafs[0].trun.dataOffset+=h.encodingLength(u),u}}]),s}(f),m=function(){"use strict";function e(t,n){r(this,e),this._entries=t,this._countName=n||"count",this._index=0,this._offset=0,this.value=this._entries[0]}return i(e,[{key:"inc",value:function(){this._offset++,this._offset>=this._entries[this._index][this._countName]&&(this._index++,this._offset=0),this.value=this._entries[this._index]}}]),e}();var g=1;e.exports=p}).call(this,n("+ZX+").Buffer)},biRD:function(e,t,n){"use strict";n.r(t),n.d(t,"pageQuery",(function(){return k}));var r=n("ERkP"),i=n.n(r),o=n("H8eV"),s=n("VtSi"),a=n.n(s),u=n("zjfJ"),c=(n("3yYM"),n("QsI/")),f=n("fhSp"),l=n("fe2y"),h=n.n(l),d=n("Rbtb"),p=n.n(d),m=n("j/s1");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){var e=Object(f.a)(["\n  display: block;\n  width: 100%;\n"]);return v=function(){return e},e}var _=function(e){var t=e.file,n=r.useRef(null);return r.useEffect((function(){new h.a(t,n.current)})),r.createElement(r.Fragment,null,r.createElement("h4",null,t.name),r.createElement("video",{style:{width:"100%"},ref:n,autoPlay:!0,controls:!0,loop:!0,muted:!0,playsInline:!0}))},b=m.b.textarea(v()),w=function(e){var t=e.magnetURL,n=r.useState({loading:!0,videoFiles:[],magnetURL:t}),i=n[0],o=n[1];return r.useEffect((function(){(function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new p.a).add(t,function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.files),n=t.files.filter((function(e){return e.name.endsWith("mp4")})),o(y(y({},i),{},{loading:!1,videoFiles:n}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t)}),[]),i.loading?r.createElement(r.Fragment,null,r.createElement("h2",null,"loading"),r.createElement(b,{value:t,onChange:function(e){return o(y(y({},i),{},{magnetURL:e.target.value}))}})):r.createElement("div",null,i.videoFiles.map((function(e,t){return r.createElement(_,{file:e,key:t})})))},k=(t.default=function(e){e.data,e.location;return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{title:"Stream something from here :)"}),i.a.createElement(w,{magnetURL:"magnet:?xt=urn:btih:28ebbd106b09fc9a57c9752f0ef5f147682c3318&dn=VID_20190802_145240.mp4&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com"}))},"3159585216")},cMA9:function(e,t,n){"use strict";e.exports=s;var r=n("/Awr"),i=Object.create(n("a1wc"));function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n("qW1w"),i.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},cMcO:function(e,t,n){var r=n("+ZX+").Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},cbiG:function(e,t){function n(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,u,"next",e)}function u(e){n(s,i,o,a,u,"throw",e)}a(void 0)}))}}},ddV6:function(e,t,n){var r=n("qPgQ"),i=n("Ua7V"),o=n("peMk"),s=n("f2kJ");e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},dlxM:function(e,t,n){(function(t){e.exports=function(e,n){if("undefined"==typeof Blob||!(e instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof n)throw new Error("second argument must be a function");var r=new FileReader;r.addEventListener("loadend",(function e(i){r.removeEventListener("loadend",e,!1),i.error?n(i.error):n(null,t.from(r.result))}),!1),r.readAsArrayBuffer(e)}}).call(this,n("+ZX+").Buffer)},dnwU:function(e,t,n){(function(e){var n={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};t.Descriptor={},t.Descriptor.decode=function(r,i,o){var s,a,u=r.readUInt8(i),c=i+1,f=0;do{f=f<<7|127&(s=r.readUInt8(c++))}while(128&s);var l=n[u];return(a=t[l]?t[l].decode(r,c,o):{buffer:e.from(r.slice(c,c+f))}).tag=u,a.tagName=l,a.length=c-i+f,a.contentsLen=f,a},t.DescriptorArray={},t.DescriptorArray.decode=function(e,r,i){for(var o=r,s={};o+2<=i;){var a=t.Descriptor.decode(e,o,i);o+=a.length,s[n[a.tag]||"Descriptor"+a.tag]=a}return s},t.ESDescriptor={},t.ESDescriptor.decode=function(e,n,r){var i=e.readUInt8(n+2),o=n+3;(128&i&&(o+=2),64&i)&&(o+=e.readUInt8(o)+1);return 32&i&&(o+=2),t.DescriptorArray.decode(e,o,r)},t.DecoderConfigDescriptor={},t.DecoderConfigDescriptor.decode=function(e,n,r){var i=e.readUInt8(n),o=t.DescriptorArray.decode(e,n+13,r);return o.oti=i,o}}).call(this,n("+ZX+").Buffer)},e5jJ:function(e,t,n){var r=n("x6/H"),i=n("1Yjz");t.decode=function(e){return new r(e)},t.encode=function(e){return new i(e)}},eRop:function(e){e.exports=JSON.parse('{"name":"webtorrent","description":"Streaming torrent client","version":"0.108.6","author":{"name":"WebTorrent LLC","email":"feross@webtorrent.io","url":"https://webtorrent.io"},"browser":{"./lib/server.js":false,"./lib/tcp-pool.js":false,"bittorrent-dht/client":false,"fs-chunk-store":"memory-chunk-store","load-ip-set":false,"net":false,"os":false,"ut_pex":false},"browserify":{"transform":["package-json-versionify"]},"bugs":{"url":"https://github.com/webtorrent/webtorrent/issues"},"chromeapp":{"fs-chunk-store":"memory-chunk-store","http":"http-node","load-ip-set":false,"net":"chrome-net","os":false},"dependencies":{"addr-to-ip-port":"^1.5.1","bitfield":"^3.0.0","bittorrent-dht":"^10.0.0","bittorrent-protocol":"^3.1.1","chrome-net":"^3.3.4","chunk-store-stream":"^4.1.0","create-torrent":"^4.4.2","debug":"^4.1.1","end-of-stream":"1.4.1","escape-html":"^1.0.3","fs-chunk-store":"^2.0.2","http-node":"github:feross/http-node#webtorrent","immediate-chunk-store":"^2.1.0","load-ip-set":"^2.1.0","memory-chunk-store":"^1.3.0","mime":"^2.4.6","multistream":"^4.0.0","package-json-versionify":"^1.0.4","parse-numeric-range":"^1.2.0","parse-torrent":"^7.1.3","pump":"^3.0.0","random-iterate":"^1.0.1","randombytes":"^2.1.0","range-parser":"^1.2.1","readable-stream":"^3.6.0","render-media":"^3.4.3","run-parallel":"^1.1.9","run-parallel-limit":"^1.0.5","simple-concat":"^1.0.0","simple-get":"^3.0.1","simple-peer":"^9.7.2","simple-sha1":"^3.0.1","speedometer":"^1.1.0","stream-to-blob":"^2.0.1","stream-to-blob-url":"^3.0.2","stream-with-known-length-to-buffer":"^1.0.3","torrent-discovery":"^9.3.0","torrent-piece":"^2.0.0","unordered-array-remove":"^1.0.2","ut_metadata":"^3.5.0","ut_pex":"^2.0.0"},"devDependencies":{"airtap":"^3.0.0","babel-minify":"^0.5.1","bittorrent-tracker":"^9.15.0","browserify":"^16.5.1","disc":"^1.3.3","electron":"^8.0.0","finalhandler":"^1.1.2","network-address":"^1.1.2","run-series":"^1.1.8","serve-static":"^1.14.1","standard":"*","tape":"^5.0.1","webtorrent-fixtures":"^1.7.3"},"engines":{"node":">=10"},"funding":[{"type":"github","url":"https://github.com/sponsors/feross"},{"type":"patreon","url":"https://www.patreon.com/feross"},{"type":"consulting","url":"https://feross.org/support"}],"homepage":"https://webtorrent.io","keywords":["bittorrent","bittorrent client","download","mad science","p2p","peer-to-peer","peers","streaming","swarm","torrent","web torrent","webrtc","webrtc data","webtorrent"],"license":"MIT","main":"index.js","repository":{"type":"git","url":"git://github.com/webtorrent/webtorrent.git"},"scripts":{"build":"npm run build-js && npm run build-chromeapp","build-chromeapp":"browserify --browser-field=chromeapp --standalone WebTorrent . | minify --mangle=false > webtorrent.chromeapp.js","build-chromeapp-debug":"browserify --browser-field=chromeapp --standalone WebTorrent . > webtorrent.chromeapp.js","build-js":"browserify --standalone WebTorrent . | minify --mangle=false > webtorrent.min.js","build-js-debug":"browserify --standalone WebTorrent . > webtorrent.debug.js","size":"npm run size-js && npm run size-disc","size-disc":"browserify --full-paths . | discify --open","size-js":"npm run build && cat webtorrent.min.js | gzip | wc -c","test":"standard && npm run test-node && npm run test-browser","test-browser":"airtap -- test/*.js test/browser/*.js","test-browser-local":"airtap --local -- test/*.js test/browser/*.js","test-node":"tape test/*.js test/node/*.js","update-authors":"./scripts/update-authors.sh"},"standard":{"ignore":["webtorrent.min.js","webtorrent.chromeapp.js"]}}')},eiQr:function(e,t,n){var r=n("VtSi");n("3yYM");var i=n("cbiG");e.exports=function(e,t){return s.apply(this,arguments)};var o=n("UYdw");function s(){return(s=i(r.mark((function e(t,n){var i,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t,n);case 2:return i=e.sent,s=URL.createObjectURL(i),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},f2kJ:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},fe2y:function(e,t,n){var r=n("EI9H"),i=n("HsbT"),o=n("bUPw");function s(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(this instanceof s))return console.warn("don't invoked VideoStream without 'new'"),new s(e,t,i);this.detailedError=null,this._elem=t,this._elemWrapper=new r(t),this._waitingFired=!1,this._trackMeta=null,this._file=e,this._tracks=null,"none"!==this._elem.preload&&this._createMuxer(),this._onError=function(){n.detailedError=n._elemWrapper.detailedError,n.destroy()},this._onWaiting=function(){n._waitingFired=!0,n._muxer?n._tracks&&n._pump():n._createMuxer()},t.autoplay&&(t.preload="auto"),t.addEventListener("waiting",this._onWaiting),t.addEventListener("error",this._onError)}s.prototype={_createMuxer:function(){var e=this;this._muxer=new o(this._file),this._muxer.on("ready",(function(t){e._tracks=t.map((function(t){var n=e._elemWrapper.createWriteStream(t.mime);n.on("error",(function(t){e._elemWrapper.error(t)}));var r={muxed:null,mediaSource:n,initFlushed:!1,onInitFlushed:null};return n.write(t.init,(function(e){r.initFlushed=!0,r.onInitFlushed&&r.onInitFlushed(e)})),r})),(e._waitingFired||"auto"===e._elem.preload)&&e._pump()})),this._muxer.on("error",(function(t){e._elemWrapper.error(t)}))},_pump:function(){var e=this,t=this._muxer.seek(this._elem.currentTime,!this._tracks);this._tracks.forEach((function(n,r){var o=function(){n.muxed&&(n.muxed.destroy(),n.mediaSource=e._elemWrapper.createWriteStream(n.mediaSource),n.mediaSource.on("error",(function(t){e._elemWrapper.error(t)}))),n.muxed=t[r],i(n.muxed,n.mediaSource)};n.initFlushed?o():n.onInitFlushed=function(t){t?e._elemWrapper.error(t):o()}}))},destroy:function(){this.destroyed||(this.destroyed=!0,this._elem.removeEventListener("waiting",this._onWaiting),this._elem.removeEventListener("error",this._onError),this._tracks&&this._tracks.forEach((function(e){e.muxed&&e.muxed.destroy()})),this._elem.src="")}},e.exports=s},fncs:function(e,t,n){(function(e){var r=n("WEDT"),i=n("Buw0"),o=t,s=t.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","tfdt","trun","sbgps","sgpds","subss","saizs","saios","meta"]};o.encode=function(t,n,r){return o.encodingLength(t),r=r||0,n=n||e.alloc(t.length),o._encode(t,n,r)},o._encode=function(e,t,n){var a=e.type,u=e.length;u>4294967295&&(u=1),t.writeUInt32BE(u,n),t.write(e.type,n+4,4,"ascii");var c=n+8;if(1===u&&(r.encode(e.length,t,c),c+=8),i.fullBoxes[a]&&(t.writeUInt32BE(e.flags||0,c),t.writeUInt8(e.version||0,c),c+=4),s[a])s[a].forEach((function(n){if(5===n.length){var r=e[n]||[];n=n.substr(0,4),r.forEach((function(e){o._encode(e,t,c),c+=o.encode.bytes}))}else e[n]&&(o._encode(e[n],t,c),c+=o.encode.bytes)})),e.otherBoxes&&e.otherBoxes.forEach((function(e){o._encode(e,t,c),c+=o.encode.bytes}));else if(i[a]){var f=i[a].encode;f(e,t,c),c+=f.bytes}else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+a+"') or `buffer` must be set");e.buffer.copy(t,c),c+=e.buffer.length}return o.encode.bytes=c-n,t},o.readHeaders=function(e,t,n){if(t=t||0,(n=n||e.length)-t<8)return 8;var o,s,a=e.readUInt32BE(t),u=e.toString("ascii",t+4,t+8),c=t+8;if(1===a){if(n-t<16)return 16;a=r.decode(e,c),c+=8}return i.fullBoxes[u]&&(o=e.readUInt8(c),s=16777215&e.readUInt32BE(c),c+=4),{length:a,headersLen:c-t,contentLen:a-(c-t),type:u,version:o,flags:s}},o.decode=function(e,t,n){t=t||0,n=n||e.length;var r=o.readHeaders(e,t,n);if(!r||r.length>n-t)throw new Error("Data too short");return o.decodeWithoutHeaders(r,e,t+r.headersLen,t+r.length)},o.decodeWithoutHeaders=function(t,n,r,a){r=r||0,a=a||n.length;var u=t.type,c={};if(s[u]){c.otherBoxes=[];for(var f=s[u],l=r;a-l>=8;){var h=o.decode(n,l,a);if(l+=h.length,f.indexOf(h.type)>=0)c[h.type]=h;else if(f.indexOf(h.type+"s")>=0){var d=h.type+"s";(c[d]=c[d]||[]).push(h)}else c.otherBoxes.push(h)}}else if(i[u]){c=(0,i[u].decode)(n,r,a)}else c.buffer=e.from(n.slice(r,a));return c.length=t.length,c.contentLen=t.contentLen,c.type=t.type,c.version=t.version,c.flags=t.flags,c},o.encodingLength=function(e){var t=e.type,n=8;if(i.fullBoxes[t]&&(n+=4),s[t])s[t].forEach((function(t){if(5===t.length){var r=e[t]||[];t=t.substr(0,4),r.forEach((function(e){e.type=t,n+=o.encodingLength(e)}))}else if(e[t]){var i=e[t];i.type=t,n+=o.encodingLength(i)}})),e.otherBoxes&&e.otherBoxes.forEach((function(e){n+=o.encodingLength(e)}));else if(i[t])n+=i[t].encodingLength(e);else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");n+=e.buffer.length}return n>4294967295&&(n+=8),e.length=n,n}}).call(this,n("+ZX+").Buffer)},gIIS:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,u=1,c={},f=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},h.clearImmediate=d}function d(e){delete c[e]}function p(e){if(f)setTimeout(p,0,e);else{var t=c[e];if(t){f=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),f=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("fRV1"),n("F63i"))},"i+/A":function(e,t,n){"use strict";(function(t,r){var i=n("KLyV").Buffer,o=t.crypto||t.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>65536)for(var s=0;s<e;s+=65536)o.getRandomValues(n.slice(s,s+65536));else o.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n("fRV1"),n("F63i"))},"igz/":function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=function(e){"use strict";o(n,e);var t=u(n);function n(e,i){var o;return r(this,n),(o=t.call(this)).client=e,o.announceUrl=i,o.interval=null,o.destroyed=!1,o}return i(n,[{key:"setInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this;null==e&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval((function(){t.announce(t.client._defaultAnnounceOpts())}),e),this.interval.unref&&this.interval.unref())}))}]),n}(n("r2q8"));e.exports=c},jBhX:function(e,t){e.exports=function(e,t){var n=null;return e.on(t,(function(e){if(n){var t=n;n=null,t(e)}})),function(e){n=e}}},jRAG:function(e,t,n){(function(t){e.exports=l;var r=n("Uzjk"),i=n(6),o=n("o1V0"),s=n("L2Ey"),a=n("MS7o"),u=n("prCu"),c=n("EfWO"),f=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};function l(e,n){if(e=Object.assign({maxRedirects:10},"string"==typeof e?{url:e}:e),n=a(n),e.url){var r=c.parse(e.url),h=r.hostname,d=r.port,p=r.protocol,m=r.auth,g=r.path;delete e.url,h||d||p||m?Object.assign(e,{hostname:h,port:d,protocol:p,auth:m,path:g}):e.path=g}var y,v={"accept-encoding":"gzip, deflate"};e.headers&&Object.keys(e.headers).forEach((function(t){return v[t.toLowerCase()]=e.headers[t]})),e.headers=v,e.body?y=e.json&&!f(e.body)?JSON.stringify(e.body):e.body:e.form&&(y="string"==typeof e.form?e.form:u.stringify(e.form),e.headers["content-type"]="application/x-www-form-urlencoded"),y&&(e.method||(e.method="POST"),f(y)||(e.headers["content-length"]=t.byteLength(y)),e.json&&!e.form&&(e.headers["content-type"]="application/json")),delete e.body,delete e.form,e.json&&(e.headers.accept="application/json"),e.method&&(e.method=e.method.toUpperCase());var _=("https:"===e.protocol?s:o).request(e,(function(t){if(!1!==e.followRedirects&&t.statusCode>=300&&t.statusCode<400&&t.headers.location)return e.url=t.headers.location,delete e.headers.host,t.resume(),"POST"===e.method&&[301,302].includes(t.statusCode)&&(e.method="GET",delete e.headers["content-length"],delete e.headers["content-type"]),0==e.maxRedirects--?n(new Error("too many redirects")):l(e,n);var r="function"==typeof i&&"HEAD"!==e.method;n(null,r?i(t):t)}));return _.on("timeout",(function(){_.abort(),n(new Error("Request timed out"))})),_.on("error",n),f(y)?y.on("error",n).pipe(_):_.end(y),_}l.concat=function(e,t){return l(e,(function(n,i){if(n)return t(n);r(i,(function(n,r){if(n)return t(n);if(e.json)try{r=JSON.parse(r.toString())}catch(n){return t(n,i,r)}t(null,i,r)}))}))},["get","post","put","patch","head","delete"].forEach((function(e){l[e]=function(t,n){return"string"==typeof t&&(t={url:t}),l(Object.assign({method:e.toUpperCase()},t),n)}}))}).call(this,n("+ZX+").Buffer)},jwST:function(e,t,n){var r=n("ddV6");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t,n,o=[],s=i(e.split(",").map((function(e){return e.trim()})));try{for(s.s();!(n=s.n()).done;){var a=n.value;if(/^-?\d+$/.test(a))o.push(parseInt(a,10));else if(t=a.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){var u=r(t,4),c=(u[0],u[1]),f=u[2],l=u[3];if(c&&l){var h=(c=parseInt(c))<(l=parseInt(l))?1:-1;"-"!==f&&".."!==f&&"‥"!==f||(l+=h);for(var d=c;d!==l;d+=h)o.push(d)}}}}catch(p){s.e(p)}finally{s.f()}return o}t.default=s,e.exports=s},k2ha:function(e,t){var n=/^\[?([^\]]+)\]?:(\d+)$/,r={},i=0;e.exports=function(t){if(1e5===i&&e.exports.reset(),!r[t]){var o=n.exec(t);if(!o)throw new Error("invalid addr: ".concat(t));r[t]=[o[1],Number(o[2])],i+=1}return r[t]},e.exports.reset=function(){r={},i=0}},k5cm:function(e,t,n){"use strict";var r=n("3+V0").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},l3H4:function(e,t,n){(function(t){var r=n("nwFy").strict;e.exports=function(e){if(r(e)){var n=t.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(n=n.slice(e.byteOffset,e.byteOffset+e.byteLength)),n}return t.from(e)}}).call(this,n("+ZX+").Buffer)},lYoV:function(e,t,n){var r=n("KLyV").Buffer;function i(e,t,n){var o=[],s=null;return i._encode(o,e),s=r.concat(o),i.bytes=s.length,r.isBuffer(t)?(s.copy(t,n),t):s}i.bytes=-1,i._floatConversionDetected=!1,i.getType=function(e){return r.isBuffer(e)?"buffer":Array.isArray(e)?"array":ArrayBuffer.isView(e)?"arraybufferview":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof ArrayBuffer?"arraybuffer":typeof e},i._encode=function(e,t){if(null!=t)switch(i.getType(t)){case"buffer":i.buffer(e,t);break;case"object":i.dict(e,t);break;case"array":i.list(e,t);break;case"string":i.string(e,t);break;case"number":case"boolean":i.number(e,t);break;case"arraybufferview":i.buffer(e,r.from(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":i.buffer(e,r.from(t))}};var o=r.from("e"),s=r.from("d"),a=r.from("l");i.buffer=function(e,t){e.push(r.from(t.length+":"),t)},i.string=function(e,t){e.push(r.from(r.byteLength(t)+":"+t))},i.number=function(e,t){var n=2147483648*(t/2147483648<<0)+(t%2147483648<<0);e.push(r.from("i"+n+"e")),n===t||i._floatConversionDetected||(i._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+n+'"'),console.trace())},i.dict=function(e,t){e.push(s);for(var n,r=0,a=Object.keys(t).sort(),u=a.length;r<u;r++)null!=t[n=a[r]]&&(i.string(e,n),i._encode(e,t[n]));e.push(o)},i.list=function(e,t){var n=0,r=t.length;for(e.push(a);n<r;n++)null!=t[n]&&i._encode(e,t[n]);e.push(o)},e.exports=i},lwyY:function(e,t,n){"use strict";(function(t,r,i){var o=n("X05J");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var a,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=y;var c=Object.create(n("a1wc"));c.inherits=n("qW1w");var f={deprecate:n("P2aG")},l=n("SMyr"),h=n("atfL").Buffer,d=i.Uint8Array||function(){};var p,m=n("zTkl");function g(){}function y(e,t){a=a||n("/Awr"),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}(e,n,r,t,i);else{var s=k(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?u(b,e,n,s,i):b(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(e){if(a=a||n("/Awr"),!(p.call(v,this)||this instanceof a))return new v(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function _(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,_(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,l=n.callback;if(_(e,t,!1,t.objectMode?1:c.length,c,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n=k(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(v,l),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:f.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===v&&(e&&e._writableState instanceof y)}})):p=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=e,h.isBuffer(r)||r instanceof d);return a&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,a,r,i,o);return u}(this,i,a,e,t,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("F63i"),n("/Qos").setImmediate,n("fRV1"))},m4n2:function(e,t){e.exports=function(e,t){if(t>=e.length||t<0)return;var n=e.pop();if(t<e.length){var r=e[t];return e[t]=n,r}return n}},n1Tc:function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,"day");if(t>=i)return s(e,t,i,"hour");if(t>=r)return s(e,t,r,"minute");if(t>=n)return s(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},n70c:function(e,t,n){var r=n("PxXD");function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},nHyW:function(e,t){e.exports=function(e,t,n,r,i){var o,s;if(void 0===r)r=0;else if((r|=0)<0||r>=e.length)throw new RangeError("invalid lower bound");if(void 0===i)i=e.length-1;else if((i|=0)<r||i>=e.length)throw new RangeError("invalid upper bound");for(;r<=i;)if((s=+n(e[o=r+(i-r>>>1)],t,o,e))<0)r=o+1;else{if(!(s>0))return o;i=o-1}return~r}},nI7q:function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("r2q8").EventEmitter,f=n("G+mE").PassThrough,l=n("nwQ2"),h=n("oNVP"),d=n("wiCG"),p=n("UYdw"),m=n("eiQr"),g=n("UlFi"),y=n("A/ts"),v=function(e){"use strict";o(s,e);var n=u(s);function s(e,t){var i;r(this,s),(i=n.call(this))._torrent=e,i._destroyed=!1,i.name=t.name,i.path=t.path,i.length=t.length,i.offset=t.offset,i.done=!1;var o=t.offset,a=o+t.length-1;return i._startPiece=o/i._torrent.pieceLength|0,i._endPiece=a/i._torrent.pieceLength|0,0===i.length&&(i.done=!0,i.emit("done")),i}return i(s,[{key:"select",value:function(e){0!==this.length&&this._torrent.select(this._startPiece,this._endPiece,e)}},{key:"deselect",value:function(){0!==this.length&&this._torrent.deselect(this._startPiece,this._endPiece,!1)}},{key:"createReadStream",value:function(e){var n=this;if(0===this.length){var r=new f;return t.nextTick((function(){r.end()})),r}var i=new y(this,e);return this._torrent.select(i._startPiece,i._endPiece,!0,(function(){i._notify()})),l(i,(function(){n._destroyed||n._torrent.destroyed||n._torrent.deselect(i._startPiece,i._endPiece,!0)})),i}},{key:"getBuffer",value:function(e){g(this.createReadStream(),this.length,e)}},{key:"getBlob",value:function(e){if("undefined"==typeof window)throw new Error("browser-only method");p(this.createReadStream(),this._getMimeType()).then((function(t){return e(null,t)}),(function(t){return e(t)}))}},{key:"getBlobURL",value:function(e){if("undefined"==typeof window)throw new Error("browser-only method");m(this.createReadStream(),this._getMimeType()).then((function(t){return e(null,t)}),(function(t){return e(t)}))}},{key:"appendTo",value:function(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");d.append(this,e,t,n)}},{key:"renderTo",value:function(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");d.render(this,e,t,n)}},{key:"_getMimeType",value:function(){return d.mime[h.extname(this.name).toLowerCase()]}},{key:"_destroy",value:function(){this._destroyed=!0,this._torrent=null}},{key:"downloaded",get:function(){if(!this._torrent.bitfield)return 0;for(var e=this._torrent,t=e.pieces,n=e.bitfield,r=e.pieceLength,i=this._startPiece,o=this._endPiece,s=t[i],a=this.offset%r,u=n.get(i)?r-a:Math.max(r-a-s.missing,0),c=i+1;c<=o;++c){if(n.get(c))u+=r;else u+=r-t[c].missing}return Math.min(u,this.length)}},{key:"progress",get:function(){return this.length?this.downloaded/this.length:0}}]),s}(c);e.exports=v}).call(this,n("F63i"))},nwFy:function(e,t){e.exports=i,i.strict=o,i.loose=s;var n=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function i(e){return o(e)||s(e)}function o(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function s(e){return r[n.call(e)]}},nwQ2:function(e,t,n){var r=n("MS7o"),i=function(){};e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=r(o||i);var s=t._writableState,a=t._readableState,u=n.readable||!1!==n.readable&&t.readable,c=n.writable||!1!==n.writable&&t.writable,f=function(){t.writable||l()},l=function(){c=!1,u||o.call(t)},h=function(){u=!1,c||o.call(t)},d=function(e){o.call(t,e?new Error("exited with error code: "+e):null)},p=function(e){o.call(t,e)},m=function(){return(!u||a&&a.ended)&&(!c||s&&s.ended)?void 0:o.call(t,new Error("premature close"))},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?c&&!s&&(t.on("end",f),t.on("close",f)):(t.on("complete",l),t.on("abort",m),t.req?g():t.on("request",g)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(t)&&t.on("exit",d),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",p),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",f),t.removeListener("close",f),t.removeListener("finish",l),t.removeListener("exit",d),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",m)}}},o1V0:function(e,t,n){(function(e){var r=n("1Ied"),i=n("KbTw"),o=n("GKv7"),s=n("zjR9"),a=n("EfWO"),u=t;u.request=function(t,n){t="string"==typeof t?a.parse(t):o(t);var i=-1===e.location.protocol.search(/^https?:$/)?"http:":"",s=t.protocol||i,u=t.hostname||t.host,c=t.port,f=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?s+"//"+u:"")+(c?":"+c:"")+f,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var l=new r(t);return n&&l.on("response",n),l},u.get=function(e,t){var n=u.request(e,t);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n("fRV1"))},oNVP:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var c=[];for(u=a;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("F63i"))},pqqp:function(e,t){e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},prCu:function(e,t,n){"use strict";t.decode=t.parse=n("r/K9"),t.encode=t.stringify=n("zHZo")},"q3/s":function(e,t,n){(function(e,r){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,f=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function m(e){throw new RangeError(h[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(l,".")).split("."),t).join(".")}function v(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return g(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=36)e=d(e/35);return d(r+36*e/(e+38))}function k(e){var t,n,r,i,o,s,a,c,f,l,h,p=[],g=e.length,y=0,v=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=y,s=1,a=36;i>=g&&m("invalid-input"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>d((u-y)/s))&&m("overflow"),y+=c*s,!(c<(f=a<=b?1:a>=b+26?26:a-b));a+=36)s>d(u/(l=36-f))&&m("overflow"),s*=l;b=w(y-o,t=p.length+1,0==o),d(y/t)>u-v&&m("overflow"),v+=d(y/t),y%=t,p.splice(y++,0,v)}return _(p)}function E(e){var t,n,r,i,o,s,a,c,f,l,h,g,y,_,k,E=[];for(g=(e=v(e)).length,t=128,n=0,o=72,s=0;s<g;++s)(h=e[s])<128&&E.push(p(h));for(r=i=E.length,i&&E.push("-");r<g;){for(a=u,s=0;s<g;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>d((u-n)/(y=r+1))&&m("overflow"),n+=(a-t)*y,t=a,s=0;s<g;++s)if((h=e[s])<t&&++n>u&&m("overflow"),h==t){for(c=n,f=36;!(c<(l=f<=o?1:f>=o+26?26:f-o));f+=36)k=c-l,_=36-l,E.push(p(b(l+k%_,0))),c=d(k/_);E.push(p(b(c,0))),o=w(n,y,r==i),n=0,++r}++n,++t}return E.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:_},decode:k,encode:E,toASCII:function(e){return y(e,(function(e){return f.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return y(e,(function(e){return c.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n("aYSr")(e),n("fRV1"))},qPgQ:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},qW1w:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},qvhp:function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("m4n2"),s=n("KQpv")("webtorrent:peer"),a=n("93kM"),u=n("2ylb");t.createWebRTCPeer=function(e,t){var n=new c(e.id,"webrtc");return n.conn=e,n.swarm=t,n.conn.connected?n.onConnect():(n.conn.once("connect",(function(){n.onConnect()})),n.conn.once("error",(function(e){n.destroy(e)})),n.startConnectTimeout()),n},t.createTCPIncomingPeer=function(e){var t="".concat(e.remoteAddress,":").concat(e.remotePort),n=new c(t,"tcpIncoming");return n.conn=e,n.addr=t,n.onConnect(),n},t.createTCPOutgoingPeer=function(e,t){var n=new c(e,"tcpOutgoing");return n.addr=e,n.swarm=t,n},t.createWebSeedPeer=function(e,t){var n=new c(e,"webSeed");return n.swarm=t,n.conn=new u(e,t),n.onConnect(),n};var c=function(){"use strict";function e(t,n){r(this,e),this.id=t,this.type=n,s("new %s Peer %s",n,t),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentHandshake=!1}return i(e,[{key:"onConnect",value:function(){var e=this;if(!this.destroyed){this.connected=!0,s("Peer %s connected",this.id),clearTimeout(this.connectTimeout);var t=this.conn;t.once("end",(function(){e.destroy()})),t.once("close",(function(){e.destroy()})),t.once("finish",(function(){e.destroy()})),t.once("error",(function(t){e.destroy(t)}));var n=this.wire=new a;n.type=this.type,n.once("end",(function(){e.destroy()})),n.once("close",(function(){e.destroy()})),n.once("finish",(function(){e.destroy()})),n.once("error",(function(t){e.destroy(t)})),n.once("handshake",(function(t,n){e.onHandshake(t,n)})),this.startHandshakeTimeout(),t.pipe(n).pipe(t),this.swarm&&!this.sentHandshake&&this.handshake()}}},{key:"onHandshake",value:function(e,t){if(this.swarm&&!this.destroyed){if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(e!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));s("Peer %s got handshake %s",this.id,e),clearTimeout(this.handshakeTimeout),this.retries=0;var n=this.addr;!n&&this.conn.remoteAddress&&this.conn.remotePort&&(n="".concat(this.conn.remoteAddress,":").concat(this.conn.remotePort)),this.swarm._onWire(this.wire,n),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}}},{key:"handshake",value:function(){var e={dht:!this.swarm.private&&!!this.swarm.client.dht};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,e),this.sentHandshake=!0}},{key:"startConnectTimeout",value:function(){var e=this;clearTimeout(this.connectTimeout),this.connectTimeout=setTimeout((function(){e.destroy(new Error("connect timeout"))}),"webrtc"===this.type?25e3:5e3),this.connectTimeout.unref&&this.connectTimeout.unref()}},{key:"startHandshakeTimeout",value:function(){var e=this;clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout((function(){e.destroy(new Error("handshake timeout"))}),25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}},{key:"destroy",value:function(e){if(!this.destroyed){this.destroyed=!0,this.connected=!1,s("destroy %s (error: %s)",this.id,e&&(e.message||e)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);var t=this.swarm,n=this.conn,r=this.wire;this.swarm=null,this.conn=null,this.wire=null,t&&r&&o(t.wires,t.wires.indexOf(r)),n&&(n.on("error",(function(){})),n.destroy()),r&&r.destroy(),t&&t.removePeer(this.id)}}}]),e}()},"qw6+":function(e,t,n){"use strict";(function(t,r){var i;e.exports=x,x.ReadableState=S;n("r2q8").EventEmitter;var o=function(e,t){return e.listeners(t).length},s=n("/kXe"),a=n("+ZX+").Buffer,u=t.Uint8Array||function(){};var c,f=n(0);c=f&&f.debuglog?f.debuglog("stream"):function(){};var l,h,d,p=n("bNFa"),m=n("NhVp"),g=n("k5cm").getHighWaterMark,y=n("3+V0").codes,v=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n("qW1w")(x,s);var k=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(e,t,r){i=i||n("wYax"),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=n("4j/0").StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function x(e){if(i=i||n("wYax"),!(this instanceof x))return new x(e);var t=this instanceof i;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function R(e,t,n,r,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?A(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)s.endEmitted?k(e,new w):C(e,s,t,!0);else if(s.ended)k(e,new _);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?C(e,s,t,!1):L(e,s)):C(e,s,t,!1)}else r||(s.reading=!1,L(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),L(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=m.destroy,x.prototype._undestroy=m.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),R(this,e,t,!1,n)},x.prototype.unshift=function(e){return R(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){l||(l=n("4j/0").StringDecoder);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(I,e))}function I(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,P(e)}function L(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function B(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function D(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(N,t,e))}function N(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function H(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):A(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(e){k(this,new b("_read()"))},x.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",f),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",h),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function u(){c("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var f=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,P(e))}}(n);e.on("drain",f);var l=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==H(i.pipes,e))&&!l&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){c("onerror",t),g(),e.removeListener("error",d),0===o(e,"error")&&k(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",m),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=H(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},x.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?A(this):i.reading||r.nextTick(M,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(B,this),n},x.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(B,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(U,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n("X2w5")),h(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=j,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(e,t){return void 0===d&&(d=n("ah8D")),d(x,e,t)})}).call(this,n("fRV1"),n("F63i"))},"r/K9":function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;f<c;++f){var l,h,d,p,m=e[f].replace(a,"%20"),g=m.indexOf(n);g>=0?(l=m.substr(0,g),h=m.substr(g+1)):(l=m,h=""),d=decodeURIComponent(l),p=decodeURIComponent(h),r(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},r2q8:function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=f(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,f=g(u,c);for(n=0;n<c;++n)o(f[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"s+nu":function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},tP4B:function(e,t,n){(function(e){t.fetch=a(e.fetch)&&a(e.ReadableStream),t.writableStream=a(e.WritableStream),t.abortController=a(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(u){}var n;function r(){if(void 0!==n)return n;if(e.XMLHttpRequest){n=new e.XMLHttpRequest;try{n.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(u){n=null}}else n=null;return n}function i(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(u){}return!1}var o=void 0!==e.ArrayBuffer,s=o&&a(e.ArrayBuffer.prototype.slice);function a(e){return"function"==typeof e}t.arraybuffer=t.fetch||o&&i("arraybuffer"),t.msstream=!t.fetch&&s&&i("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o&&i("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&a(r().overrideMimeType),t.vbArray=a(e.VBArray),n=null}).call(this,n("fRV1"))},tzh3:function(e,t,n){var r=n("KLyV").Buffer;function i(e,t,n){for(var r=0,i=1,o=t;o<n;o++){var s=e[o];if(s<58&&s>=48)r=10*r+(s-48);else if(o!==t||43!==s){if(o!==t||45!==s){if(46===s)break;throw new Error("not a number: buffer["+o+"] = "+s)}i=-1}}return r*i}function o(e,t,n,i){return null==e||0===e.length?null:("number"!=typeof t&&null==i&&(i=t,t=void 0),"number"!=typeof n&&null==i&&(i=n,n=void 0),o.position=0,o.encoding=i||null,o.data=r.isBuffer(e)?e.slice(t,n):r.from(e),o.bytes=o.data.length,o.next())}o.bytes=0,o.position=0,o.data=null,o.encoding=null,o.next=function(){switch(o.data[o.position]){case 100:return o.dictionary();case 108:return o.list();case 105:return o.integer();default:return o.buffer()}},o.find=function(e){for(var t=o.position,n=o.data.length,r=o.data;t<n;){if(r[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")},o.dictionary=function(){o.position++;for(var e={};101!==o.data[o.position];)e[o.buffer()]=o.next();return o.position++,e},o.list=function(){o.position++;for(var e=[];101!==o.data[o.position];)e.push(o.next());return o.position++,e},o.integer=function(){var e=o.find(101),t=i(o.data,o.position+1,e);return o.position+=e+1-o.position,t},o.buffer=function(){var e=o.find(58),t=i(o.data,o.position,e),n=++e+t;return o.position=n,o.encoding?o.data.toString(o.encoding,e,n):o.data.slice(e,n)},e.exports=o},uQzU:function(e,t){},vF8l:function(e,t,n){"use strict";e.exports=i;var r=n("Aa7t");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n("qW1w")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},"vl/k":function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("KQpv")("simple-websocket"),f=n("i+/A"),l=n("G+mE"),h=n("yQO9"),d=n(14),p="function"!=typeof d?WebSocket:d,m=function(e){"use strict";o(a,e);var n=u(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,a),"string"==typeof t&&(t={url:t}),t=Object.assign({allowHalfOpen:!1},t),e=n.call(this,t),null==t.url&&null==t.socket)throw new Error("Missing required `url` or `socket` option");if(null!=t.url&&null!=t.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(e._id=f(4).toString("hex").slice(0,7),e._debug("new websocket: %o",t),e.connected=!1,e.destroyed=!1,e._chunk=null,e._cb=null,e._interval=null,t.socket)e.url=t.socket.url,e._ws=t.socket,e.connected=t.socket.readyState===p.OPEN;else{e.url=t.url;try{e._ws="function"==typeof d?new p(t.url,t):new p(t.url)}catch(i){return h((function(){return e.destroy(i)})),s(e)}}return e._ws.binaryType="arraybuffer",e._ws.onopen=function(){e._onOpen()},e._ws.onmessage=function(t){e._onMessage(t)},e._ws.onclose=function(){e._onClose()},e._ws.onerror=function(){e.destroy(new Error("connection error to "+e.url))},e._onFinishBound=function(){e._onFinish()},e.once("finish",e._onFinishBound),e}return i(a,[{key:"send",value:function(e){this._ws.send(e)}},{key:"destroy",value:function(e){this._destroy(e,(function(){}))}},{key:"_destroy",value:function(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._ws){var n=this._ws,r=function(){n.onclose=null};if(n.readyState===p.CLOSED)r();else try{n.onclose=r,n.close()}catch(e){r()}n.onopen=null,n.onmessage=null,n.onerror=function(){}}if(this._ws=null,e){if("undefined"!=typeof DOMException&&e instanceof DOMException){var i=e.code;(e=new Error(e.message)).code=i}this.emit("error",e)}this.emit("close"),t()}}},{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(r){return this.destroy(r)}"function"!=typeof d&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}},{key:"_onFinish",value:function(){var e=this;if(!this.destroyed){var t=function(){setTimeout((function(){return e.destroy()}),1e3)};this.connected?t():this.once("connect",t)}}},{key:"_onMessage",value:function(e){if(!this.destroyed){var n=e.data;n instanceof ArrayBuffer&&(n=t.from(n)),this.push(n)}}},{key:"_onOpen",value:function(){var e=this;if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(n){return this.destroy(n)}this._chunk=null,this._debug('sent chunk from "write before connect"');var t=this._cb;this._cb=null,t(null)}"function"!=typeof d&&(this._interval=setInterval((function(){return e._onInterval()}),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}},{key:"_onInterval",value:function(){if(this._cb&&this._ws&&!(this._ws.bufferedAmount>65536)){this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}},{key:"_onClose",value:function(){this.destroyed||(this._debug("on close"),this.destroy())}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],c.apply(null,e)}}]),a}(l.Duplex);m.WEBSOCKET_SUPPORT=!!p,e.exports=m}).call(this,n("+ZX+").Buffer)},w30G:function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=x,x.WritableState=S;var s={deprecate:n("P2aG")},a=n("/kXe"),u=n("+ZX+").Buffer,c=t.Uint8Array||function(){};var f,l=n("NhVp"),h=n("k5cm").getHighWaterMark,d=n("3+V0").codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,v=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;function E(){}function S(e,t,s){o=o||n("wYax"),e=e||{},"boolean"!=typeof s&&(s=t instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(L,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),L(e,t))}(e,n,i,t,o);else{var s=A(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(C,e,n,s,o):C(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function x(e){var t=this instanceof(o=o||n("wYax"));if(!t&&!f.call(x,this))return new x(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function R(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),L(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,R(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,l=n.callback;if(R(e,t,!1,t.objectMode?1:c.length,c,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final((function(n){t.pendingcb--,n&&k(e,n),t.prefinished=!0,e.emit("prefinish"),L(e,t)}))}function L(e,t){var n=A(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n("qW1w")(x,a),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===x&&(e&&e._writableState instanceof S)}})):f=function(e){return e instanceof this},x.prototype.pipe=function(){k(this,new y)},x.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=E),o.ending?function(e,t){var n=new b;k(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new _:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(k(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else R(e,t,!1,a,r,i,o);return c}(this,o,a,e,t,n)),s},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new m("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,L(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=l.destroy,x.prototype._undestroy=l.undestroy,x.prototype._destroy=function(e,t){t(e)}}).call(this,n("fRV1"),n("F63i"))},wYax:function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n("qw6+"),o=n("w30G");n("qW1w")(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||t.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n("F63i"))},wiCG:function(e,t,n){t.render=function(e,t,n,r){"function"==typeof n&&(r=n,n={});n||(n={});r||(r=function(){});_(e),b(n),"string"==typeof t&&(t=document.querySelector(t));y(e,(function(r){if(t.nodeName!==r.toUpperCase()){var i=s.extname(e.name).toLowerCase();throw new Error('Cannot render "'+i+'" inside a "'+t.nodeName.toLowerCase()+'" element, expected "'+r+'"')}return"video"!==r&&"audio"!==r||w(t,n),t}),n,r)},t.append=function(e,t,n,r){"function"==typeof n&&(r=n,n={});n||(n={});r||(r=function(){});_(e),b(n),"string"==typeof t&&(t=document.querySelector(t));if(t&&("VIDEO"===t.nodeName||"AUDIO"===t.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");function i(e){var n=document.createElement(e);return t.appendChild(n),n}y(e,(function(e){return"video"===e||"audio"===e?function(e){var r=i(e);return w(r,n),t.appendChild(r),r}(e):i(e)}),n,(function(e,t){e&&t&&t.remove(),r(e,t)}))},t.mime=n("AVWm");var r=n("KQpv")("render-media"),i=n("zas2"),o=n("EI9H"),s=n("oNVP"),a=n("eiQr"),u=n("fe2y"),c=[".m4a",".m4b",".m4p",".m4v",".mp4"],f=[".m4v",".mkv",".mp4",".webm"],l=[].concat(f,[".m4a",".m4b",".m4p",".mp3"]),h=[".mov",".ogv"],d=[".aac",".oga",".ogg",".wav",".flac"],p=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],m=[".css",".html",".js",".md",".pdf",".srt",".txt"],g="undefined"!=typeof window&&window.MediaSource;function y(e,t,n,a){var y,_=s.extname(e.name).toLowerCase(),b=0;function w(){return!("number"==typeof e.length&&e.length>n.maxBlobLength)||(r("File length too large for Blob URL approach: %d (max: %d)",e.length,n.maxBlobLength),R(new Error("File length too large for Blob URL approach: "+e.length+" (max: "+n.maxBlobLength+")")),!1)}function k(n){w()&&(y=t(n),v(e,(function(e,t){if(e)return R(e);y.addEventListener("error",R),y.addEventListener("loadstart",E),y.addEventListener("canplay",S),y.src=t})))}function E(){y.removeEventListener("loadstart",E),n.autoplay&&y.play()}function S(){y.removeEventListener("canplay",S),a(null,y)}function x(){v(e,(function(e,n){if(e)return R(e);".pdf"!==_?((y=t("iframe")).sandbox="allow-forms allow-scripts",y.src=n):((y=t("object")).setAttribute("typemustmatch",!0),y.setAttribute("type","application/pdf"),y.setAttribute("data",n)),a(null,y)}))}function R(t){t.message='Error rendering file "'+e.name+'": '+t.message,r(t.message),a(t)}l.indexOf(_)>=0?function(){var n=f.indexOf(_)>=0?"video":"audio";g?c.indexOf(_)>=0?(r("Use `videostream` package for "+e.name),d(),y.addEventListener("error",l),y.addEventListener("loadstart",E),y.addEventListener("canplay",S),new u(e,y)):i():a();function i(){r("Use MediaSource API for "+e.name),d(),y.addEventListener("error",h),y.addEventListener("loadstart",E),y.addEventListener("canplay",S);var t,n=new o(y).createWriteStream((t=e.name,{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4b":'audio/mp4; codecs="mp4a.40.5"',".m4p":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[s.extname(t).toLowerCase()]));e.createReadStream().pipe(n),b&&(y.currentTime=b)}function a(){r("Use Blob URL for "+e.name),d(),y.addEventListener("error",R),y.addEventListener("loadstart",E),y.addEventListener("canplay",S),v(e,(function(e,t){if(e)return R(e);y.src=t,b&&(y.currentTime=b)}))}function l(e){r("videostream error: fallback to MediaSource API: %o",e.message||e),y.removeEventListener("error",l),y.removeEventListener("canplay",S),i()}function h(e){r("MediaSource API error: fallback to Blob URL: %o",e.message||e),w()&&(y.removeEventListener("error",h),y.removeEventListener("canplay",S),a())}function d(){y||(y=t(n)).addEventListener("progress",(function(){b=y.currentTime}))}}():h.indexOf(_)>=0?k("video"):d.indexOf(_)>=0?k("audio"):p.indexOf(_)>=0?(y=t("img"),v(e,(function(t,n){if(t)return R(t);y.src=n,y.alt=e.name,a(null,y)}))):m.indexOf(_)>=0?x():function(){r('Unknown file extension "%s" - will attempt to render into iframe',_);var t="";e.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",(function(e){t+=e})).on("end",(function(){i(t)?(r('File extension "%s" appears ascii, so will render.',_),x()):(r('File extension "%s" appears non-ascii, will not render.',_),a(new Error('Unsupported file type "'+_+'": Cannot append to DOM')))})).on("error",a)}()}function v(e,n){var r=s.extname(e.name).toLowerCase();a(e.createReadStream(),t.mime[r]).then((function(e){return n(null,e)}),(function(e){return n(e)}))}function _(e){if(null==e)throw new Error("file cannot be null or undefined");if("string"!=typeof e.name)throw new Error("missing or invalid file.name property");if("function"!=typeof e.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function b(e){null==e.autoplay&&(e.autoplay=!1),null==e.muted&&(e.muted=!1),null==e.controls&&(e.controls=!0),null==e.maxBlobLength&&(e.maxBlobLength=2e8)}function w(e,t){e.autoplay=!!t.autoplay,e.muted=!!t.muted,e.controls=!!t.controls}},wzj9:function(e,t,n){var r=n("VsfX"),i=n("IADa"),o=new r,s="undefined"!=typeof window?window:self,a=s.crypto||s.msCrypto||{},u=a.subtle||a.webkitSubtle;function c(e){return o.digest(e)}try{u.digest({name:"sha-1"},new Uint8Array).catch((function(){u=!1}))}catch(f){u=!1}e.exports=function(e,t){u?("string"==typeof e&&(e=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}(e)),u.digest({name:"sha-1"},e).then((function(e){t(function(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")}(new Uint8Array(e)))}),(function(){t(c(e))}))):"undefined"!=typeof window?i(e,(function(n,r){t(n?c(e):r)})):queueMicrotask((function(){return t(c(e))}))},e.exports.sync=c},"x6/H":function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("G+mE"),f=n("jBhX"),l=n("fncs"),h=t.alloc(0),d=function(e){"use strict";o(s,e);var n=u(s);function s(e){var t;return r(this,s),(t=n.call(this,e)).destroyed=!1,t._pending=0,t._missing=0,t._ignoreEmpty=!1,t._buf=null,t._str=null,t._cb=null,t._ondrain=null,t._writeBuffer=null,t._writeCb=null,t._ondrain=null,t._kick(),t}return i(s,[{key:"destroy",value:function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}},{key:"_write",value:function(e,t,n){if(!this.destroyed){for(var r=!this._str||!this._str._writableState.needDrain;e.length&&!this.destroyed;){if(!this._missing&&!this._ignoreEmpty)return this._writeBuffer=e,void(this._writeCb=n);var i=e.length<this._missing?e.length:this._missing;if(this._buf?e.copy(this._buf,this._buf.length-this._missing):this._str&&(r=this._str.write(i===e.length?e:e.slice(0,i))),this._missing-=i,!this._missing){var o=this._buf,s=this._cb,a=this._str;this._buf=this._cb=this._str=this._ondrain=null,r=!0,this._ignoreEmpty=!1,a&&a.end(),s&&s(o)}e=i===e.length?h:e.slice(i)}if(this._pending&&!this._missing)return this._writeBuffer=e,void(this._writeCb=n);r?n():this._ondrain(n)}}},{key:"_buffer",value:function(e,n){this._missing=e,this._buf=t.alloc(e),this._cb=n}},{key:"_stream",value:function(e,t){var n=this;return this._missing=e,this._str=new p(this),this._ondrain=f(this._str,"drain"),this._pending++,this._str.on("end",(function(){n._pending--,n._kick()})),this._cb=t,this._str}},{key:"_readBox",value:function(){var e=this;!function n(r,i){e._buffer(r,(function(r){i=i?t.concat([i,r]):r;var o=l.readHeaders(i);"number"==typeof o?n(o-i.length,i):(e._pending++,e._headers=o,e.emit("box",o))}))}(8)}},{key:"stream",value:function(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var e=this._headers;return this._headers=null,this._stream(e.contentLen,null)}},{key:"decode",value:function(e){var t=this;if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var n=this._headers;this._headers=null,this._buffer(n.contentLen,(function(r){var i=l.decodeWithoutHeaders(n,r);e(i),t._pending--,t._kick()}))}},{key:"ignore",value:function(){var e=this;if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;this._headers=null,this._missing=t.contentLen,0===this._missing&&(this._ignoreEmpty=!0),this._cb=function(){e._pending--,e._kick()}}},{key:"_kick",value:function(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var e=this._writeCb,t=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(t,null,e)}}}]),s}(c.Writable),p=function(e){"use strict";o(n,e);var t=u(n);function n(e){var i;return r(this,n),(i=t.call(this))._parent=e,i.destroyed=!1,i}return i(n,[{key:"destroy",value:function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}]),n}(c.PassThrough);e.exports=d}).call(this,n("+ZX+").Buffer)},x8bw:function(e,t,n){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("KQpv")("bittorrent-tracker:websocket-tracker"),f=n("xbjG"),l=n("i+/A"),h=n("vl/k"),d=n("XZhR"),p=n("igz/"),m={},g=function(e){"use strict";o(n,e);var t=u(n);function n(e,i,o){var s;return r(this,n),s=t.call(this,e,i),c("new websocket tracker %s",i),s.peers={},s.socket=null,s.reconnecting=!1,s.retries=0,s.reconnectTimer=null,s.expectingResponse=!1,s._openSocket(),s}return i(n,[{key:"announce",value:function(e){var t=this;if(!this.destroyed&&!this.reconnecting)if(this.socket.connected){var n=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(n.trackerid=this._trackerId),"stopped"===e.event||"completed"===e.event)this._send(n);else{var r=Math.min(e.numwant,10);this._generateOffers(r,(function(e){n.numwant=r,n.offers=e,t._send(n)}))}}else this.socket.once("connect",(function(){t.announce(e)}))}},{key:"scrape",value:function(e){var t=this;if(!this.destroyed&&!this.reconnecting)if(this.socket.connected){var n={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map((function(e){return e.toString("binary")})):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(n)}else this.socket.once("connect",(function(){t.scrape(e)}))}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;if(this.destroyed)return e(null);for(var t in this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer),this.peers){var n=this.peers[t];clearTimeout(n.trackerTimeout),n.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,m[this.announceUrl]&&(m[this.announceUrl].consumers-=1),m[this.announceUrl].consumers>0)return e();var r=m[this.announceUrl];if(delete m[this.announceUrl],r.on("error",y),r.once("close",e),!this.expectingResponse)return o();var i=setTimeout(o,d.DESTROY_TIMEOUT);function o(){i&&(clearTimeout(i),i=null),r.removeListener("data",o),r.destroy(),r=null}r.once("data",o)}},{key:"_openSocket",value:function(){var e=this;this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=function(){e._onSocketConnect()},this._onSocketErrorBound=function(t){e._onSocketError(t)},this._onSocketDataBound=function(t){e._onSocketData(t)},this._onSocketCloseBound=function(){e._onSocketClose()},this.socket=m[this.announceUrl],this.socket?(m[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound()):(this.socket=m[this.announceUrl]=new h(this.announceUrl),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)),this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}},{key:"_onSocketConnect",value:function(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}},{key:"_onSocketData",value:function(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch(t){return void this.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?this._onAnnounceResponse(e):"scrape"===e.action?this._onScrapeResponse(e):this._onSocketError(new Error("invalid action in WS response: ".concat(e.action)))}}},{key:"_onAnnounceResponse",value:function(e){var t=this;if(e.info_hash===this.client._infoHashBinary){if(!e.peer_id||e.peer_id!==this.client._peerIdBinary){c("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);var n=e["failure reason"];if(n)return this.client.emit("warning",new Error(n));var r=e["warning message"];r&&this.client.emit("warning",new Error(r));var i=e.interval||e["min interval"];i&&this.setInterval(1e3*i);var o,s=e["tracker id"];if(s&&(this._trackerId=s),null!=e.complete){var a=Object.assign({},e,{announce:this.announceUrl,infoHash:d.binaryToHex(e.info_hash)});this.client.emit("update",a)}if(e.offer&&e.peer_id&&(c("creating peer (from remote offer)"),(o=this._createPeer()).id=d.binaryToHex(e.peer_id),o.once("signal",(function(n){var r={action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary,to_peer_id:e.peer_id,answer:n,offer_id:e.offer_id};t._trackerId&&(r.trackerid=t._trackerId),t._send(r)})),o.signal(e.offer),this.client.emit("peer",o)),e.answer&&e.peer_id){var u=d.binaryToHex(e.offer_id);(o=this.peers[u])?(o.id=d.binaryToHex(e.peer_id),o.signal(e.answer),this.client.emit("peer",o),clearTimeout(o.trackerTimeout),o.trackerTimeout=null,delete this.peers[u]):c("got unexpected answer: ".concat(JSON.stringify(e.answer)))}}}else c("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,d.binaryToHex(e.info_hash),this.client.infoHash)}},{key:"_onScrapeResponse",value:function(e){var t=this;e=e.files||{};var n=Object.keys(e);0!==n.length?n.forEach((function(n){var r=Object.assign(e[n],{announce:t.announceUrl,infoHash:d.binaryToHex(n)});t.client.emit("scrape",r)})):this.client.emit("warning",new Error("invalid scrape response"))}},{key:"_onSocketClose",value:function(){this.destroyed||(this.destroy(),this._startReconnectTimer())}},{key:"_onSocketError",value:function(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}},{key:"_startReconnectTimer",value:function(){var e=this,t=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((function(){e.retries++,e._openSocket()}),t),this.reconnectTimer.unref&&this.reconnectTimer.unref(),c("reconnecting socket in %s ms",t)}},{key:"_send",value:function(e){if(!this.destroyed){this.expectingResponse=!0;var t=JSON.stringify(e);c("send %s",t),this.socket.send(t)}}},{key:"_generateOffers",value:function(e,t){var n=this,r=[];c("generating %s offers",e);for(var i=0;i<e;++i)o();function o(){var e=l(20).toString("hex");c("creating peer (from _generateOffers)");var t=n.peers[e]=n._createPeer({initiator:!0});t.once("signal",(function(t){r.push({offer:t,offer_id:d.hexToBinary(e)}),s()})),t.trackerTimeout=setTimeout((function(){c("tracker timeout: destroying peer"),t.trackerTimeout=null,delete n.peers[e],t.destroy()}),5e4),t.trackerTimeout.unref&&t.trackerTimeout.unref()}function s(){r.length===e&&(c("generated %s offers",e),t(r))}s()}},{key:"_createPeer",value:function(e){var t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);var n=new f(e);return n.once("error",r),n.once("connect",(function e(){n.removeListener("error",r),n.removeListener("connect",e)})),n;function r(e){t.client.emit("warning",new Error("Connection error: ".concat(e.message))),n.destroy()}}}]),n}(p);function y(){}g.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,g._socketPool=m,e.exports=g},xbjG:function(e,t,n){(function(t){var r=n("VrFO"),i=n("Y9Ll"),o=n("5Yy7"),s=n("N+ot"),a=n("AuHH");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var c=n("KQpv")("simple-peer"),f=n("pqqp"),l=n("i+/A"),h=n("G+mE"),d=n("yQO9");function p(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function m(e,t){return"string"==typeof e&&(e=new Error(e)),e.error instanceof Error&&(e=e.error),e.code=t,e}var g=function(e){"use strict";o(a,e);var n=u(a);function a(e){var t;if(r(this,a),e=Object.assign({allowHalfOpen:!1},e),(t=n.call(this,e))._id=l(4).toString("hex").slice(0,7),t._debug("new peer %o",e),t.channelName=e.initiator?e.channelName||l(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||a.channelConfig,t.negotiated=t.channelConfig.negotiated,t.config=Object.assign({},a.config,e.config),t.offerOptions=e.offerOptions||{},t.answerOptions=e.answerOptions||{},t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=void 0===e.trickle||e.trickle,t.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,t.iceCompleteTimeout=e.iceCompleteTimeout||5e3,t.destroyed=!1,t._connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localFamily=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:f(),!t._wrtc)throw"undefined"==typeof window?m("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):m("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._iceCompleteTimer=null,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!t.negotiated&&!t.initiator,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new Map,t._firstStable=!0,t._closingInterval=null,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null;try{t._pc=new t._wrtc.RTCPeerConnection(t.config)}catch(i){return d((function(){return t.destroy(m(i,"ERR_PC_CONSTRUCTOR"))})),s(t)}return t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onconnectionstatechange=function(){t._onConnectionStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator||t.negotiated?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},t.streams&&t.streams.forEach((function(e){t.addStream(e)})),t._pc.ontrack=function(e){t._onTrack(e)},t.initiator&&t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound),t}return i(a,[{key:"address",value:function(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}},{key:"signal",value:function(e){var t=this;if(this.destroyed)throw m("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(n){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(m(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(m("signal() called with invalid signal data","ERR_SIGNALING"))}},{key:"_addIceCandidate",value:function(e){var t=this,n=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(n).catch((function(e){var r;!n.address||n.address.endsWith(".local")?(r="Ignoring unsupported ICE candidate.",console.warn(r)):t.destroy(m(e,"ERR_ADD_ICE_CANDIDATE"))}))}},{key:"send",value:function(e){this._channel.send(e)}},{key:"addTransceiver",value:function(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(m(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}},{key:"addStream",value:function(e){var t=this;this._debug("addStream()"),e.getTracks().forEach((function(n){t.addTrack(n,e)}))}},{key:"addTrack",value:function(e,t){this._debug("addTrack()");var n=this._senderMap.get(e)||new Map,r=n.get(t);if(r)throw r.removed?m("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED"):m("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}},{key:"replaceTrack",value:function(e,t,n){this._debug("replaceTrack()");var r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw m("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null!=i.replaceTrack?i.replaceTrack(t):this.destroy(m("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))}},{key:"removeTrack",value:function(e,t){this._debug("removeSender()");var n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw m("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(i){"NS_ERROR_UNEXPECTED"===i.name?this._sendersAwaitingStable.push(r):this.destroy(m(i,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}},{key:"removeStream",value:function(e){var t=this;this._debug("removeSenders()"),e.getTracks().forEach((function(n){t.removeTrack(n,e)}))}},{key:"_needsNegotiation",value:function(){var e=this;this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,d((function(){e._batchedNegotiation=!1,e._debug("starting batched negotiation"),e.negotiate()})))}},{key:"negotiate",value:function(){var e=this;this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((function(){e._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}},{key:"destroy",value:function(e){this._destroy(e,(function(){}))}},{key:"_destroy",value:function(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}},{key:"_setupData",value:function(e){var t=this;if(!e.channel)return this.destroy(m("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=function(e){t._onChannelMessage(e)},this._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},this._channel.onopen=function(){t._onChannelOpen()},this._channel.onclose=function(){t._onChannelClose()},this._channel.onerror=function(e){t.destroy(m(e,"ERR_DATA_CHANNEL"))};var n=!1;this._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(n&&t._onChannelClose(),n=!0):n=!1}),5e3)}},{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){if(this.destroyed)return n(m("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.destroy(m(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}},{key:"_onFinish",value:function(){var e=this;if(!this.destroyed){var t=function(){setTimeout((function(){return e.destroy()}),1e3)};this._connected?t():this.once("connect",t)}}},{key:"_startIceCompleteTimeout",value:function(){var e=this;this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),this.iceCompleteTimeout))}},{key:"_createOffer",value:function(){var e=this;this.destroyed||this._pc.createOffer(this.offerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=p(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var n=function(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}};e._pc.setLocalDescription(t).then((function(){e._debug("createOffer success"),e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))})).catch((function(t){e.destroy(m(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(m(t,"ERR_CREATE_OFFER"))}))}},{key:"_requestMissingTransceivers",value:function(){var e=this;this._pc.getTransceivers&&this._pc.getTransceivers().forEach((function(t){t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))}},{key:"_createAnswer",value:function(){var e=this;this.destroyed||this._pc.createAnswer(this.answerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=p(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var n=function(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp}),e.initiator||e._requestMissingTransceivers()}};e._pc.setLocalDescription(t).then((function(){e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))})).catch((function(t){e.destroy(m(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(m(t,"ERR_CREATE_ANSWER"))}))}},{key:"_onConnectionStateChange",value:function(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(m("Connection failed.","ERR_CONNECTION_FAILURE"))}},{key:"_onIceStateChange",value:function(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(m("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(m("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}},{key:"getStats",value:function(e){var t=this,n=function(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e};0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((function(t){var r=[];t.forEach((function(e){r.push(n(e))})),e(null,r)}),(function(t){return e(t)})):this._pc.getStats.length>0?this._pc.getStats((function(r){if(!t.destroyed){var i=[];r.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,i.push(n(t))})),e(null,i)}}),(function(t){return e(t)})):e(null,[])}},{key:"_maybeReady",value:function(){var e=this;if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),!this._connected&&!this._connecting&&this._pcReady&&this._channelReady){this._connecting=!0;!function t(){e.destroyed||e.getStats((function(n,r){if(!e.destroyed){n&&(r=[]);var i={},o={},s={},a=!1;r.forEach((function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)}));var u=function(t){a=!0;var n=o[t.localCandidateId];n&&(n.ip||n.address)?(e.localAddress=n.ip||n.address,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1])),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var r=i[t.remoteCandidateId];r&&(r.ip||r.address)?(e.remoteAddress=r.ip||r.address,e.remotePort=Number(r.port)):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=Number(r.portNumber)):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=Number(r[1])),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)};if(r.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&u(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&u(e)})),a||Object.keys(s).length&&!Object.keys(o).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(n){return e.destroy(m(n,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var c=e._cb;e._cb=null,c(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){return e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}}))}()}}},{key:"_onInterval",value:function(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()}},{key:"_onSignalingStateChange",value:function(){var e=this;this.destroyed||("stable"!==this._pc.signalingState||this._firstStable||(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}},{key:"_onIceCandidate",value:function(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}},{key:"_onChannelMessage",value:function(e){if(!this.destroyed){var n=e.data;n instanceof ArrayBuffer&&(n=t.from(n)),this.push(n)}}},{key:"_onChannelBufferedAmountLow",value:function(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}},{key:"_onChannelOpen",value:function(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}},{key:"_onChannelClose",value:function(){this.destroyed||(this._debug("on channel close"),this.destroy())}},{key:"_onTrack",value:function(e){var t=this;this.destroyed||e.streams.forEach((function(n){t._debug("on track"),t.emit("track",e.track,n),t._remoteTracks.push({track:e.track,stream:n}),t._remoteStreams.some((function(e){return e.id===n.id}))||(t._remoteStreams.push(n),d((function(){t.emit("stream",n)})))}))}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],c.apply(null,e)}},{key:"bufferSize",get:function(){return this._channel&&this._channel.bufferedAmount||0}},{key:"connected",get:function(){return this._connected&&"open"===this._channel.readyState}}]),a}(h.Duplex);g.WEBRTC_SUPPORT=!!f(),g.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},g.channelConfig={},e.exports=g}).call(this,n("+ZX+").Buffer)},yQO9:function(e,t){var n;e.exports="function"==typeof queueMicrotask?queueMicrotask:function(e){return(n||(n=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}},yiYz:function(e,t,n){(function(t){var n=function(){try{if(!t.isEncoding("latin1"))return!1;var e=t.alloc?t.alloc(4):new t(4);return e.fill("ab","ucs2"),"61006200"===e.toString("hex")}catch(n){return!1}}();function r(e,t,n,r){if(n<0||r>e.length)throw new RangeError("Out of range index");return n>>>=0,(r=void 0===r?e.length:r>>>0)>n&&e.fill(t,n,r),e}e.exports=function(e,i,o,s,a){if(n)return e.fill(i,o,s,a);if("number"==typeof i)return r(e,i,o,s);if("string"==typeof i){if("string"==typeof o?(a=o,o=0,s=e.length):"string"==typeof s&&(a=s,s=e.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("latin1"===a&&(a="binary"),"string"==typeof a&&!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(""===i)return r(e,0,o,s);if(function(e){return 1===e.length&&e.charCodeAt(0)<256}(i))return r(e,i.charCodeAt(0),o,s);i=new t(i,a)}return t.isBuffer(i)?function(e,t,n,r){if(n<0||r>e.length)throw new RangeError("Out of range index");if(r<=n)return e;n>>>=0,r=void 0===r?e.length:r>>>0;for(var i=n,o=t.length;i<=r-o;)t.copy(e,i),i+=o;return i!==r&&t.copy(e,i,0,r-i),e}(e,i,o,s):r(e,0,o,s)}}).call(this,n("+ZX+").Buffer)},yjPI:function(e,t){var n,r=1,i=function(){r=r+1&65535};e.exports=function(e){n||(n=setInterval(i,250)).unref&&n.unref();var t=4*(e||5),o=[0],s=1,a=r-1&65535;return function(e){var n=r-a&65535;for(n>t&&(n=t),a=r;n--;)s===t&&(s=0),o[s]=o[0===s?t-1:s-1],s++;e&&(o[s-1]+=e);var i=o[s-1],u=o.length<t?0:o[s===t?0:s];return o.length<4?i:4*(i-u)/o.length}}},zHZo:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},zTkl:function(e,t,n){"use strict";var r=n("X05J");function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},zas2:function(e,t){e.exports=function(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)>127)return!1;return!0}},zjR9:function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},zxH9:function(e,t,n){(function(t,r){var i=n("VrFO"),o=n("Y9Ll"),s=n("1Pcy"),a=n("5Yy7"),u=n("N+ot"),c=n("AuHH");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var l=n("KQpv")("bittorrent-tracker:client"),h=n("r2q8"),d=n("MS7o"),p=n("LK6K"),m=n("xbjG"),g=n("XZhR"),y=n(12),v=n(13),_=n("x8bw"),b=function(e){"use strict";a(u,e);var n=f(u);function u(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,u),e=n.call(this),!o.peerId)throw new Error("Option `peerId` is required");if(!o.infoHash)throw new Error("Option `infoHash` is required");if(!o.announce)throw new Error("Option `announce` is required");if(!t.browser&&!o.port)throw new Error("Option `port` is required");e.peerId="string"==typeof o.peerId?o.peerId:o.peerId.toString("hex"),e._peerIdBuffer=r.from(e.peerId,"hex"),e._peerIdBinary=e._peerIdBuffer.toString("binary"),e.infoHash="string"==typeof o.infoHash?o.infoHash.toLowerCase():o.infoHash.toString("hex"),e._infoHashBuffer=r.from(e.infoHash,"hex"),e._infoHashBinary=e._infoHashBuffer.toString("binary"),l("new client %s",e.infoHash),e.destroyed=!1,e._port=o.port,e._getAnnounceOpts=o.getAnnounceOpts,e._rtcConfig=o.rtcConfig,e._userAgent=o.userAgent,e._wrtc="function"==typeof o.wrtc?o.wrtc():o.wrtc;var a="string"==typeof o.announce?[o.announce]:null==o.announce?[]:o.announce;a=a.map((function(e){return"/"===(e=e.toString())[e.length-1]&&(e=e.substring(0,e.length-1)),e})),a=Array.from(new Set(a));var c=!1!==e._wrtc&&(!!e._wrtc||m.WEBRTC_SUPPORT),f=function(n){t.nextTick((function(){e.emit("warning",n)}))};return e._trackers=a.map((function(t){var n;try{n=new URL(t)}catch(o){return f(new Error("Invalid tracker URL: ".concat(t))),null}var r=n.port;if(r<0||r>65535)return f(new Error("Invalid tracker port: ".concat(t))),null;var i=n.protocol;return"http:"!==i&&"https:"!==i||"function"!=typeof y?"udp:"===i&&"function"==typeof v?new v(s(e),t):"ws:"!==i&&"wss:"!==i||!c||"ws:"===i&&"undefined"!=typeof window&&"https:"===window.location.protocol?(f(new Error("Unsupported tracker protocol: ".concat(t))),null):new _(s(e),t):new y(s(e),t)})).filter(Boolean),e}return o(u,[{key:"start",value:function(e){(e=this._defaultAnnounceOpts(e)).event="started",l("send `start` %o",e),this._announce(e),this._trackers.forEach((function(e){e.setInterval()}))}},{key:"stop",value:function(e){(e=this._defaultAnnounceOpts(e)).event="stopped",l("send `stop` %o",e),this._announce(e)}},{key:"complete",value:function(e){e||(e={}),(e=this._defaultAnnounceOpts(e)).event="completed",l("send `complete` %o",e),this._announce(e)}},{key:"update",value:function(e){(e=this._defaultAnnounceOpts(e)).event&&delete e.event,l("send `update` %o",e),this._announce(e)}},{key:"_announce",value:function(e){this._trackers.forEach((function(t){t.announce(e)}))}},{key:"scrape",value:function(e){l("send `scrape`"),e||(e={}),this._trackers.forEach((function(t){t.scrape(e)}))}},{key:"setInterval",value:function(e){l("setInterval %d",e),this._trackers.forEach((function(t){t.setInterval(e)}))}},{key:"destroy",value:function(e){if(!this.destroyed){this.destroyed=!0,l("destroy");var t=this._trackers.map((function(e){return function(t){e.destroy(t)}}));p(t,e),this._trackers=[],this._getAnnounceOpts=null}}},{key:"_defaultAnnounceOpts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==e.numwant&&(e.numwant=g.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),this._getAnnounceOpts&&(e=Object.assign({},e,this._getAnnounceOpts())),e}}]),u}(h);b.scrape=function(e,t){if(t=d(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");var n=Object.assign({},e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:r.from("01234567890123456789"),port:6881}),i=new b(n);i.once("error",t),i.once("warning",t);var o=Array.isArray(e.infoHash)?e.infoHash.length:1,s={};return i.on("scrape",(function(e){if(o-=1,s[e.infoHash]=e,0===o){i.destroy();var n=Object.keys(s);1===n.length?t(null,s[n[0]]):t(null,s)}})),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map((function(e){return r.from(e,"hex")})):r.from(e.infoHash,"hex"),i.scrape({infoHash:e.infoHash}),i},e.exports=b}).call(this,n("F63i"),n("+ZX+").Buffer)}}]);
//# sourceMappingURL=component---src-pages-videostream-tsx-3b352b67b546307faabc.js.map